/*! For license information please see 1396.js.LICENSE.txt */
try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="3516ab40-449a-4e92-961b-a26e10fdd2bb",e._sentryDebugIdIdentifier="sentry-dbid-3516ab40-449a-4e92-961b-a26e10fdd2bb")}()}catch(e){}!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"3.133.0-398e03"}}catch(e){}}(),(self.webpackChunkcb_wallet_extension=self.webpackChunkcb_wallet_extension||[]).push([[1396],{65236:(e,t,n)=>{n.r(t),n.d(t,{CollectibleBuyListing:()=>y});var o,r=n(14041),i=n(23291),a=n(79071),l=n.n(a),s=n(92271),c=n(15654),u=n(66491),d=n(82501),f=n(98883),g=n(31085);e=n.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);var p,b,m="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},y=(0,r.memo)(m((function(){var e=(0,r.useCallback)((function(e){var t=e.error,n=e.errorHash;(0,i.op)({errorHash:n,errorMessage:t.message})}),[]),t=(0,r.useCallback)((function(e){var t=e.error;return(0,g.jsx)(u.U,{error:t})}),[]);return(0,g.jsx)(c.T,{height:"100%",testID:"collectible-buy-listing-wrapper",overflow:"scroll",children:(0,g.jsx)(s.t,{onError:e,renderFallback:t,children:(0,g.jsx)(f.Zd.Provider,{onSubmit:l(),initialValues:f.LX,children:(0,g.jsx)(f.Im.Provider,{children:(0,g.jsx)(d.q,{})})})})})}),"useCallback{logGlobalError}\nuseCallback{renderFallback}"));(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&p.register(y,"CollectibleBuyListing","/workspaces/apps/extension/src/screens/CollectibleBuyListing/CollectibleBuyListing.tsx"),(b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&b(e)},82501:(e,t,n)=>{n.d(t,{q:()=>p});var o,r=n(14041),i=n(6595),a=n(47299),l=n(19443),s=n(25655),c=n(87745),u=n(98883),d=n(31085);e=n.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var f,g,p=(0,r.memo)((function(){return(0,d.jsxs)(u.Im.Steps,{children:[(0,d.jsx)(c.C,{},"collectibleListingDetail"),(0,d.jsx)(a.I,{},"collectibleBuyListingInsufficientFunds"),(0,d.jsx)(i.E,{},"collectibleBuyListingConfirmation"),(0,d.jsx)(l.m,{},"collectibleBuyListingPhoneConfirmation"),(0,d.jsx)(s.L,{},"collectibleBuyListingStatus")]})}));(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&f.register(p,"CollectibleBuyListingStepper","/workspaces/apps/extension/src/screens/CollectibleBuyListing/CollectibleBuyListingStepper.tsx"),(g="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&g(e)},6595:(e,t,n)=>{n.d(t,{E:()=>R});var o=n(14041),r=n(32183),i=n(8867),a=n(86090),l=n(23291),s=n(87432),c=n(53404),u=n(7427),d=n(84632),f=n(24117),g=n(84168),p=n(64292),b=n(70960),m=n(69148),y=n(48097),v=n(70918),h=n(46845),x=n(32451),C=n(4118),k=n(61513),L=n(64887),I=n(24745),w=n(33396),T=n(37121),M=n(28672),S=n(98883),_=n(4244),E=n(36760),B=n(63162),A=n(16238),j=n.n(A);const H=(0,r.YK)({address:{id:"+pVL1h",defaultMessage:"Address"},walletUsed:{id:"H6R25Z",defaultMessage:"Wallet used"},network:{id:"0araSK",defaultMessage:"Network"},networkFee:{id:"/vyFO4",defaultMessage:"Network fee"}});function P({unsignedTx:e,wallet:t}){const{formatMessage:n}=(0,i.A)(),r=e.network.asChain()?.blockExplorerUrl||"",a=(0,E.j)(t),{formatToFiat:l,formatToFiatFeeRange:s}=(0,_.J9)(),c=(0,o.useMemo)((()=>{let n="";if(a){const t=e;n=s({fromCurrencyCode:t.feeCurrencyCode,decimals:t.feeCurrencyDecimal,upperBoundValue:t.upperBoundFee,isAbbreviated:!1,lowerBoundValue:t.lowerBoundFee,network:t.network,blockchain:t.blockchain})}else n=l({fromCurrencyCode:e.feeCurrencyCode,decimals:e.feeCurrencyDecimal,value:e.estimatedFee,isAbbreviated:!1,contractAddress:void 0,network:t.network,blockchain:t.blockchain});return n??""}),[a,e,s,l,t.network,t.blockchain]);return j()([{label:n(H.address),detailText:{text:(0,B.$)(e.recipientAddress),blockExplorerUrl:`${r}/address/${e.recipientAddress}`}},{label:n(H.walletUsed),detailText:{text:(0,B.$)(t.primaryAddress),blockExplorerUrl:`${r}/address/${t.primaryAddress}`}},{label:n(H.network),detailText:t.network.asChain()?.displayName||""},{label:n(H.networkFee),detailText:c}])}var G,D=n(50400),O=n(31085);e=n.hmd(e),(G="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&G(e);var N,F,U="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},W=(0,r.YK)({buy:{id:"kBH2Wf",defaultMessage:[{type:0,value:"Buy"}]},cancel:{id:"Usjb5x",defaultMessage:[{type:0,value:"Cancel"}]},confirm:{id:"N2IrpM",defaultMessage:[{type:0,value:"Confirm"}],descriptin:"Button text for confirming a transaction"}}),R=(0,o.memo)(U((function(){var e,t=(0,f.gs)(),n=(0,d.n)(),r=(0,i.A)().formatMessage,_=(0,T.A)(S.Zd),E=_.unsignedTx.value,B=_.wallet.value,A=_.signedTx.onChange,j=_.txSigningError.onChange,H=_.platformDomain.value,G=(0,w.lE)(S.Im).goToStep,N=(0,a.g)(),F=N.contractAddress,U=N.tokenId,R=N.chainId,z=N.marketplace,V=N.offchainOrderId,X=(0,o.useMemo)((function(){return{contractAddress:F,tokenId:U,chainId:R,marketplace:z,offchainOrderId:V}}),[F,U,R,z,V]),K=(0,C.z)(x.fO.nft_listing_detail,x.H5.load_collectible_listing_confirmation,{logMetric:!0}).end;if((0,s.y)((function(){K()})),(0,l.j7)(X),!E)throw new Error("CollectibleBuyListingConfirmation: unsignedTx needs to be defined");var Y=(0,o.useMemo)((function(){if(!B)throw new Error("CollectibleBuyListingConfirmation: wallet needs to be defined");return B}),[B]),$=(0,v.h)(),Z=(0,h.J)($,E),q=P({unsignedTx:E,wallet:Y}),Q=(0,p.Z)({unsignedTxOrUserOp:E,wallet:Y,feeWallet:Z,flow:"buyListing"}),J=(0,m.f)(),ee=(0,y.u)({request:"buy-nft-listing",unsignedTxOrUserOp:E,wallet:Y}),te=ee.txScannerData,ne=ee.txScannerNotices,oe=ee.isTxScannerLoading,re=ee.isTxScannerError,ie=ee.txScannerLoadStartTime,ae=ee.resetLoadTimer,le=(0,g.X)(te),se=(0,b.$)({request:"buy-nft-listing",dappURL:H,blockchain:Y.blockchain.toString(),txScannerData:te,txScannerNotices:ne,walletIndex:null===(e=Y.selectedIndex)||void 0===e?void 0:e.toString(),isTxPreviewEnabled:J}),ce=(0,u.vQ)(Y.accountId),ue=ce.hasLocallyStoredKey,de=ce.isLedgerAccount,fe=(0,o.useCallback)((function(){de?(0,l.Ct)():ue&&(0,l.ec)()}),[ue,de]),ge=(0,o.useCallback)((function(){de&&(0,l.Vm)(),ue&&(0,l.Eo)()}),[ue,de]),pe=(0,o.useCallback)((function(){G("collectibleBuyListingPhoneConfirmation")}),[G]),be=(0,o.useCallback)((function(e){fe(),j(e),G("collectibleBuyListingStatus")}),[fe,j,G]),me=(0,o.useCallback)((function(e){ge(),A(e),G("collectibleBuyListingStatus")}),[ge,A,G]),ye=(0,o.useCallback)((function(){(0,l.vH)(X),G("collectibleListingDetail")}),[G,X]),ve=(0,o.useCallback)((function(){(0,l.Rr)(X)}),[X]),he=(0,D.A)({wallet:Y,unsignedTx:E,flow:c.nl.NftBuyListing,error:Q,confirmText:r(W.buy),cancelText:r(W.cancel),goToPhoneConfirmation:pe,onSignSuccess:me,onSignError:be,onCancel:ye,onConfirm:ve,signButtonFirst:!1}),xe=he.buttonProps,Ce=he.hardwareWalletScreen,ke=he.isHardwareWalletSigning,Le=(0,o.useMemo)((function(){var e,o;return!J||re?(0,O.jsx)(L.F,{analyticsData:se,txScannerNotices:ne}):oe?(0,O.jsx)(I.l,{}):(null==te||null===(e=te.assetChangeOperations)||void 0===e?void 0:e.length)||(null==te||null===(o=te.preAuthorizeOperations)||void 0===o?void 0:o.length)?(0,O.jsx)(k.B,{resetLoadTimer:ae,txScannerLoadStartTime:null==ie?void 0:ie.current,parsedOperations:te,userWalletAddress:Y.primaryAddress,analyticsData:se,isRevokeOperation:le,networkChainId:R,exchangeRatesMap:t,activeFiatCurrency:n}):(0,O.jsx)(L.F,{analyticsData:se,txScannerNotices:ne})}),[J,re,oe,te,se,ne,ae,ie,Y.primaryAddress,le,R,t,n]);return ke?Ce:(0,O.jsx)(M.Z,{headerText:r(W.buy),topSection:Le,detailRowItems:q,buttonProps:xe,handleBackButton:ye,error:Q})}),"useExchangeRatesMap{exchangeRatesMap}\nuseActiveFiatCurrency{activeFiatCurrency}\nuseIntl{{ formatMessage }}\nuseFields{{\n    unsignedTx: { value: unsignedTx },\n    wallet: { value: walletValue },\n    signedTx: { onChange: signedTxOnChange },\n    txSigningError: { onChange: txSigningErrorOnChange },\n    platformDomain: { value: platformDomainValue },\n  }}\nuseStepper{{ goToStep }}\nuseParams{{ contractAddress, tokenId, chainId, marketplace, offchainOrderId }}\nuseMemo{collectibleListingAnalyticsData}\nuseExtensionPerfMark{{ end: endLoadListingConfirmationPerfMark }}\nuseOnMount{}\nuseLogCollectibleListingConfirmationViewed{}\nuseMemo{wallet}\nuseActiveWalletGroupId{activeWalletGroupId}\nuseTxFeeWallet{feeWallet}\nuseTransactionDetailRowItems{detailRowItems}\nuseTransactionDetailsErrors{transactionDetailsErrors}\nuseIsTxPreviewEnabled{isTxPreviewEnabled}\nuseTxScanner{{\n    txScannerData: parsedOperations,\n    txScannerNotices,\n    isTxScannerLoading,\n    isTxScannerError,\n    txScannerLoadStartTime,\n    resetLoadTimer,\n  }}\nuseIsRevokeOperation{isRevokeOperation}\nuseSignTransactionEventData{analyticsData}\nuseAccountById{{ hasLocallyStoredKey, isLedgerAccount }}\nuseCallback{logSigningErrorEvent}\nuseCallback{logSigningSuccessEvent}\nuseCallback{handleGoToPhoneConfirmation}\nuseCallback{handleSigningError}\nuseCallback{handleSigningSuccess}\nuseCallback{handleCancel}\nuseCallback{handleBuy}\nuseCollectibleTransactionSignAndSubmit{{ buttonProps, hardwareWalletScreen, isHardwareWalletSigning }}\nuseMemo{topSection}",(function(){return[f.gs,d.n,i.A,T.A,w.lE,a.g,C.z,s.y,l.j7,v.h,h.J,P,p.Z,m.f,y.u,g.X,b.$,u.vQ,D.A]})));(N="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(N.register(W,"messages","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleBuyListingConfirmation/CollectibleBuyListingConfirmation.tsx"),N.register(R,"CollectibleBuyListingConfirmation","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleBuyListingConfirmation/CollectibleBuyListingConfirmation.tsx")),(F="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&F(e)},47299:(e,t,n)=>{n.d(t,{I:()=>S});var o,r=n(14041),i=n(32183),a=n(8867),l=n(86090),s=n(23291),c=n(87432),u=n(32451),d=n(10058),f=n(4681),g=n(4118),p=n(33396),b=n(37121),m=n(85581),y=n(98139),v=n(15654),h=n(60149),x=n(97541),C=n(98883),k=n(41690),L=n(31085);e=n.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);var I,w,T="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},M=(0,i.YK)({notEnoughEth:{id:"nKfvOv",defaultMessage:[{type:0,value:"You don't have enough ETH to buy this NFT"}]},notEnoughEthDescription:{id:"bA/MSM",defaultMessage:[{type:0,value:"You can buy or transfer ETH using your Coinbase account or transfer it from another wallet."}]},buyOrTransfer:{id:"TzU5tO",defaultMessage:[{type:0,value:"Buy or transfer with Coinbase"}]},transferFromAnotherWallet:{id:"d1kD9D",defaultMessage:[{type:0,value:"Transfer from another wallet"}]}}),S=(0,r.memo)(T((function(){var e=(0,b.A)(C.Zd).wallet,t=(0,a.A)().formatMessage,n=(0,l.W6)().push,o=(0,p.lE)(C.Im).goBack,i=(0,l.g)(),I=i.contractAddress,w=i.tokenId,T=i.chainId,S=(0,r.useMemo)((function(){return{contractAddress:I,tokenId:w,chainId:T}}),[I,w,T]),_=(0,g.z)(u.fO.nft_listing_detail,u.H5.load_collectible_listing_confirmation,{logMetric:!1}).clear;(0,c.y)((function(){_()})),(0,s.J6)(S);var E=(0,r.useCallback)((function(){(0,s.Fc)(S),n((0,l.tW)(k.Q.ONRAMP_INTERSTITIAL,{mode:"nft"}))}),[S,n]),B=(0,r.useCallback)((function(){var t;(0,s.OV)(S),n((0,l.tW)(k.Q.RECEIVE_ADDRESS,{walletId:null===(t=e.value)||void 0===t?void 0:t.id}))}),[S,n,e.value]);return(0,L.jsxs)(f.ff,{header:(0,L.jsx)(d.jq,{variant:"secondary",handleBack:o}),children:[(0,L.jsxs)(v.T,{width:"100%",gap:2,alignItems:"center",paddingX:3,children:[(0,L.jsx)(y.K,{name:"noFees",dimension:"200x200"}),(0,L.jsx)(h.f,{as:"p",textAlign:"center",children:t(M.notEnoughEth)}),(0,L.jsx)(x.K,{as:"p",textAlign:"center",color:"fgMuted",children:t(M.notEnoughEthDescription)})]}),(0,L.jsxs)(v.T,{width:"100%",padding:2,gap:2,children:[(0,L.jsx)(m.$n,{block:!0,variant:"primary",onClick:E,children:t(M.buyOrTransfer)}),(0,L.jsx)(m.$n,{block:!0,variant:"secondary",onClick:B,children:t(M.transferFromAnotherWallet)})]})]})}),"useFields{{ wallet: walletField }}\nuseIntl{{ formatMessage }}\nuseHistory{{ push }}\nuseStepper{{ goBack }}\nuseParams{{ contractAddress, tokenId, chainId }}\nuseMemo{analyticsData}\nuseExtensionPerfMark{{ clear: clearLoadListingConfirmationPerfMark }}\nuseOnMount{}\nuseLogCollectibleListingInsufficientFundsViewed{}\nuseCallback{handleBuyPress}\nuseCallback{handleTransferPress}",(function(){return[b.A,a.A,l.W6,p.lE,l.g,g.z,c.y,s.J6]})));(I="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(I.register(M,"messages","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleBuyListingInsufficientFunds/CollectibleBuyListingInsufficientFunds.tsx"),I.register(S,"CollectibleBuyListingInsufficientFunds","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleBuyListingInsufficientFunds/CollectibleBuyListingInsufficientFunds.tsx")),(w="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&w(e)},19443:(e,t,n)=>{n.d(t,{m:()=>D});var o,r=n(14041),i=n(32183),a=n(8867),l=n(86090),s=n(23291),c=n(26182),u=n(87432),d=n(21413),f=n(33396),g=n(37121),p=n(52331),b=n(93754),m=n(98883),y=n(50271),v=n(31085);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function x(){"use strict";var e=T(),t=e.m(x),n=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function o(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===n||"GeneratorFunction"===(t.displayName||t.name))}var r={throw:1,return:2,break:3,continue:3};function i(e){var t,n;return function(o){t||(t={stop:function(){return n(o.a,2)},catch:function(){return o.v},abrupt:function(e,t){return n(o.a,r[e],t)},delegateYield:function(e,r,i){return t.resultName=r,n(o.d,C(e),i)},finish:function(e){return n(o.f,e)}},n=function(e,n,r){o.p=t.prev,o.n=t.next;try{return e(n,r)}finally{t.next=o.n}}),t.resultName&&(t[t.resultName]=o.v,t.resultName=void 0),t.sent=o.v,t.next=o.n;try{return e.call(this,t)}finally{o.p=t.prev,o.n=t.next}}}return(x=function(){return{wrap:function(t,n,o,r){return e.w(i(t),n,o,r&&r.reverse())},isGeneratorFunction:o,mark:e.m,awrap:function(e,t){return new S(e,t)},AsyncIterator:w,async:function(e,t,n,r,a){return(o(t)?I:L)(i(e),t,n,r,a)},keys:k,values:C}})()}function C(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(h(e)+" is not iterable")}function k(e){var t=Object(e),n=[];for(var o in t)n.unshift(o);return function e(){for(;n.length;)if((o=n.pop())in t)return e.value=o,e.done=!1,e;return e.done=!0,e}}function L(e,t,n,o,r){var i=I(e,t,n,o,r);return i.next().then((function(e){return e.done?e.value:i.next()}))}function I(e,t,n,o,r){return new w(T().w(e,t,n,o),r||Promise)}function w(e,t){function n(o,r,i,a){try{var l=e[o](r),s=l.value;return s instanceof S?t.resolve(s.v).then((function(e){n("next",e,i,a)}),(function(e){n("throw",e,i,a)})):t.resolve(s).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,a)}))}catch(e){a(e)}}var o;this.next||(M(w.prototype),M(w.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),M(this,"_invoke",(function(e,r,i){function a(){return new t((function(t,o){n(e,i,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function T(){var e,t,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function i(n,o,r,i){var s=o&&o.prototype instanceof l?o:l,c=Object.create(s.prototype);return M(c,"_invoke",function(n,o,r){var i,l,s,c=0,u=r||[],d=!1,f={p:0,n:0,v:e,a:g,f:g.bind(e,4),d:function(t,n){return i=t,l=0,s=e,f.n=n,a}};function g(n,o){for(l=n,s=o,t=0;!d&&c&&!r&&t<u.length;t++){var r,i=u[t],g=f.p,p=i[2];n>3?(r=p===o)&&(s=i[(l=i[4])?5:(l=3,3)],i[4]=i[5]=e):i[0]<=g&&((r=n<2&&g<i[1])?(l=0,f.v=o,f.n=i[1]):g<p&&(r=n<3||i[0]>o||o>p)&&(i[4]=n,i[5]=o,f.n=p,l=0))}if(r||n>1)return a;throw d=!0,o}return function(r,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&g(u,p),l=u,s=p;(t=l<2?e:s)||!d;){i||(l?l<3?(l>1&&(f.n=-1),g(l,s)):f.n=s:f.v=s);try{if(c=2,i){if(l||(r="next"),t=i[r]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,l<2&&(l=0)}else 1===l&&(t=i.return)&&t.call(i),l<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),l=1);i=e}else if((t=(d=f.n<0)?s:n.call(o,f))!==a)break}catch(t){i=e,l=1,s=t}finally{c=1}}return{value:t,done:d}}}(n,r,i),!0),c}var a={};function l(){}function s(){}function c(){}t=Object.getPrototypeOf;var u=[][o]?t(t([][o]())):(M(t={},o,(function(){return this})),t),d=c.prototype=l.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,M(e,r,"GeneratorFunction")),e.prototype=Object.create(d),e}return s.prototype=c,M(d,"constructor",c),M(c,"constructor",s),s.displayName="GeneratorFunction",M(c,r,"GeneratorFunction"),M(d),M(d,r,"Generator"),M(d,o,(function(){return this})),M(d,"toString",(function(){return"[object Generator]"})),(T=function(){return{w:i,m:f}})()}function M(e,t,n,o){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}M=function(e,t,n,o){function i(t,n){M(e,t,(function(e){return this._invoke(t,n,e)}))}t?r?r(e,t,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},M(e,t,n,o)}function S(e,t){this.v=e,this.k=t}function _(e,t,n,o,r,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(o,r)}function E(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function a(e){_(i,o,r,a,l,"next",e)}function l(e){_(i,o,r,a,l,"throw",e)}a(void 0)}))}}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(o=i.call(n)).done)&&(l.push(o.value),l.length!==t);s=!0);}catch(e){c=!0,r=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}e=n.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);var j,H,P="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},G=(0,i.YK)({title:{id:"uxLC8E",defaultMessage:[{type:0,value:"Confirm transaction"}]},confirmOnPhone:{id:"LKMb7n",defaultMessage:[{type:0,value:"Confirm on phone"}]},confirmOnPhoneDescription:{id:"In3vOT",defaultMessage:[{type:0,value:"Open Coinbase Wallet on your phone to confirm this transaction."}]},resendNotificationHelperText:{id:"ZxCo5e",defaultMessage:[{type:0,value:"Don't see the notification?"}]},stillNotSeeingYourNotificationHelperText:{id:"Gdu4kE",defaultMessage:[{type:0,value:"Still don't see the notification? "},{type:1,value:"reconnectWallet"}]},reconnectWallet:{id:"s6u5ob",defaultMessage:[{type:0,value:"Reconnect your wallet"}]},retry:{id:"td35SU",defaultMessage:[{type:0,value:"Resend notification"}]}}),D=(0,r.memo)(P((function(){var e=(0,a.A)().formatMessage,t=(0,f.lE)(m.Im),n=t.goBack,o=t.goToStep,i=(0,g.A)(m.Zd),h=i.wallet,C=i.unsignedTx,k=i.txSigningError,L=i.signedTx,I=B((0,r.useState)(0),2),w=I[0],T=I[1],M=(0,r.useContext)(b.g).signOut,S=(0,l.g)(),_=S.contractAddress,A=S.tokenId,j=S.chainId,H=(0,r.useMemo)((function(){return{contractAddress:_,tokenId:A,chainId:j}}),[_,A,j]);if((0,s.B_)(H),null==h||!h.value)throw new Error("CollectibleBuyListingPhoneConfirmation: Wallet does not exist");if(!C.value)throw new Error("CollectibleBuyListingPhoneConfirmation: unsignedTx does not exist");var P=(0,r.useCallback)((function(e){(0,s.Pj)(),L.onChange(e),o("collectibleBuyListingStatus")}),[o,L]),D=(0,r.useCallback)((function(e){e.name===c.c.userRejectedWalletLinkRequest.name?(0,s.wQ)():(0,s.hj)(),k.onChange(e),o("collectibleBuyListingStatus")}),[k,o]),O=(0,r.useCallback)((function(){M()}),[M]),N=(0,y.$)({wallet:h.value,unsignedTx:C.value,onSuccess:P,onError:D}),F=N.signAndSubmitViaWalletlink,U=N.isUserCancelled,W=(0,r.useCallback)(E(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,s.BF)(H),T((function(e){return e+1})),e.next=4,F();case 4:case"end":return e.stop()}}),e)}))),[H,F]);(0,u.y)((function(){F()}));var R=(0,r.useMemo)((function(){return{label:e(G.retry),onClick:(t=E(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U.current=!0,e.next=3,W();case 3:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})};var t}),[e,U,W]),z=(0,r.useMemo)((function(){return e(G.stillNotSeeingYourNotificationHelperText,{reconnectWallet:(0,v.jsx)(p.N,{font:"label1",color:"fgMuted",onClick:O,as:"button",children:e(G.reconnectWallet)})})}),[e,O]),V=(0,r.useCallback)((function(){U.current=!0,n()}),[n,U]);return(0,v.jsx)(d._,{title:e(G.confirmOnPhone),description:e(G.confirmOnPhoneDescription),retryAction:R,secondaryActionLabel:e(G.resendNotificationHelperText),reconnectLabel:w>=4?z:void 0,onDismiss:V})}),"useIntl{{ formatMessage }}\nuseStepper{{ goBack, goToStep }}\nuseFields{{ wallet, unsignedTx, txSigningError, signedTx }}\nuseState{[sendRetryCount, setSendRetryCount](0)}\nuseContext{{ signOut }}\nuseParams{{ contractAddress, tokenId, chainId }}\nuseMemo{analyticsData}\nuseLogCollectibleListingPhoneConfirmationViewed{}\nuseCallback{onSuccess}\nuseCallback{onError}\nuseCallback{onSignOut}\nuseSignAndSubmitViaWalletlink{{ signAndSubmitViaWalletlink, isUserCancelled }}\nuseCallback{retryAction}\nuseOnMount{}\nuseMemo{retryActionProps}\nuseMemo{reconnectLabel}\nuseCallback{handleDismiss}",(function(){return[a.A,f.lE,g.A,l.g,s.B_,y.$,u.y]})));(j="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(j.register(G,"messages","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleBuyListingPhoneConfirmation/CollectibleBuyListingPhoneConfirmation.tsx"),j.register(D,"CollectibleBuyListingPhoneConfirmation","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleBuyListingPhoneConfirmation/CollectibleBuyListingPhoneConfirmation.tsx")),(H="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&H(e)},25655:(e,t,n)=>{n.d(t,{L:()=>T});var o,r=n(14041),i=n(32183),a=n(8867),l=n(86090),s=n(23291),c=n(4244),u=n(87432),d=n(52617),f=n(33396),g=n(37121),p=n(60149),b=n(97541),m=n(98883),y=n(41690),v=n(31085);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function C(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=h(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e=n.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);var k,L,I="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},w=(0,i.YK)({title:{id:"Py41Hm",defaultMessage:[{type:0,value:"Your purchase is in progress"}]},failureTitle:{id:"m2ulu0",defaultMessage:[{type:0,value:"Something went wrong"}]},failureDescriptionUnknownError:{id:"5FdjQq",defaultMessage:[{type:0,value:"Please try again later."}]},goBack:{id:"H5+jZp",defaultMessage:[{type:0,value:"Go back"}]},done:{id:"6qlzBr",defaultMessage:[{type:0,value:"Done"}]},viewTranaction:{id:"G3i41f",defaultMessage:[{type:0,value:"View transaction"}]},description:{id:"jUgCi8",defaultMessage:[{type:0,value:"You paid "},{type:1,value:"eth"},{type:0,value:" to buy "},{type:1,value:"nftName"},{type:0,value:". No need to wait, we'll let you know when it's complete."}]}});function T(){var e=(0,a.A)().formatMessage,t=(0,l.W6)().push,n=(0,g.A)(m.Zd),o=n.unsignedTx,i=n.signedTx,h=n.txSigningError,k=n.collectible,L=n.wallet,I=(0,f.lE)(m.Im).goToStep,T=(0,l.g)(),M=T.contractAddress,S=T.tokenId,_=T.chainId,E=(0,r.useMemo)((function(){return{contractAddress:M,tokenId:S,chainId:_}}),[M,S,_]),B=(0,c.J9)().formatToCrypto,A=(0,r.useMemo)((function(){return i.value?d.n.SUCCESS:d.n.FAILURE}),[i.value]);(0,u.y)((function(){A===d.n.SUCCESS?(0,s.Uz)(E):(0,s.V2)(E)}));var j=(0,r.useCallback)((function(){(0,s.hm)(E),t(y.Q.TRANSACTIONS)}),[E,t]),H=(0,r.useCallback)((function(){(0,s.Q)(E),I("collectibleListingDetail")}),[E,I]),P=(0,r.useCallback)((function(){(0,s.FP)(E),I("collectibleListingDetail")}),[E,I]),G=(0,r.useMemo)((function(){return{key:"done",children:e(w.done),variant:"primary",onClick:H,testID:"buy-listing-success-done-btn"}}),[e,H]),D=(0,r.useMemo)((function(){return{key:"view-transaction",children:e(w.viewTranaction),variant:"secondary",onClick:j,testID:"buy-listing-view-transaction-btn"}}),[e,j]),O=(0,r.useMemo)((function(){return{key:"go-back",children:e(w.goBack),variant:"primary",onClick:P,testID:"buy-listing-failure-go-back-btn"}}),[e,P]),N=(0,r.useMemo)((function(){return B({currencyCode:L.value.currencyCode,decimals:L.value.decimals,value:o.value.transferValue,overridePrivacy:!0})}),[L.value,o.value,B]),F=(0,r.useMemo)((function(){var t,n;return A===d.n.SUCCESS?{status:A,title:(0,v.jsx)(p.f,{as:"span",children:e(w.title)}),description:(0,v.jsx)(b.K,{as:"label",color:"fgMuted",children:e(w.description,{eth:N,nftName:null===(n=k.value)||void 0===n?void 0:n.name})}),primaryButtonProps:G,secondaryButtonProps:D}:{status:A,title:(0,v.jsx)(p.f,{as:"span",children:e(w.failureTitle)}),description:(0,v.jsx)(b.K,{as:"label",color:"fgMuted",children:(null===(t=h.value)||void 0===t?void 0:t.message)||e(w.failureDescriptionUnknownError)}),primaryButtonProps:O}}),[G,D,O,e,A,k.value,h.value,N]);return(0,v.jsx)(d.x,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},F))}I(T,"useIntl{{ formatMessage }}\nuseHistory{{ push }}\nuseFields{{\n    unsignedTx: unsignedTxField,\n    signedTx: signedTxField,\n    txSigningError: txSigningErrorField,\n    collectible: collectibleField,\n    wallet: walletField,\n  }}\nuseStepper{{ goToStep }}\nuseParams{{ contractAddress, tokenId, chainId }}\nuseMemo{analyticsData}\nuseCurrencyFormatter{{ formatToCrypto }}\nuseMemo{status}\nuseOnMount{}\nuseCallback{handleViewTransaction}\nuseCallback{handleDone}\nuseCallback{handleBack}\nuseMemo{doneButton}\nuseMemo{viewTransactionButton}\nuseMemo{goBackButton}\nuseMemo{currencyAmountDisplay}\nuseMemo{transactionStatusProps}",(function(){return[a.A,l.W6,g.A,f.lE,l.g,c.J9,u.y]})),(k="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(k.register(w,"messages","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleBuyListingStatus/CollectibleBuyListingStatus.tsx"),k.register(T,"CollectibleBuyListingStatus","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleBuyListingStatus/CollectibleBuyListingStatus.tsx")),(L="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&L(e)},87745:(e,t,n)=>{n.d(t,{C:()=>z});var o=n(14041),r=n(32183),i=n(8867),a=n(86090),l=n(23291),s=n(87432),c=n(59659),u=n(63753);const d=(0,r.YK)({saleEndsIn:{id:"i+qIah",defaultMessage:"Sale ends in {time}"},saleEndsOn:{id:"Oizkka",defaultMessage:"Sale ends on {date}"}});function f(e){const{formatMessage:t}=(0,i.A)(),{value:n,type:o}=(0,u._)(e?.expirationTime);return o===u.d.TIME?{message:t(d.saleEndsIn,{time:n}),type:o}:n?{message:t(d.saleEndsOn,{date:n}),type:o}:{message:"",type:o}}var g=n(98053),p=n(5264);function b({contractAddress:e,tokenId:t,chainId:n,walletAddress:o,orderId:r=""}){return(0,g.I)([p.mC,e,t,n,o],(async()=>(0,p.QT)({contractAddress:e,tokenId:t,chainId:n,walletAddress:o,orderId:r})),{suspense:!1,useErrorBoundary:!1,staleTime:0,refetchInterval:!1,notifyOnChangeProps:["data"],retry:!1})}var m=n(27141),y=n(7124);function v({contractAddress:e,tokenId:t,chainId:n,wallet:r,orderId:i="",platformName:a}){const[s,c]=(0,o.useState)(!1),u=(0,o.useCallback)((e=>{e?.message?.includes("Balance too low")?(0,l.Ul)():(0,l.pT)(),c(!1)}),[]),d=(0,o.useCallback)((()=>{(0,l.rh)(),c(!1)}),[]),f=(0,o.useCallback)((()=>{(0,l.Un)(),c(!1)}),[]),{data:b,refetch:v,error:h}=function({contractAddress:e,tokenId:t,chainId:n,walletAddress:o,orderId:r,suspense:i=!0,enabled:a=!0,onSuccess:l,onError:s}){return(0,g.I)([p.IC,e,t,n,o,r,i],(async()=>(0,p.KC)({contractAddress:e,tokenId:t,chainId:n,walletAddress:o,orderId:r})),{suspense:i,useErrorBoundary:!1,staleTime:0,refetchInterval:!1,notifyOnChangeProps:["data"],retry:!1,cacheTime:0,enabled:a,onSuccess:l,onError:s})}({contractAddress:e,tokenId:t,chainId:n,walletAddress:r.primaryAddress,orderId:i,enabled:!1,onSuccess:l.cE,onError:u,suspense:!1}),x=(0,o.useMemo)((()=>{if(b)return b.steps[0].executables.map((({transaction:e})=>e))}),[b]),{txs:C,error:k}=(0,y.t)({wallet:r,transactions:x,platformName:a,txTokenAddress:m.DX,chainId:n,flow:"nftBuyListing",onGenerateUnsignedTransactionSuccess:d,onGenerateUnsignedTransactionError:f}),L=(0,o.useCallback)((function(){v(),c(!0)}),[v]);return(0,o.useMemo)((()=>({fetchBuyListingData:L,isFetching:s,txs:C,error:h??k})),[L,s,C,h,k])}var h,x=n(95516),C=n(77365),k=n(72002),L=n(57321),I=n(70918),w=n(57822),T=n(32451),M=n(4681),S=n(4118),_=n(33396),E=n(37121),B=n(98883),A=n(29589),j=n(16510),H=n(77448),P=n(17677),G=n(31085);e=n.hmd(e),(h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&h(e);var D,O,N="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},F=(0,r.YK)({buy:{id:"PTqFaz",defaultMessage:[{type:0,value:"Buy"}]},buyInProgress:{id:"kd0nu/",defaultMessage:[{type:0,value:"Buy in progress"}]}}),U=["reservoir"],W=(0,o.memo)(N((function(e){var t=e.collectible,n=e.listingDetails,r=e.wallet,a=e.chainId,u=e.offchainOrderId,d=void 0===u?"":u,g=(0,i.A)().formatMessage,p=(0,E.A)(B.Zd),b=p.unsignedTx.onChange,m=p.signedTx.value,y=p.wallet.onChange,h=p.collectible.onChange,x=p.platformDomain.onChange,C=(0,_.lE)(B.Im).goToStep,k=(0,c.f)(),I=(0,o.useMemo)((function(){return{contractAddress:t.contractAddress,tokenId:t.tokenId,chainId:a}}),[t,a]);(0,l.P5)(I);var w=(0,S.z)(T.fO.nft_listing_detail,T.H5.load_collectible_listing_detail,{logMetric:!0}).end,M=(0,S.z)(T.fO.nft_listing_detail,T.H5.load_collectible_listing_confirmation,{logMetric:!0}).start;(0,s.y)((function(){w()})),(0,o.useEffect)((function(){y(r)}),[y,r]);var j=f(n),D=(0,o.useMemo)((function(){return n.orderPrice||n.bestAskPrice}),[n]),O=D.platformDomain,N=D.platform,W=D.listingPrice,R=(0,o.useCallback)((function(e){var t;null!=e&&null!==(t=e.message)&&void 0!==t&&t.includes("Balance too low")?C("collectibleBuyListingInsufficientFunds"):k(e)}),[C,k]),z=v({contractAddress:t.contractAddress,tokenId:t.tokenId,chainId:a,wallet:r,orderId:d,platformName:N}),V=z.fetchBuyListingData,X=z.isFetching,K=z.txs,Y=z.error,$=(0,o.useCallback)((function(){(0,l.fS)(I),M(),V()}),[I,M,V]);(0,o.useEffect)((function(){if(Y||void 0===K)R(Y);else if(0!==K.length){var e=K[0];b(e),h(t),x(O),C("collectibleBuyListingConfirmation")}}),[K,b,h,x,C,t,Y,O,k,R]);var Z=(0,o.useMemo)((function(){return!U.includes(N.toLowerCase())}),[N]),q=(0,o.useMemo)((function(){return(null==m?void 0:m.state)===L.W.PENDING?g(F.buyInProgress):g(F.buy)}),[g,m]);return(0,G.jsx)(A.CollectibleDetailCommerceContent,{address:t.contractAddress,tokenId:t.tokenId,chainId:a,tokenCount:"",includeOffers:!1,from:"Listing",listingAmounts:(0,G.jsx)(H.q,{listingPrice:W}),actionBar:Z?(0,G.jsx)(P.I,{loading:X,disabled:(null==m?void 0:m.state)===L.W.PENDING,buttonText:q,onBuyPress:$,expirationTimeMessage:j.message,platform:N,platformDomain:O,bestPricePlatform:n.bestAskPrice.platform}):(0,G.jsx)(G.Fragment,{}),showNavbarExternalLinks:!0})}),"useIntl{{ formatMessage }}\nuseFields{{\n    unsignedTx: { onChange: unsignedTxOnChange },\n    signedTx: { value: signedTx },\n    wallet: { onChange: walletOnChange },\n    collectible: { onChange: collectibleOnChange },\n    platformDomain: { onChange: platformDomainOnChange },\n  }}\nuseStepper{{ goToStep }}\nuseRethrowError{rethrowError}\nuseMemo{analyticsData}\nuseLogCollectibleListingDetailViewed{}\nuseExtensionPerfMark{{ end: endLoadListingDetailPerfMark }}\nuseExtensionPerfMark{{ start: startLoadListingConfirmationPerfMark }}\nuseOnMount{}\nuseEffect{}\nuseCollectibleListingExpirationDateTime{expirationTime}\nuseMemo{{\n    platformDomain,\n    platform: platformName,\n    listingPrice,\n  }}\nuseCallback{handleGenerateListingError}\nuseGenerateCollectibleListingTransaction{{\n    fetchBuyListingData,\n    isFetching,\n    txs,\n    error: generateListingTxError,\n  }}\nuseCallback{handleBuyPress}\nuseEffect{}\nuseMemo{isBuyEnabledForMarketplace}\nuseMemo{buttonText}",(function(){return[i.A,E.A,_.lE,c.f,l.P5,S.z,S.z,s.y,f,v]}))),R=(0,o.memo)(N((function(){var e=(0,a.g)(),t=e.contractAddress,n=e.tokenId,r=e.chainId,i=e.offchainOrderId,l=(0,I.h)(),s=(0,w.e)(l),c=(0,o.useMemo)((function(){return(0,k.JT)(s,r)}),[s,r]);if(void 0===c)throw new Error("no wallet available");var u=(0,x.Q)(),d=(0,C.X)({contractAddress:t,tokenId:n,chainId:r,includeFloorPrice:u,suspense:!1,userAddress:c.primaryAddress}),f=d.data,g=d.isLoading,p=b({contractAddress:t,tokenId:n,chainId:r,walletAddress:c.primaryAddress,orderId:i}),m=p.data,y=p.isLoading;if(g||y)return(0,G.jsx)(j.Y,{renderBlockButton:!0});if(!f)throw new Error("Unable to find collectible listing token");if(!m)throw new Error("Unable to fetch listing. Listing may be expired or deleted.");return(0,G.jsx)(W,{collectible:f,listingDetails:m,wallet:c,chainId:r,offchainOrderId:i})}),"useParams{{ contractAddress, tokenId, chainId, offchainOrderId }}\nuseActiveWalletGroupId{activeWalletGroupId}\nuseWalletsForWalletGroupId{wallets}\nuseMemo{nftWallet}\nuseIsNFTFloorPriceEnabled{useFloorPrice}\nuseTokenDetails{{ data: collectible, isLoading: isTokenDetailsLoading }}\nuseCollectibleMarketplaceListingDetails{{ data: listingDetails, isLoading: isMarketplaceListingDetailsLoading }}",(function(){return[a.g,I.h,w.e,x.Q,C.X,b]}))),z=(0,o.memo)((function(){return(0,G.jsx)(M.ff,{children:(0,G.jsx)(R,{})})}));(D="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(D.register(F,"messages","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleListingDetail/CollectibleListingDetail.tsx"),D.register(U,"DISABLED_BUY_LISTING_MARKETPLACES","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleListingDetail/CollectibleListingDetail.tsx"),D.register(W,"CollectibleListingDetailContent","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleListingDetail/CollectibleListingDetail.tsx"),D.register(R,"CollectibleListingDetail","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleListingDetail/CollectibleListingDetail.tsx"),D.register(z,"CollectibleListingDetailWrapper","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleListingDetail/CollectibleListingDetail.tsx")),(O="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&O(e)},66491:(e,t,n)=>{n.d(t,{U:()=>g});var o,r=n(32183),i=n(8867),a=n(97541),l=n(57596),s=n(31085);e=n.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);var c,u,d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},f=(0,r.YK)({errorMessage:{id:"apx9R5",defaultMessage:[{type:1,value:"Error"},{type:0,value:"Please check back later."}]},goBackHome:{id:"pHyRag",defaultMessage:[{type:0,value:"Go back home"}]}});function g(e){var t=e.error,n=(0,i.A)().formatMessage,o="";return null!=t&&t.message&&null!=t&&t.message.endsWith(". ")?o=null==t?void 0:t.message:null!=t&&t.message&&(o="".concat(null==t?void 0:t.message,". ")),(0,s.jsx)(l.ErrorFallback,{shouldShowEscapeHatch:!1,errorDetails:(0,s.jsx)(a.K,{as:"p",textAlign:"center",paddingTop:2,children:n(f.errorMessage,{Error:o})}),primaryButtonText:n(f.goBackHome)})}d(g,"useIntl{{ formatMessage }}",(function(){return[i.A]})),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(c.register(f,"messages","/workspaces/apps/extension/src/screens/ErrorFallback/ErrorFallbackWithContext.tsx"),c.register(g,"ErrorFallbackWithContext","/workspaces/apps/extension/src/screens/ErrorFallback/ErrorFallbackWithContext.tsx")),(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&u(e)},77448:(e,t,n)=>{n.d(t,{q:()=>L});var o=n(14041),r=n(96295),i=n(4244),a=n(27301),l=n(52689),s=n(2845),c=n(99172);const u=4n;function d({ethDisplayDecimals:e=u,isFiatAbbreviated:t=!0}){const{formatToCrypto:n,formatToFiat:d}=(0,i.J9)();return(0,o.useCallback)((function(o){return{[s.n2.ETH]:n({currencyCode:l.j.ETH,decimals:r.Kp,value:BigInt(o),maxDisplayDecimals:e,includeCode:!1,overridePrivacy:!0}),[s.n2.USD]:d({fromCurrencyCode:l.j.ETH,decimals:r.Kp,value:BigInt(o),isAbbreviated:t,contractAddress:"",network:c.lg.fromChainId({chainPrefix:r.RC,chainId:1n}),blockchain:new a.J(r.fz),includeCode:!0,formatZeroBalance:!1,overridePrivacy:!0})}}),[n,d,e,t])}var f,g=n(2673),p=n(84492),b=n(15654),m=n(44659),y=n(67209),v=n(93571),h=n(31085);e=n.hmd(e),(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&f(e);var x,C,k="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},L=(0,o.memo)(k((function(e){var t=e.listingPrice,n=d({ethDisplayDecimals:4n,isFiatAbbreviated:!1}),r=(0,o.useMemo)((function(){var e;return(0,h.jsxs)(p.z,{alignItems:"center",children:[(0,h.jsx)(g.In,{size:"s",name:"ethereum",color:"fg",paddingEnd:.5}),(0,h.jsx)(m.f,{testID:"collectible-listing-eth-price",as:"p",children:null!==(e=n(t)[s.n2.ETH])&&void 0!==e?e:v.rg})]})}),[t,n]),i=(0,o.useMemo)((function(){var e;return(0,h.jsx)(y.V,{testID:"collectible-listing-usd-price",as:"div",children:null!==(e="".concat(n(t)[s.n2.USD]))&&void 0!==e?e:v.rg})}),[t,n]);return(0,h.jsx)(p.z,{justifyContent:"space-between",paddingX:3,paddingTop:2,testID:"collectible-listing-section",children:(0,h.jsx)(b.T,{alignItems:"flex-start",children:(0,h.jsxs)(h.Fragment,{children:[r,i]})})})}),"useGetListingPrice{getListingPrice}\nuseMemo{cryptoAmount}\nuseMemo{usdAmount}",(function(){return[d]})));(x="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&x.register(L,"CollectibleBuyListingAmounts","/workspaces/apps/extension/src/screens/Explore/components/CollectibleBuyListingAmounts/CollectibleBuyListingAmounts.tsx"),(C="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&C(e)},17677:(e,t,n)=>{n.d(t,{I:()=>k});var o,r=n(14041),i=n(32183),a=n(8867),l=n(72002),s=n(85581),c=n(2673),u=n(15654),d=n(84492),f=n(59600),g=n(86382),p=n(94330),b=n(93952),m=n(31085);e=n.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);var y,v,h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},x="16px",C=(0,i.YK)({bestPriceLabel:{id:"6S3s5y",defaultMessage:[{type:0,value:"Best price"}]},bestPriceTooltip:{id:"S0rT0i",defaultMessage:[{type:0,value:"Best price sourced from "},{type:1,value:"platformDomain"},{type:0,value:". We scan multiple marketplaces to find the lowest sale price for this item."}]}}),k=(0,r.memo)(h((function(e){var t=e.loading,n=e.disabled,o=e.buttonText,i=e.onBuyPress,y=e.expirationTimeMessage,v=e.platform,h=e.platformDomain,k=e.bestPricePlatform,L=(0,a.A)().formatMessage,I=(0,r.useMemo)((function(){return(0,l.t1)({platform:v})}),[v]),w=(0,r.useMemo)((function(){return(0,l.t1)({platform:k})}),[k]),T=(0,r.useMemo)((function(){return I===w}),[I,w]),M=(0,r.useMemo)((function(){return(0,b.D)(I)}),[I]);return(0,m.jsxs)(u.T,{padding:2,gap:1,children:[(0,m.jsx)(s.$n,{testID:"nft-native-buy-button",onClick:i,loading:t,disabled:n,children:(0,m.jsx)(d.z,{gap:1,alignItems:"center",children:o})}),(0,m.jsxs)(d.z,{gap:3,children:[y?(0,m.jsxs)(d.z,{alignItems:"center",gap:1,children:[(0,m.jsx)(c.In,{size:"xs",name:"clock",color:"fg"}),(0,m.jsx)(p.C,{as:"p",children:y})]}):null,(0,m.jsxs)(d.z,{alignItems:"center",gap:1,children:[(0,m.jsx)(f.W,{width:x,height:x,alt:"platform",source:M,shape:"squircle"}),T?(0,m.jsx)(p.C,{as:"p",children:L(C.bestPriceLabel)}):I,T?(0,m.jsx)(g.m,{gap:0,content:L(C.bestPriceTooltip,{platformDomain:h}),placement:"bottom",children:(0,m.jsx)(c.In,{size:"xs",name:"info",color:"fg",testID:"collectible-listing-actions-info-icon"})}):null]})]})]})}),"useIntl{{ formatMessage }}\nuseMemo{platformName}\nuseMemo{bestPricePlatformName}\nuseMemo{isBestPrice}\nuseMemo{platformIcon}",(function(){return[a.A]})));(y="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(y.register(x,"ICON_SIZE","/workspaces/apps/extension/src/screens/Explore/components/CollectibleListingActions/CollectibleListingActions.tsx"),y.register(C,"messages","/workspaces/apps/extension/src/screens/Explore/components/CollectibleListingActions/CollectibleListingActions.tsx"),y.register(k,"CollectibleListingActions","/workspaces/apps/extension/src/screens/Explore/components/CollectibleListingActions/CollectibleListingActions.tsx")),(v="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&v(e)},98883:(e,t,n)=>{n.d(t,{Im:()=>i,LX:()=>a,Zd:()=>l});var o=n(33396),r=n(40019);const i=(0,o.KT)({steps:["collectibleListingDetail","collectibleBuyListingInsufficientFunds","collectibleBuyListingConfirmation","collectibleBuyListingPhoneConfirmation","collectibleBuyListingStatus"],defaultStep:"collectibleListingDetail"}),a={unsignedTx:void 0,signedTx:void 0,txSigningError:void 0,collectible:void 0,wallet:void 0,platformDomain:void 0},l=(0,r.A)({initialValues:a})},23291:(e,t,n)=>{n.d(t,{BF:()=>p,B_:()=>g,Ct:()=>M,Eo:()=>C,FP:()=>v,Fc:()=>s,J6:()=>l,OV:()=>c,P5:()=>i,Pj:()=>L,Q:()=>y,Rr:()=>f,Ul:()=>B,Un:()=>_,Uz:()=>b,V2:()=>m,Vm:()=>T,cE:()=>E,ec:()=>k,fS:()=>a,hj:()=>w,hm:()=>h,j7:()=>u,op:()=>x,pT:()=>A,rh:()=>S,vH:()=>d,wQ:()=>I});var o=n(34767),r=n(55452);function i(e){(0,r.cp)("buy_nft_listing.listing_detail.viewed",{loggingId:"534e2621-aed0-4b69-a3d0-bc19b97ad51f",action:o.X2.view,componentType:o.I5.page,...e})}function a(e){(0,r.Np)("buy_nft_listing.listing_detail.buy.clicked",{loggingId:"6bdea0a7-220b-440c-8285-1fff2aa9c949",action:o.X2.click,componentType:o.I5.button,...e})}function l(e){(0,r.cp)("buy_nft_listing.insufficient_funds.viewed",{loggingId:"2154ad11-bba2-427c-ab5b-371b4b294125",action:o.X2.view,componentType:o.I5.page,...e})}function s(e){(0,r.Np)("buy_nft_listing.insufficient_funds.buy.clicked",{loggingId:"2154ad11-bba2-427c-ab5b-371b4b294125",action:o.X2.click,componentType:o.I5.button,...e})}function c(e){(0,r.Np)("buy_nft_listing.insufficient_funds.receive.clicked",{loggingId:"2154ad11-bba2-427c-ab5b-371b4b294125",action:o.X2.click,componentType:o.I5.button,...e})}function u(e){(0,r.cp)("buy_nft_listing.confirmation_detail.viewed",{loggingId:"da8dd111-3eee-4264-8950-f1bc30efe471",action:o.X2.view,componentType:o.I5.page,...e})}function d(e){(0,r.Np)("buy_nft_listing.confirmation.cancel.clicked",{loggingId:"37678dc2-113d-4fd0-8dc6-d0611dbdf37f",action:o.X2.click,componentType:o.I5.button,...e})}function f(e){(0,r.Np)("buy_nft_listing.confirmation.confirm.clicked",{loggingId:"12791a43-8859-4451-8b2b-10f1f44ec388",action:o.X2.click,componentType:o.I5.button,...e})}function g(e){(0,r.cp)("buy_nft_listing.phone_confirmation.viewed",{loggingId:"37f420b3-c5c4-4c16-a8cc-7e9805c7cc54",action:o.X2.view,componentType:o.I5.page,...e})}function p(e){(0,r.Np)("buy_nft_listing.phone_confirmation.retry.clicked",{loggingId:"08cf6906-93e8-4f91-86eb-db1f3f4fe817",action:o.X2.click,componentType:o.I5.button,...e})}function b(e){(0,r.Np)("buy_nft_listing.status.success.viewed",{loggingId:"43bdbe37-eb25-45a3-92e6-6483861da1e7",action:o.X2.view,componentType:o.I5.page,...e})}function m(e){(0,r.Np)("buy_nft_listing.status.error.viewed",{loggingId:"e6d91d50-0575-46e8-96e7-dba814e6191b",action:o.X2.view,componentType:o.I5.page,...e})}function y(e){(0,r.Np)("buy_nft_listing.status.done.clicked",{loggingId:"c93cf96c-e4cd-4665-8569-81adc21b9021",action:o.X2.click,componentType:o.I5.button,...e})}function v(e){(0,r.Np)("buy_nft_listing.status.back.clicked",{loggingId:"309d28a0-e061-4e48-b003-329e57656bcf",action:o.X2.click,componentType:o.I5.button,...e})}function h(e){(0,r.Np)("buy_nft_listing.status.view_transaction.clicked",{loggingId:"d4091d5b-70fe-4db7-99a3-ff50d1704fa9",action:o.X2.click,componentType:o.I5.button,...e})}function x({errorHash:e,errorMessage:t}){(0,r.$s)("collectible_buy_listing.full_screen_error.viewed",{errorHash:e,errorMessage:t,loggingId:"9be24857-d288-49f6-9748-d2cc77dd9889",action:o.X2.view,componentType:o.I5.page})}function C(){(0,r.N8)({metricName:"buy_nft_listing.confirm_standalone",metricType:o.vj.count,value:1})}function k(){(0,r.N8)({metricName:"buy_nft_listing.error_standalone",metricType:o.vj.count,value:1})}function L(){(0,r.N8)({metricName:"buy_nft_listing.phone_confirmation.mobile_approve",metricType:o.vj.count,value:1})}function I(){(0,r.N8)({metricName:"buy_nft_listing.phone_confirmation.mobile_cancel",metricType:o.vj.count,value:1})}function w(){(0,r.N8)({metricName:"buy_nft_listing.phone_confirmation.wallet_link_error",metricType:o.vj.count,value:1})}function T(){(0,r.N8)({metricName:"buy_nft_listing.confirm_ledger",metricType:o.vj.count,value:1})}function M(){(0,r.N8)({metricName:"buy_nft_listing.error_ledger",metricType:o.vj.count,value:1})}function S(){(0,r.N8)({metricName:"buy_nft_listing.generate_unsigned_tx_success",metricType:o.vj.count,value:1})}function _(){(0,r.N8)({metricName:"buy_nft_listing.generate_unsigned_tx_failure",metricType:o.vj.count,value:1})}function E(){(0,r.N8)({metricName:"buy_nft_listing.fetch_buy_tx_data_success",metricType:o.vj.count,value:1})}function B(){(0,r.N8)({metricName:"buy_nft_listing.fetch_buy_tx_data_insufficient_funds",metricType:o.vj.count,value:1})}function A(){(0,r.N8)({metricName:"buy_nft_listing.fetch_buy_tx_data_error",metricType:o.vj.count,value:1})}},59659:(e,t,n)=>{n.d(t,{f:()=>r});var o=n(14041);function r(){const[e,t]=(0,o.useState)(null);return(0,o.useEffect)((function(){if(e)throw e}),[e]),t}},36760:(e,t,n)=>{n.d(t,{j:()=>i});var o=n(14041),r=n(46122);function i(e){return(0,o.useMemo)((()=>!!e&&(0,r.US)(e.network)),[e])}},72707:(e,t,n)=>{n.d(t,{b:()=>r});var o=n(52845);const r=async(e,{hash:t})=>{const n=[t],r=await e.request({method:"eth_getUserOperationReceipt",params:n});if(!r)return null;return{userOpHash:r.userOpHash,sender:r.sender,nonce:BigInt(r.nonce),actualGasUsed:BigInt(r.actualGasUsed),actualGasCost:BigInt(r.actualGasCost),success:r.success,receipt:{transactionHash:r.receipt.transactionHash,transactionIndex:BigInt(r.receipt.transactionIndex),blockHash:r.receipt.blockHash,blockNumber:BigInt(r.receipt.blockNumber),from:r.receipt.from,to:r.receipt.to,cumulativeGasUsed:BigInt(r.receipt.cumulativeGasUsed),status:o.$[r.receipt.status],gasUsed:BigInt(r.receipt.gasUsed),contractAddress:r.receipt.contractAddress,logsBloom:r.receipt.logsBloom,effectiveGasPrice:BigInt(r.receipt.effectiveGasPrice)},logs:r.logs.map((e=>({data:e.data,blockNumber:BigInt(e.blockNumber),blockHash:e.blockHash,transactionHash:e.transactionHash,logIndex:BigInt(e.logIndex),transactionIndex:BigInt(e.transactionIndex),address:e.address,topics:e.topics})))}}}}]);
//# sourceMappingURL=1396.js.map