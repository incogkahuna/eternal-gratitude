try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="34af62c1-d918-4ac9-8d23-989bc7e29367",e._sentryDebugIdIdentifier="sentry-dbid-34af62c1-d918-4ac9-8d23-989bc7e29367")}()}catch(e){}!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"3.133.0-398e03"}}catch(e){}}(),(self.webpackChunkcb_wallet_extension=self.webpackChunkcb_wallet_extension||[]).push([[9966],{21413:(e,n,t)=>{t.d(n,{_:()=>I});var r,a=t(14041),s=t(32183),i=t(8867),o=t(55452),c=t(24905),d=t(59706),l=t(85581),u=t(98139),g=t(15654),f=t(60149),m=t(97541),h=t(94330),p=t(34767),b=t(21983),w=t(31085);e=t.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);var x,y,A="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},T=(0,s.YK)({walletNoificationsText:{id:"/znRZQ",defaultMessage:[{type:0,value:"Wallet Notification Miami Image"}]}});function I(e){var n=e.title,t=e.description,r=e.retryAction,s=e.secondaryActionLabel,x=e.reconnectLabel,y=e.height,A=void 0===y?c.pA:y,I=e.onDismiss,k=r.onClick,G=r.label,P=(0,i.A)().formatMessage,S=(0,a.useCallback)((function(){(0,o.$s)("send_resend_transaction",{action:p.X2.click,componentType:p.I5.page,loggingId:"4f301266-e81e-4b25-929f-e074cc93e715"}),k()}),[k]);return(0,w.jsxs)(g.T,{height:A,paddingTop:1,children:[(0,w.jsx)(b.u,{onBack:I}),(0,w.jsxs)(g.T,{flexGrow:1,justifyContent:"space-between",padding:2,children:[(0,w.jsxs)(g.T,{alignItems:"center",children:[(0,w.jsx)(d.t,{illustration:"WalletNotificationsMiami",alt:P(T.walletNoificationsText),scaleMultiplier:.6,children:(0,w.jsx)(u.K,{name:"walletNotifications",scaleMultiplier:.6})}),(0,w.jsx)(f.f,{testID:"phone-confirmation-title",as:"h1",textAlign:"center",paddingBottom:2,paddingTop:3,children:n}),(0,w.jsx)(m.K,{testID:"phone-confirmation-description",as:"p",color:"fgMuted",textAlign:"center",children:t})]}),(0,w.jsxs)(g.T,{alignItems:"center",children:[(0,w.jsx)(m.K,{testID:"phone-confirmation-secondary-label",as:"p",color:"fgMuted",paddingY:2,children:s}),(0,w.jsx)(l.$n,{block:!0,testID:"phone-confirmation-retry-button",variant:"secondary",onClick:S,children:G})]}),x?(0,w.jsx)(g.T,{alignItems:"center",paddingTop:2,children:(0,w.jsx)(h.C,{testID:"phone-confirmation-reconnect-label",as:"p",textAlign:"center",color:"fgMuted",children:x})}):null]})]})}A(I,"useIntl{{ formatMessage }}\nuseCallback{handleRetry}",(function(){return[i.A]})),(x="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(x.register(T,"messages","/workspaces/libs/wallet-cds-extension/components/PhoneConfirmation.tsx"),x.register(I,"PhoneConfirmation","/workspaces/libs/wallet-cds-extension/components/PhoneConfirmation.tsx")),(y="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&y(e)},12671:(e,n,t)=>{function r(e){return e.toString(10)}t.d(n,{i:()=>r})},22202:(e,n,t)=>{t.d(n,{b:()=>G});var r=t(14041),a=t(84213),s=t(79637),i=t(46122),o=t(96295),c=t(29740),d=t(26182);var l=t(52303),u=t(63408),g=t(10395),f=t(29039),m=t(49143),h=t(61148),p=t(62207),b=t(12671);async function w(e,n,t){let r;try{r=await e}catch(e){const n=e;if("string"==typeof n.message&&n.message.match(/(denied|rejected)/i))throw d.c.userRejectedWalletLinkRequest;throw n}const a="result"in r?r.result:void 0,s=r.method,i=a.startsWith("{")&&"generic"===s?JSON.parse(a):void 0,o=a.startsWith("{")||"generic"===s?void 0:a;if("generic"===s){if(i.gasPrice)return async function(e,n,t){const r=await m.oT.createSubmittedTx(e,n.txHash,void 0,t,"original");return r}(t,i,n);if(i.maxFeePerGas)return async function(e,n,t){const r=await m.oT.createSubmittedTx(e,n.txHash,void 0,t,"original"),{gasLimit:a,maxPriorityFeePerGas:s,maxFeePerGas:i,baseFeePerGas:o}=n,c=new f.U(o,e.data,a,i,s,"original",e.l1GasFee);return{...r,pendingEthTxData:c}}(t,i,n)}return async function(e,n,t){if(!n)throw Error("A txHash must be passed");const r=await m.oT.createSubmittedTx(e,n,void 0,t,"original");return r}(t,o,n)}const x={[o.fz]:function({unsignedTxOrUserOp:e,wallet:n,shouldUseGenericMessage:t,toUsername:r}){const a=e.network.asChain();if(!a)throw g.D.invalidNetwork(e.network);const s=function(e){return e&&(e.startsWith("@")||e.includes("."))?e:null}(r);if((0,u.T)(e)){const{cancel:r,signedTransaction:i}=function(e,n,t,r){const{currencyCode:a,erc20Value:s,data:i,fromAddress:o,gasLimit:d,gasPrice:l,toAddress:u,weiValue:g,recipientAddress:f}=e,m=0n===g&&(0n===s||void 0===s),w=(0,h.je)(),{promise:x,cancel:y}=w.appVersion&&r&&!m?w.sendCbRequest({method:"generic",params:{action:"cbSignAndSubmit",data:{chainId:(0,c.ensureIntNumber)(Number(n.chainId)),currencyCode:a.code,data:(0,c.hexStringFromBuffer)(i,!0),erc20Value:s?(0,b.i)(s):null,fromAddress:(0,c.ensureAddressString)(o),gasLimit:(0,b.i)(d),gasPriceInWei:(0,b.i)(l),maxFeePerGas:null,maxPriorityFeePerGas:null,nonce:null,recipientAddress:s?(0,c.ensureAddressString)(f):null,toAddress:(0,c.ensureAddressString)(u),toUsername:t,weiValue:(0,b.i)(g)}}}):w.signAndSubmitEthereumTransaction({chainId:(0,c.ensureIntNumber)(Number(n.chainId)),data:i,fromAddress:(0,c.ensureAddressString)(o),gasLimit:(0,p.aZ)(d),gasPriceInWei:(0,p.aZ)(l),maxFeePerGas:null,maxPriorityFeePerGas:null,nonce:null,toAddress:(0,c.ensureAddressString)(u),weiValue:(0,p.aZ)(g)});return{cancel:y,signedTransaction:x}}(e,a,s,t);return[w(i,n,e),r]}if((0,l._)(e)){const{cancel:r,signedTransaction:i}=function(e,n,t,r){const{fromAddress:a,toAddress:s,weiValue:i,data:o,gasLimit:d,erc20Value:l,currencyCode:u,maxFeePerGas:g,recipientAddress:f,maxPriorityFeePerGas:m}=e,w=0n===i&&(0n===l||void 0===l),x=(0,h.je)(),{promise:y,cancel:A}=x.appVersion&&r&&!w?x.sendCbRequest({method:"generic",params:{action:"cbSignAndSubmit",data:{chainId:(0,c.ensureIntNumber)(Number(n.chainId)),currencyCode:u.code,data:(0,c.hexStringFromBuffer)(o,!0),erc20Value:l?(0,b.i)(l):null,fromAddress:(0,c.ensureAddressString)(a),gasLimit:(0,b.i)(d),gasPriceInWei:null,maxFeePerGas:(0,b.i)(g),maxPriorityFeePerGas:(0,b.i)(m),nonce:null,recipientAddress:l?(0,c.ensureAddressString)(f):null,toAddress:(0,c.ensureAddressString)(s),toUsername:t,weiValue:(0,b.i)(i)}}}):x.signAndSubmitEthereumTransaction({chainId:(0,c.ensureIntNumber)(Number(n.chainId)),data:o,fromAddress:(0,c.ensureAddressString)(a),gasLimit:(0,p.aZ)(d),gasPriceInWei:null,maxFeePerGas:(0,p.aZ)(g),maxPriorityFeePerGas:(0,p.aZ)(m),nonce:null,toAddress:(0,c.ensureAddressString)(s),weiValue:(0,p.aZ)(i)});return{cancel:A,signedTransaction:y}}(e,a,s,t);return[w(i,n,e),r]}throw new Error("Unknown unsigned tx type")}};var y=t(65063),A=t(91745),T=t(77981),I=t(34767),k=t(98837);function G(){const e=(0,r.useRef)((()=>{})),n=(0,k.O)(),t=(0,y.t)();var o;o=e,(0,r.useEffect)((function(){const e=o;return e.current&&window.addEventListener("beforeunload",e.current),()=>{window.removeEventListener("beforeunload",e.current),e?.current()}}),[o]);return(0,r.useCallback)((async({unsignedTxOrUserOp:r,wallet:o,sessionIdHash:c,shouldUseGenericMessage:d=!1,toUsername:l})=>{e.current();const u=r.blockchain.rawValue,g=r.network.asChain(),{chainId:f,displayName:m,isCustomNetwork:h,isTestnet:p}=g??{},b=(r.metadata.get(i.kV)??"").toLocaleString(),w="walletlink",y={start:a.CX,success:a.nr,fail:a.s,data:{loggingId:"4e3e5a90-5528-4287-b2fa-0d478b9716ab",action:I.X2.measurement,componentType:I.I5.unknown,currencyCode:r.currencyCode.rawValue,blockchain:u,isContractDeploy:!r.recipientAddress,uuid:(0,T.A)(),type:w,sessionIdHash:c??null,chainId:f,chainName:m,isTestnet:p,isCustomNetwork:h,txSource:b},metricTags:{blockchain:u,chain_id:h?void 0:f?.toString(),tx_source:b,tx_type:w},addSuccessDataToLog:({txHash:e})=>({txHash:e})};return(0,A.U)((async()=>{const[a,i]=function({unsignedTxOrUserOp:e,wallet:n,shouldUseGenericMessage:t,toUsername:r}){return(0,x[n.blockchain.rawValue])({unsignedTxOrUserOp:e,wallet:n,shouldUseGenericMessage:t,toUsername:r})}({unsignedTxOrUserOp:r,wallet:o,shouldUseGenericMessage:d,toUsername:l});return e.current=i,a.then((async a=>{n([r.asTransaction(a.txHash,a.nonce,o,r.metadata)]);return t(o.blockchain.rawValue,o.network.asChain())&&(0,s.L)({wallet:o}),e.current=()=>{},a}))}),y)}),[n,t])}}}]);
//# sourceMappingURL=9966.js.map