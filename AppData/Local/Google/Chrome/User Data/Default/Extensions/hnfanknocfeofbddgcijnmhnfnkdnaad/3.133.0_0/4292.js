/*! For license information please see 4292.js.LICENSE.txt */
try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},r=(new e.Error).stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="37de1c0e-b49d-443a-8d83-b85bf6fa3a0d",e._sentryDebugIdIdentifier="sentry-dbid-37de1c0e-b49d-443a-8d83-b85bf6fa3a0d")}()}catch(e){}!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"3.133.0-398e03"}}catch(e){}}(),(self.webpackChunkcb_wallet_extension=self.webpackChunkcb_wallet_extension||[]).push([[4292],{78751:(e,r,n)=>{n.d(r,{nq:()=>K});var t=n(14041),a=n(41783),o=n(79637),s=n(41092),i=n(13394),c=n(65063);class u extends Error{}function l({fn:e,validate:r,interval:n,maxAttempts:t}){let a,o=0;const s=async(i,c)=>{const l=await e();return o++,r(l)?i(l):t&&o===t?c(new u("Max attempts reached")):void(a=setTimeout(s,n,i,c))};return{promise:new Promise(s),cancel:()=>a&&clearTimeout(a)}}var d=n(87432);var f=n(54343),m=n(72707);function p(){const e=function(){const e=(0,t.useRef)(void 0),r=(0,t.useRef)(!1);return(0,d.y)((function(){return()=>{e.current&&e.current()}})),(0,t.useCallback)((async n=>{if(r.current)return null;const{promise:t,cancel:a}=l(n);return e.current=a,r.current=!0,t}),[])}();return(0,t.useCallback)((async function({userOpHash:r,client:n}){return e({fn:async function(){return(0,m.b)(n,{hash:r})},validate:e=>!!e,interval:f.d7})}),[e])}var y=n(99172),b=n(98837),v=n(31860),g=n(86146);class h extends Error{constructor(e){super(e.message),this.code=e.code??"UnknownError",this.stack=e.stack,this.name="PasskeyError",Object.setPrototypeOf(this,h.prototype)}}function w(e){return e instanceof h&&("UserCancelled"===e.code||e.message.includes("Cancelled by user")||e.message.includes("Unable to get sync account"))}function E(e){return e instanceof h&&(!!e.message.includes("NotAllowedError")||!!e.message.includes("Unable to create key during registration"))}var S;!function(e){e.PASSKEY_USER_CANCELLED="passkey_user_cancelled",e.PASSKEY_FAILED_AUTH="passkey_failed_auth",e.PASSKEY_NO_CREDENTIALS="passkey_no_credentials",e.PASSKEY_NO_ACCOUNT="passkey_no_account",e.PASSKEY_MISMATCH="passkey_mismatch",e.PASSKEY_NOT_SUPPORTED_DUE_TO_OS_VERSION="passkey_not_supported_due_to_os_version",e.PASSKEY_NOT_SUPPORTED="passkey_not_supported",e.UNEXPECTED="passkey_unexpected"}(S||(S={}));var k,O=n(16308);function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function C(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function T(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?C(Object(n),!0).forEach((function(r){x(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function x(e,r,n){return(r=function(e){var r=function(e,r){if("object"!=P(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,r||"default");if("object"!=P(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==P(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function A(){"use strict";var e=U(),r=e.m(A),n=(Object.getPrototypeOf?Object.getPrototypeOf(r):r.__proto__).constructor;function t(e){var r="function"==typeof e&&e.constructor;return!!r&&(r===n||"GeneratorFunction"===(r.displayName||r.name))}var a={throw:1,return:2,break:3,continue:3};function o(e){var r,n;return function(t){r||(r={stop:function(){return n(t.a,2)},catch:function(){return t.v},abrupt:function(e,r){return n(t.a,a[e],r)},delegateYield:function(e,a,o){return r.resultName=a,n(t.d,I(e),o)},finish:function(e){return n(t.f,e)}},n=function(e,n,a){t.p=r.prev,t.n=r.next;try{return e(n,a)}finally{r.next=t.n}}),r.resultName&&(r[r.resultName]=t.v,r.resultName=void 0),r.sent=t.v,r.next=t.n;try{return e.call(this,r)}finally{t.p=r.prev,t.n=r.next}}}return(A=function(){return{wrap:function(r,n,t,a){return e.w(o(r),n,t,a&&a.reverse())},isGeneratorFunction:t,mark:e.m,awrap:function(e,r){return new j(e,r)},AsyncIterator:D,async:function(e,r,n,a,s){return(t(r)?G:M)(o(e),r,n,a,s)},keys:_,values:I}})()}function I(e){if(null!=e){var r=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(P(e)+" is not iterable")}function _(e){var r=Object(e),n=[];for(var t in r)n.unshift(t);return function e(){for(;n.length;)if((t=n.pop())in r)return e.value=t,e.done=!1,e;return e.done=!0,e}}function M(e,r,n,t,a){var o=G(e,r,n,t,a);return o.next().then((function(e){return e.done?e.value:o.next()}))}function G(e,r,n,t,a){return new D(U().w(e,r,n,t),a||Promise)}function D(e,r){function n(t,a,o,s){try{var i=e[t](a),c=i.value;return c instanceof j?r.resolve(c.v).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):r.resolve(c).then((function(e){i.value=e,o(i)}),(function(e){return n("throw",e,o,s)}))}catch(e){s(e)}}var t;this.next||(F(D.prototype),F(D.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),F(this,"_invoke",(function(e,a,o){function s(){return new r((function(r,t){n(e,o,r,t)}))}return t=t?t.then(s,s):s()}),!0)}function U(){var e,r,n="function"==typeof Symbol?Symbol:{},t=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,t,a,o){var c=t&&t.prototype instanceof i?t:i,u=Object.create(c.prototype);return F(u,"_invoke",function(n,t,a){var o,i,c,u=0,l=a||[],d=!1,f={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(r,n){return o=r,i=0,c=e,f.n=n,s}};function m(n,t){for(i=n,c=t,r=0;!d&&u&&!a&&r<l.length;r++){var a,o=l[r],m=f.p,p=o[2];n>3?(a=p===t)&&(c=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=m&&((a=n<2&&m<o[1])?(i=0,f.v=t,f.n=o[1]):m<p&&(a=n<3||o[0]>t||t>p)&&(o[4]=n,o[5]=t,f.n=p,i=0))}if(a||n>1)return s;throw d=!0,t}return function(a,l,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&m(l,p),i=l,c=p;(r=i<2?e:c)||!d;){o||(i?i<3?(i>1&&(f.n=-1),m(i,c)):f.n=c:f.v=c);try{if(u=2,o){if(i||(a="next"),r=o[a]){if(!(r=r.call(o,c)))throw TypeError("iterator result is not an object");if(!r.done)return r;c=r.value,i<2&&(i=0)}else 1===i&&(r=o.return)&&r.call(o),i<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((r=(d=f.n<0)?c:n.call(t,f))!==s)break}catch(r){o=e,i=1,c=r}finally{u=1}}return{value:r,done:d}}}(n,a,o),!0),u}var s={};function i(){}function c(){}function u(){}r=Object.getPrototypeOf;var l=[][t]?r(r([][t]())):(F(r={},t,(function(){return this})),r),d=u.prototype=i.prototype=Object.create(l);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,F(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=u,F(d,"constructor",u),F(u,"constructor",c),c.displayName="GeneratorFunction",F(u,a,"GeneratorFunction"),F(d),F(d,a,"Generator"),F(d,t,(function(){return this})),F(d,"toString",(function(){return"[object Generator]"})),(U=function(){return{w:o,m:f}})()}function F(e,r,n,t){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}F=function(e,r,n,t){function o(r,n){F(e,r,(function(e){return this._invoke(r,n,e)}))}r?a?a(e,r,{value:n,enumerable:!t,configurable:!t,writable:!t}):e[r]=n:(o("next",0),o("throw",1),o("return",2))},F(e,r,n,t)}function j(e,r){this.v=e,this.k=r}function N(e,r,n,t,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void n(e)}i.done?r(c):Promise.resolve(c).then(t,a)}function B(e){return function(){var r=this,n=arguments;return new Promise((function(t,a){var o=e.apply(r,n);function s(e){N(o,t,a,s,i,"next",e)}function i(e){N(o,t,a,s,i,"throw",e)}s(void 0)}))}}function L(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,a,o,s,i=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;c=!1}else for(;!(c=(t=o.call(n)).done)&&(i.push(t.value),i.length!==r);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw a}}return i}}(e,r)||function(e,r){if(e){if("string"==typeof e)return H(e,r);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=Array(r);n<r;n++)t[n]=e[n];return t}e=n.hmd(e),(k="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&k(e);var R="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};function K(e){return e.message.includes("replacement underpriced")}var V,Y,q="You have a previous transaction that got stuck, please try going through the send flow to drop the previous transaction.";function W(e){var r,n=e.wallet,u=e.unsignedTxOrUserOp,l=e.signSuccess,d=e.signError,f=e.handleUnlock,m=e.unlockSuccess,h=e.unlockError,S=e.onRetryableError,k=e.skipSubmit,P=void 0!==k&&k,C=e.txSubmissionType,x=void 0===C?"original":C,I=e.source,_=void 0===I?"rn":I,M=e.onSubmit,G=e.waitForTxHash,D=e.chainId,U=e.walletSendCallsVersion,F=e.shouldUseUserOpService,j=L((0,t.useState)(!1),2),N=j[0],H=j[1],R=(0,b.O)(),V=(0,c.t)(),Y=p(),W=n.network.asChain();D&&(W=y.lg.fromChainId({chainId:BigInt(D)}).asChain());var Z=(0,t.useCallback)(function(){var e=B(A().mark((function e(r){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u&&R([u.asTransaction(r.txHash,r.nonce,n,u.metadata,x)]);case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),[R,x,u,n]),J=(0,t.useCallback)((function(){V(n.blockchain.rawValue,W)&&(0,o.L)({wallet:n})}),[n,V,W]),$=(0,t.useCallback)((function(e){M&&M(e),Z(e),J()}),[M,Z,J]),z=(0,t.useCallback)(function(){var e=B(A().mark((function e(){var r,t,o,c,f,m,p,y,b,h,k,C,I;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,u){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,(0,v.Z)({unsignedTxOrUserOp:u,wallet:n,txSubmissionType:x,skipSubmit:P,onSubmit:$,source:_,walletSendCallsVersion:U,shouldUseUserOpService:F});case 5:if(r=e.sent,!G){e.next=14;break}return m=(0,g.x)(null!==(t=null===(o=W)||void 0===o?void 0:o.chainId)&&void 0!==t?t:-1),e.next=10,Y({userOpHash:r.txHash,client:m});case 10:p=e.sent,l(T(T({},r),{},{txHash:null!==(c=null==p||null===(f=p.receipt)||void 0===f?void 0:f.transactionHash)&&void 0!==c?c:r.txHash})),e.next=15;break;case 14:l(r);case 15:e.next=32;break;case 17:if(e.prev=17,e.t0=e.catch(0),(0,i.gf)({error:e.t0,context:"sign_and_submit_transaction_error",isHandled:!1,severity:"error"}),!w(e.t0)&&!E(e.t0)){e.next=22;break}return e.abrupt("return");case 22:if(!K(e.t0)||!(0,s.a)(u)){e.next=30;break}return b=e.t0 instanceof O.C?e.t0.details:e.t0.message,h=u.maxFeePerGas.toString(),k=u.maxPriorityFeePerGas.toString(),C=e.t0 instanceof O.C?JSON.parse(JSON.stringify(e.t0.walk())):void 0,(0,a.fZ)({errorMessage:b,chainId:null===(y=W)||void 0===y?void 0:y.chainId,source:_,maxFeePerGas:h,maxPriorityFeePerGas:k,errorDetails:C}),S?null==S||S({unsignedTxOrUserOp:u,error:e.t0}):((0,i.gf)({error:e.t0,context:"sign_and_submit_transaction_unhandled_retryable_error",isHandled:!1,severity:"error"}),d(new Error(q))),e.abrupt("return");case 30:I=e.t0 instanceof O.C?new Error(e.t0.details):e.t0,d(I);case 32:return e.prev=32,H(!1),e.finish(32);case 35:case"end":return e.stop()}}),e,null,[[0,17,32,35]])})));return function(){return e.apply(this,arguments)}}(),[u,n,x,P,$,_,G,null===(r=W)||void 0===r?void 0:r.chainId,Y,l,d,S,U,F]),Q=(0,t.useCallback)((function(){return H(!0),f({unlockSuccess:function(){null==m||m(),z()},unlockError:function(e){e&&(null==h||h(e)),H(!1)}})}),[f,z,h,m]);return(0,t.useMemo)((function(){return{signAndSubmitScw:Q,isSignAndSubmitScwLoading:N}}),[N,Q])}R(W,"useState{[isLoading, setIsLoading](false)}\nuseSaveTransactions{saveTransactions}\nuseShouldRefreshBalancesAfterTxSubmit{shouldRefreshBalancesAfterTxSubmit}\nusePollForUserOpReceiptByUserOpHash{pollForUserOpReceiptByUserOpHash}\nuseCallback{saveTransaction}\nuseCallback{refreshBalancesForWallet}\nuseCallback{submitSuccess}\nuseCallback{signAndSubmit}\nuseCallback{signAndSubmitScw}\nuseMemo{}",(function(){return[b.O,c.t,p]})),(V="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(V.register(K,"isStuckUserOpError","/workspaces/libs/data/hooks/useSignAndSubmitScw/useSignAndSubmitScw.tsx"),V.register(q,"stuckUserOpMessageUnhandled","/workspaces/libs/data/hooks/useSignAndSubmitScw/useSignAndSubmitScw.tsx"),V.register(W,"useSignAndSubmitScw","/workspaces/libs/data/hooks/useSignAndSubmitScw/useSignAndSubmitScw.tsx")),(Y="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&Y(e)},81838:(e,r,n)=>{n.d(r,{G:()=>c});n(34767),n(55452);var t=n(21455);var a,o=n(6939);e=n.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var s,i;"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function c(e){var r=e.error,n=e.type;if(r)try{switch(!0){case"gasPriceError"===n:case"paymasterError"===n:case"insufficientFundsError"===n:case"paymasterStubError"===n:case"walletPrepareCallsError"===n:return{message:r.message,name:r.name};case"magicSpendQuoteSignatureError"===n:var a=r;return{code:a.code,name:a.name,message:a.message};case"magicSpendSignatureCommitError"===n:var s=r;return{code:s.code,name:s.name,message:s.message};case"userOpGasError"===n:var i=function(e){let r,n,t,a;const s=e.walk((e=>"UnknownNodeError"===e.name));s&&(r=s.name,n=s.shortMessage,t=s.docsPath);const i=e.walk((e=>"RpcRequestError"===e.name));i&&(r=i.name,n=i.details,t=i.docsPath,a=i.code);const c=e.walk((e=>"SmartAccountInsufficientFundsError"===e.name));c instanceof o.Cc&&(r=c.name,n=c.shortMessage,t=c.docsPath);const u=e.walk((e=>"InitCodeDidNotDeploySenderError"===e.name));u&&(r=u.name,n=u.shortMessage,t=u.docsPath);const l=e.walk((e=>"InvalidSmartAccountNonceError"===e.name));l&&(r=l.name,n=l.shortMessage,t=l.docsPath);const d=e.walk((e=>"PaymasterDataRejectedError"===e.name));d&&(r=d.name,n=d.shortMessage,t=d.docsPath);const f=e.walk((e=>"PaymasterDepositTooLowError"===e.name));f&&(r=f.name,n=f.shortMessage,t=f.docsPath);const m=e.walk((e=>"PaymasterNotDeployedError"===e.name));m&&(r=m.name,n=m.shortMessage,t=m.docsPath);const p=e.walk((e=>"PaymasterValidationRevertedError"===e.name));p&&(r=p.name,n=p.shortMessage,t=p.docsPath);const y=e.walk((e=>"PaymasterValidityPeriodError"===e.name));y&&(r=y.name,n=y.shortMessage,t=y.docsPath);const b=e.walk((e=>"SenderAddressMismatchError"===e.name));b&&(r=b.name,n=b.shortMessage,t=b.docsPath);const v=e.walk((e=>"SenderAlreadyDeployedError"===e.name));v&&(r=v.name,n=v.shortMessage,t=v.docsPath);const g=e.walk((e=>"SenderNotDeployedError"===e.name));g&&(r=g.name,n=g.shortMessage,t=g.docsPath);const h=e.walk((e=>"SmartAccountSignatureValidityPeriodError"===e.name));h&&(r=h.name,n=h.shortMessage,t=h.docsPath);const w=e.walk((e=>"SmartAccountValidationRevertedError"===e.name));w&&(r=w.name,n=w.shortMessage,t=w.docsPath);const E=e.walk((e=>"InitCodeRevertedError"===e.name));return E&&(r=E.name,n=E.shortMessage,t=E.docsPath),{name:r,details:n,docsPath:t,code:a}}(r);return{message:i.details,name:i.name,docsPath:i.docsPath};case"nonceError"===n:var c=r;return{message:c.shortMessage,name:c.name,docsPath:c.docsPath};case"byteCodeError"===n:var u=r;return{name:u.name,message:u.message};default:return void(0,t.K1)(r)}}catch(e){return void(0,t.K1)(r)}}(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&s.register(c,"handleUseUnsignedUserOpErrors","/workspaces/libs/data/scw/features/sign/transaction/utils/handleUseUnsignedUserOpErrors.tsx"),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)},76825:(e,r,n)=>{n.d(r,{r:()=>Y});var t=n(14041),a=n(32183),o=n(8867),s=n(84213),i=n(46122),c=n(26182),u=n(77547),l=n(13620),d=n(91635),f=n(35333);var m=n(4244),p=n(68228),y=n(68197),b=n(78751),v=n(81838);const g=(0,a.YK)({genericError:{id:"PR2F1h",defaultMessage:"{message}"},rpcError:{id:"3bL3yP",defaultMessage:'Reverted with message: "{message}"'}});function h(){const{formatMessage:e}=(0,o.A)();return(0,t.useCallback)((function({userOpError:r}){if(r?.gasPriceError){const n=(0,v.G)({error:r?.gasPriceError,type:"gasPriceError"});return e(g.genericError,{message:n?.name||"get4337GasPricesError"})}if(r?.userOpGasError){const n=(0,v.G)({error:r?.userOpGasError,type:"userOpGasError"});return"RpcRequestError"===n?.name?e(g.rpcError,{message:n?.message||"estimateUserOperationGasError"}):e(g.genericError,{message:n?.name||"estimateUserOperationGasError"})}if(r?.walletPrepareCallsError)return e(g.genericError,{message:r?.walletPrepareCallsError?.message||"walletPrepareCallsError"})}),[e])}var w=n(7077),E=n(52689),S=n(72137),k=n(5104),O=n(84632),P=n(24117),C=n(99172);const T=(0,a.YK)({notEnoughBalanceForTransaction:{id:"wtowzI",defaultMessage:"You have {fiatTotalAvailableBalance} in {cryptoSymbol} on {chainName}, but you need at least {fiatTotalTransactionCost} for this transaction. Please deposit more {cryptoSymbol} on {chainName}."},notEnoughBalanceForGas:{id:"hIdzKF",defaultMessage:"You have {fiatTotalAvailableBalance} in {cryptoSymbol} on {chainName}, but you need {fiatTotalGasCost} due to gas fees. Please deposit more {cryptoSymbol} on {chainName}."}});function x(){const{formatMessage:e,formatters:r}=(0,o.A)(),n=(0,P.gs)(),a=(0,O.n)();return(0,t.useCallback)((function({userOp:t,chainId:o,balance:s}){const i=C.lg.fromChainId({chainId:BigInt(o)}),c=i.asChain(),u=c?.baseAssetCurrencyCode??"",l=BigInt(c?.baseAssetDecimal??18),d=(0,k.W)(t),f=t.calls.reduce(((e,r)=>e+r.value),0n),p=f?d+f:d,y={fromCurrencyCode:new E.j(u),decimals:l,network:i,exchangeRatesMap:n??{},formatters:r,fiatCurrency:a,formatZeroBalance:!0};return f&&p>s?new S.vU(e(T.notEnoughBalanceForTransaction,{cryptoSymbol:u,chainName:c?.displayName??"",fiatTotalAvailableBalance:(0,w.c)({...y,value:s,round:m.e1.Down}),fiatTotalTransactionCost:(0,w.c)({...y,value:p,round:m.e1.Up})})):t&&d>s?new S.IJ(e(T.notEnoughBalanceForGas,{cryptoSymbol:u,chainName:c?.displayName??"",fiatTotalAvailableBalance:(0,w.c)({...y,value:s,round:m.e1.Down}),fiatTotalGasCost:(0,w.c)({...y,value:d,round:m.e1.Up})})):void 0}),[n,e,r,a])}var A=n(86072),I=n(23804),_=n(52303);var M,G=n(89029),D=n.n(G);function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function F(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function j(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?F(Object(n),!0).forEach((function(r){N(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function N(e,r,n){return(r=function(e){var r=function(e,r){if("object"!=U(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,r||"default");if("object"!=U(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==U(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function B(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,a,o,s,i=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;c=!1}else for(;!(c=(t=o.call(n)).done)&&(i.push(t.value),i.length!==r);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw a}}return i}}(e,r)||function(e,r){if(e){if("string"==typeof e)return L(e,r);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=Array(r);n<r;n++)t[n]=e[n];return t}e=n.hmd(e),(M="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&M(e);var H,R,K="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},V=(0,a.YK)({errorCancel:{id:"8gdsKY",defaultMessage:[{type:0,value:"Cancel"}]},errorConfirm:{id:"c7nwmM",defaultMessage:[{type:0,value:"Confirm"}]},getMoreCurrencyError:{id:"BB36LS",defaultMessage:[{type:0,value:"may be required for the transaction. Please deposit more"}]},sendKilledError:{id:"R6qUvO",defaultMessage:[{type:0,value:"This feature is currently unavailable. Try again later."}]},unableToEstimateGasError:{id:"iAStha",defaultMessage:[{type:0,value:"Unable to estimate network fee."}]},genericError:{id:"OlEpDj",defaultMessage:[{type:0,value:"Something went wrong."}]},learnMore:{id:"9DtuSP",defaultMessage:[{type:0,value:"Learn more"}]},stuckUserOpMessage:{id:"Uy3etL",defaultMessage:[{type:0,value:"You have a previous transaction that got stuck. Retry to cancel that previous transaction and submit this one in its place."}]}});function Y(){var e=(0,m.J9)(),r=(0,o.A)().formatMessage,n=(0,t.useRef)(!1),a=(0,y.s)("kill_send"),v=(0,p.F)("kill_send"),g=(0,y.s)("kill_dapp_tx"),w=(0,p.F)("kill_dapp_tx"),E=h(),S=x();return(0,t.useCallback)((function(t){var o,m,p,y,h,k,O,P,C=t.wallet,T=t.unsignedTxOrUserOp,x=t.error,M=t.primeError,G=t.feeWallet,U=t.flow,F=t.isTxSponsored,N=void 0!==F&&F,L=t.isAuxiliaryFundsEnabled,H=void 0!==L&&L,R=T,K=T;if(T&&G){var Y=function(e){const r=(0,f.D)(e);let n,t;(0,_._)(e)&&e.lowerBoundFee?(n=e.lowerBoundFee<e.upperBoundFee?e.lowerBoundFee:e.upperBoundFee,t=e.upperBoundFee):(n=e.estimatedFee,t=e.estimatedFee),r&&(t+=e.extraFee??0n);return{minFee:n,maxFee:t}}(T),q=Y.minFee,W=Y.maxFee,Z={getMoreCurrencyError:{type:"getMoreCurrencyError",isDismissible:!1,showErrorIcon:!0,isDisabled:!0,message:"".concat(r(V.getMoreCurrencyError)," ").concat(null!==(o=null===(m=C.network)||void 0===m||null===(m=m.asChain())||void 0===m?void 0:m.baseAssetCurrencyCode)&&void 0!==o?o:C.blockchain.rawValue,".")},sendKilledError:{type:"sendKilledError",isDismissible:!1,showErrorIcon:!0,isDisabled:!0,message:r(V.sendKilledError)},unableToEstimateGasError:{type:"unableToEstimateGasError",isDismissible:!1,showErrorIcon:!0,isDisabled:!0,message:r(V.unableToEstimateGasError)},stuckUserOpError:{type:"stuckUserOpError",isDismissible:!1,showErrorIcon:!0,isDisabled:!1,message:r(V.stuckUserOpMessage)},genericError:{type:"genericError",isDismissible:!1,showErrorIcon:!0,isDisabled:!0,message:"".concat((null==x?void 0:x.message)||r(V.genericError))},genericPrimeError:{type:"genericPrimeError",isDismissible:!1,showErrorIcon:!0,isDisabled:!0,message:"".concat(null==M?void 0:M.message)}};if(M)return Z.genericPrimeError;if(e.fiatValue({currencyCode:null==T?void 0:T.feeCurrencyCode,decimals:null==T?void 0:T.feeCurrencyDecimal,value:q,contractAddress:void 0,network:C.network,blockchain:C.blockchain})||"sync"===U){var J=null==C||null===(p=C.network.asChain())||void 0===p?void 0:p.chainId,$=J?BigInt(J):void 0,z=null==C?void 0:C.blockchain.rawValue,Q=null==G||null===(y=G.network.asChain())||void 0===y?void 0:y.chainId,X=Q?BigInt(Q):void 0,ee=null==G?void 0:G.blockchain.rawValue,re="dappTx"===U&&(w(z)||w(ee)||g($)||g(X)),ne="send"===U&&(v(z)||v(ee)||a($)||a(X)),te=e.formatToCrypto({currencyCode:T.feeCurrencyCode,decimals:T.feeCurrencyDecimal,value:BigInt(W),includeCode:!0,maxDisplayDecimals:8n}),ae=function({feeCurrencyCode:e,feeDecimal:r,feeValue:n,currencyFormatter:t,wallet:a}){const o=t.fiatValue({currencyCode:e,decimals:r,value:BigInt(n),contractAddress:void 0,network:a.network,blockchain:a.blockchain});return o?.lessThan(new(D())(.01))&&o?.greaterThan(new(D())(0))?`<${t.fiatValueString(new(D())(.01),!0)}`:t.formatToFiat({fromCurrencyCode:e,decimals:r,value:BigInt(n),isAbbreviated:!1,contractAddress:void 0,network:a.network,blockchain:a.blockchain})}({feeCurrencyCode:T.feeCurrencyCode,feeDecimal:T.feeCurrencyDecimal,feeValue:BigInt(W),currencyFormatter:e,wallet:C});if(Z.getMoreCurrencyError={type:"getMoreCurrencyError",isDismissible:!1,showErrorIcon:!0,isDisabled:!0,message:"".concat(te,"  (").concat(null!=ae?ae:"",") ").concat(r(V.getMoreCurrencyError)," ").concat(null!==(h=null===(k=C.network)||void 0===k||null===(k=k.asChain())||void 0===k?void 0:k.baseAssetCurrencyCode)&&void 0!==h?h:C.blockchain.rawValue,".")},re||ne)return Z.sendKilledError;var oe=R.network.asChain(),se=null!==(O=null===(P=Array.from(T.metadata,(function(e){var r=B(e,2);return{name:r[0],value:r[1]}})).find((function(e){return"txSource"===e.name.keyName})))||void 0===P?void 0:P.value)&&void 0!==O?O:"",ie=0n,ce=0n;if(T instanceof u.D?(ie=R.maxFeePerGas/BigInt(Math.pow(10,9)),ce=R.gasLimit):T instanceof l.U&&(ie=K.gasPrice/BigInt(Math.pow(10,9)),ce=K.gasLimit),"sync"===U&&T instanceof d.f){var ue,le=S({userOp:T,chainId:null!=Q?Q:0,balance:null!==(ue=G.balance)&&void 0!==ue?ue:0n});if(le)return j(j({},Z.getMoreCurrencyError),{},{message:le.message})}if(x){var de,fe,me,pe,ye;if(!n.current)n.current=!0,(0,s.NZ)({blockchain:i.AA.rawValue,chainName:null!==(de=null==oe?void 0:oe.displayName)&&void 0!==de?de:"",chainId:null!==(fe=null==oe||null===(me=oe.chainId)||void 0===me?void 0:me.toString(10))&&void 0!==fe?fe:"",errorType:"Error",errorMessage:"".concat(x.name," -- ").concat(null==x?void 0:x.message),txSource:se.toLocaleString(),gasPriceInGwei:null===(pe=ie)||void 0===pe?void 0:pe.toString(),gasLimit:null===(ye=R.gasLimit)||void 0===ye?void 0:ye.toString()});if(T instanceof d.f&&(0,b.nq)(x))return Z.stuckUserOpError;if(T instanceof d.f&&x instanceof A.T){var be,ve,ge,he=S({userOp:T,chainId:null!==(be=null==oe?void 0:oe.chainId)&&void 0!==be?be:0,balance:null!==(ve=G.balance)&&void 0!==ve?ve:0n});if(he)return j(j({},Z.getMoreCurrencyError),{},{message:he.message});var we=E({userOpError:x.errorData});return we&&null!==(ge=x.errorData)&&void 0!==ge&&ge.userOpGasError?j(j({},Z.unableToEstimateGasError),{},{message:null!=we?we:Z.unableToEstimateGasError.message}):j(j({},Z.genericError),{},we?{message:we}:{message:r(V.genericError)})}return x===c.c.unableToEstimateGas?Z.unableToEstimateGasError:Z.genericError}var Ee,Se,ke,Oe=I.u.isEqual(C,G)?W+T.transferValue:W,Pe=void 0===G.balance||G.balance<Oe,Ce=function(e,r){return!!(0,f.D)(e)&&!!e.feePayerAddress&&e.feePayerAddress!==r.primaryAddress}(T,C);if(!(Ce||N||H)&&(Pe||T.transferValue<0n)){var Te,xe,Ae,Ie,_e;if(!n.current)n.current=!0,(0,s.NZ)({blockchain:i.AA.rawValue,chainName:null!==(Te=null==oe?void 0:oe.displayName)&&void 0!==Te?Te:"",chainId:null!==(xe=null==oe||null===(Ae=oe.chainId)||void 0===Ae?void 0:Ae.toString(10))&&void 0!==xe?xe:"",errorType:"InsufficientBalance",errorMessage:"Insufficient balance to pay gas fee",txSource:se.toLocaleString(),gasPriceInGwei:null===(Ie=ie)||void 0===Ie?void 0:Ie.toString(),gasLimit:null===(_e=ce)||void 0===_e?void 0:_e.toString(),balanceUndefined:void 0===G.balance});return Z.getMoreCurrencyError}if(n.current)n.current=!0,(0,s.WV)({blockchain:i.AA.rawValue,chainName:null!==(Ee=null==oe?void 0:oe.displayName)&&void 0!==Ee?Ee:"",chainId:null!==(Se=null==oe||null===(ke=oe.chainId)||void 0===ke?void 0:ke.toString(10))&&void 0!==Se?Se:""})}}}),[e,w,g,v,a,r,E,S])}K(Y,"useCurrencyFormatter{currencyFormatter}\nuseIntl{{ formatMessage }}\nuseRef{hasDispatchedGasAnalyticsEvent}\nuseKillSwitchByEthNetwork{isSendKilledByEthNetwork}\nuseKillSwitchByBlockchain{isSendKilledByBlockchain}\nuseKillSwitchByEthNetwork{isDappTxKilledByEthNetwork}\nuseKillSwitchByBlockchain{isDappTxKilledByBlockchain}\nuseErrorMessageForUnsignedUserOpError{getErrorMessageForUnsignedUserOpError}\nuseGetInsufficientFundsErrorForUserOp{getInsufficientFundsErrorForUserOp}\nuseCallback{}",(function(){return[m.J9,o.A,y.s,p.F,y.s,p.F,h,x]})),(H="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(H.register(V,"messages","/workspaces/libs/data/stores/Transactions/hooks/useGetTransactionDetailsErrors.tsx"),H.register(Y,"useGetTransactionDetailsErrors","/workspaces/libs/data/stores/Transactions/hooks/useGetTransactionDetailsErrors.tsx")),(R="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&R(e)},35333:(e,r,n)=>{n.d(r,{D:()=>a});var t=n(16191);function a(e){return e instanceof t.K}},64292:(e,r,n)=>{n.d(r,{Z:()=>a});var t=n(76825);function a({wallet:e,unsignedTxOrUserOp:r,error:n,primeError:a,feeWallet:o,flow:s,isTxSponsored:i=!1,isAuxiliaryFundsEnabled:c=!1}){return(0,t.r)()({wallet:e,unsignedTxOrUserOp:r,error:n,primeError:a,feeWallet:o,flow:s,isTxSponsored:i,isAuxiliaryFundsEnabled:c})}}}]);
//# sourceMappingURL=4292.js.map