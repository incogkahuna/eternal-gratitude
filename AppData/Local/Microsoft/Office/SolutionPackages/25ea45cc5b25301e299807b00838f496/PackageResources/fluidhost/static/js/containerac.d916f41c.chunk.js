"use strict";(self.webpackChunkfluidhost=self.webpackChunkfluidhost||[]).push([[95336],{4915:(e,t,s)=>{s.r(t),s.d(t,{ContainerActionCreator:()=>f});var o=s(19285),i=s(24367),n=s(36591),r=s(64226),a=s(96891),c=s(78332),l=s(65818),d=s(52274),h=s(51857),u=s(18113),p=s(38752),g=s(74844);class f extends n.C{get name(){return a.M.ContainerActionCreator}async fetchContainers(e,t){(await this.logicModuleProviders.containerModule()).fetchContainers(e,t).then(t=>{t.NextContinuationToken&&this.fetchContainers(e,t.NextContinuationToken)},t=>{const s=t.response?.status,i=t.response?.statusText,n=e===l.K.Group?r.fc.GetJoinedGroupsError:r.fc.GetDocumentPlansError;this.loggers.usageLogger.logData(a.M.NotificationBar,a.M.ErrorBarShown),this.dispatcher.dispatchAction(new o.Q(n,s,i,void 0,t.response))})}fetchPermissionsWithTaskContext(e){const t=this.entityStoreSet.planStore.getPlan(e.planId),s=e.creationSource?.publication;if(null!=s||e.isProjectTask())if(null!=t){if(s){const e=s.id,o=t.container.externalId;this.fetchContainerPermissions([{containerId:o,publicationId:e}])}}else this.loggers.traceLogger.logTrace(507880210,g.k.Warning,`Plan is not in the store. [planId=${e.planId}][taskId=${e.id}]`);else this.loggers.traceLogger.logTrace(507880211,g.k.Warning,`Task is neither a published nor a project task. [planId=${e.planId}][taskId=${e.id}]`)}async fetchContainerPermissions(e){const t=await this.logicModuleProviders.permissionsModule();try{await t.fetchContainerPermissionsAsync(e)}catch(s){}}async fetchTaskPermissions(e){const t=await this.logicModuleProviders.permissionsModule();try{await t.fetchTaskPermissionsAsync(e)}catch(s){}}async deleteContainer(e){const t=this.entityStoreSet.containerMembershipStore.getPlanIdsForContainer(e.externalId),s=this.entityStoreSet.containerStore.getContainer(e.externalId);(await this.logicModuleProviders.containerModule()).deleteContainer(e).then(async()=>{if(e.containerType===l.K.Group&&this.dispatcher.dispatchAction(new i.Z(new h.Q("SharedComponents_DeleteUnifiedGroupToastTitle",this.entityStoreSet.appContextStore.getFlights().ShowHiddenToasts,[],s?.unifiedGroup.displayName??""))),t){(await this.logicModuleProviders.userModule()).removeDeletedPlansFromUserDetailsAsync(t).catch(()=>{})}},t=>{if(!(t.error instanceof d.U)){const s=t.response?.status,i=t.response?.statusText;this.loggers.usageLogger.logData(a.M.NotificationBar,a.M.ErrorBarShown),this.dispatcher.dispatchAction(new o.Q(r.fc.DeleteUnifiedGroupError,s,i,e.externalId,t.response))}})}async updateContainer(e){if(e.containerType===l.K.Roster){const t=await this.logicModuleProviders.containerModule(),s=await this.logicModuleProviders.notificationModule();t.setRosterContainerSensitivityLabelAsync(e).catch(t=>{if(!(t.error instanceof d.U)){const o=t.response?.status,i=t.response?.statusText;s.showErrorInternal(r.fc.SetRosterSensitivityLabelError,o,i,e.externalId,t.response)}})}}fetchCurrentUserToUSAndMsitGroupMembership(){const e=[c.YR];this.logicModuleProviders.unifiedGroupModule().then(t=>{t.checkCurrentUserToGroupsMembershipsAsync(e,u.Q.Priority5,!0).catch(()=>{})})}constructor(e,t,s,o){super(e,t,s,p.B.clientSettings,o)}}},19285:(e,t,s)=>{s.d(t,{Q:()=>i});var o=s(25324);class i extends o.l{constructor(e,t,s,o,n,r,a){super(i.actionType,e,t,s,o,n,r,a)}}i.actionType="SHOW_ERROR_NOTIFICATION"},36591:(e,t,s)=>{s.d(t,{C:()=>o});class o{constructor(e,t,s,o,i){this.dispatcher=e,this.logicModuleProviders=t,this.entityStoreSet=s,this.clientSettings=o,this.loggers=i}}}}]);
//# sourceMappingURL=containerac.d916f41c.chunk.js.map