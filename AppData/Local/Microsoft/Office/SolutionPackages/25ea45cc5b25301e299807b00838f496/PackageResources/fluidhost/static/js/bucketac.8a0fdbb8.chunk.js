"use strict";(self.webpackChunkfluidhost=self.webpackChunkfluidhost||[]).push([[25785],{1965:(e,t,s)=>{s.r(t),s.d(t,{BucketActionCreator:()=>f});var o=s(38752),n=s(36591),i=s(24723),r=s(52274),a=s(78332),c=s(64226),u=s(96891),l=s(27916),d=s(55491),m=s.n(d),h=s(98424);class f extends n.C{get name(){return u.M.BucketActionCreator}async fetchBucketsForPlan(e,t){(await this.logicModuleProviders.bucketModule()).fetchBucketsForPlanAsync(e,t).catch(async t=>{if(!(t.error instanceof r.U)){const s=await this.logicModuleProviders.notificationModule(),o=t.error?.name;if(o===l.Zg)s.showInfoInternal(c.fc.PlanConvertingInfo);else{const o=t.response?.status,n=t.response?.statusText;s.showErrorInternal(c.fc.GetBucketsForPlanError,o,n,e,t.response)}}})}async fetchBucket(e,t){(await this.logicModuleProviders.bucketModule()).fetchBucketAsync(e,t).catch(e=>{})}async createBucket(e){const t=await this.logicModuleProviders.bucketModule(),s=await this.logicModuleProviders.notificationModule();t.createBucketAsync(e).then(e=>{s.enqueueHiddenToastNotification("SharedComponents_CreateBucketToastTitle",[],e.title)}).catch(t=>{if(!(t.error instanceof r.U)){const o=t.error?.name;if(o===l.Zg)s.showInfoInternal(c.fc.PlanConvertingInfo);else{const o=t.response?.status,n=t.response?.statusText;s.showErrorInternal(c.fc.CreateBucketError,o,n,void 0,t.response,[e.title])}}})}async deleteBucket(e,t){const s=this.entityStoreSet.bucketStore.getBucket(e),o=s?.title??"";let n=!1;const d=this.entityStoreSet.taskStore.getTasksForBucket(e),m=await this.logicModuleProviders.notificationModule();null!=d&&d.forEach(async e=>{if(e.taskCreationSourceType!==i.w3.Publication){this.loggers.usageLogger.logData(this.name,u.M.DeleteTask);(await this.logicModuleProviders.taskModule()).deleteTaskAsync(e.id,e.itemVersion).catch(t=>{if(!(t.error instanceof r.U)){const s=t.error?.name;if(s===l.Zg)m.showInfoInternal(c.fc.PlanConvertingInfo);else{const s=t.response?.status,o=t.response?.statusText;m.showErrorInternal(c.fc.DeleteTaskError,s,o,e.id,t.response)}}})}else n=!0}),n&&this.loggers.usageLogger.logData(this.name,u.M.DeleteBucketWithPublishedTasks),this.loggers.usageLogger.logData(this.name,u.M.DeleteBucket);(await this.logicModuleProviders.bucketModule()).deleteBucketAsync(e,t).then(()=>{n?m.enqueueToastNotification("Toasts_DeleteBucketWithPublishedTasksToastTitle",[o]):m.enqueueHiddenToastNotification("SharedComponents_DeleteBucketToastTitle",[],o)}).catch(t=>{if(!(t.error instanceof r.U)){const s=t.error?.name;if(s===l.Zg)m.showInfoInternal(c.fc.PlanConvertingInfo);else{const s=t.response?.status,o=t.response?.statusText;m.showErrorInternal(c.fc.DeleteBucketError,s,o,e,t.response)}}}),null==s&&n&&e.indexOf(a.iR)>-1&&m.enqueueToastNotification("Toasts_DeleteUncategorizedBucketWithPublishedTasksToastTitle",[])}async updateBucket(e,t){const s=e.getDiff(t);(await this.logicModuleProviders.bucketModule()).updateBucketAsync(e,t).then(()=>{this.announceBucketUpdates(s,e)}).catch(async t=>{if(!(t.error instanceof r.U)){const s=await this.logicModuleProviders.notificationModule(),o=t.error?.name;if(o===l.Zg)s.showInfoInternal(c.fc.PlanConvertingInfo);else{const o=t.response?.status,n=t.response?.statusText;s.showErrorInternal(c.fc.UpdateBucketError,o,n,e.id,t.response)}}})}async announceBucketUpdates(e,t){const s=await this.logicModuleProviders.notificationModule();m()(e,(e,o)=>{switch(o){case"orderHint":const o=h.O.compareOrderHints(t.orderHint,e);o<0?s.enqueueHiddenToastNotification("SharedComponents_BucketMovedLeftToastTitle",[t.title]):o>0&&s.enqueueHiddenToastNotification("SharedComponents_BucketMovedRightToastTitle",[t.title]);break;case"title":s.enqueueHiddenToastNotification("SharedComponents_ChangeBucketTitleToastTitle",[e])}})}constructor(e,t,s,n){super(e,t,s,o.B.clientSettings,n)}}},27916:(e,t,s)=>{var o,n,i,r,a;s.d(t,{Zg:()=>c}),function(e){e[e.OK=0]="OK",e[e.ContainsDefaultReservedWords=1]="ContainsDefaultReservedWords",e[e.MissingPrefixSuffix=2]="MissingPrefixSuffix",e[e.ContainsCustomBlockedWords=3]="ContainsCustomBlockedWords",e[e.ContainsMSStandardBlockedWords=4]="ContainsMSStandardBlockedWords",e[e.MailNicknameNotOK=5]="MailNicknameNotOK",e[e.Unknown=6]="Unknown"}(o||(o={})),function(e){e.Forbidden="Forbidden",e.NotFound="NotFound",e.CreatePlanForGroupFailed="CreatePlanForGroupFailed",e.MaximumPlansOwnedByUserReached="MaximumPlansOwnedByUserReached",e.UnknownError="UnknownError"}(n||(n={})),function(e){e.Offline="Offline"}(i||(i={})),function(e){e.DynamicImportError="DynamicImportError"}(r||(r={})),function(e){e.MaximumProjectsOwnedByUser="MaximumProjectsOwnedByUser",e.MaximumProjectsSharedWithUser="MaximumProjectsSharedWithUser",e.MaximumTasksCreatedByUser="MaximumTasksCreatedByUser",e.MaximumTasksAssignedToUser="MaximumTasksAssignedToUser",e.MaximumTasksInProject="MaximumTasksInProject",e.MaximumActiveTasksInProject="MaximumActiveTasksInProject",e.MaximumBucketsInProject="MaximumBucketsInProject",e.MaximumUsersSharedWithProject="MaximumUsersSharedWithProject",e.MaximumReferencesOnTask=" MaximumReferencesOnTask",e.MaximumChecklistItemsOnTask="MaximumChecklistItemsOnTask",e.MaximumAssigneesInTasks="MaximumAssigneesInTasks",e.MaximumFavoritePlansForUser="MaximumFavoriteProjectsForUser",e.MaximumRecentPlansForUser="MaximumRecentProjectsForUser",e.MaximumContextsOnPlan="MaximumContextsOnPlan"}(a||(a={}));const c="ArchivedEntityCanNotBeUpdated"},36591:(e,t,s)=>{s.d(t,{C:()=>o});class o{constructor(e,t,s,o,n){this.dispatcher=e,this.logicModuleProviders=t,this.entityStoreSet=s,this.clientSettings=o,this.loggers=n}}}}]);
//# sourceMappingURL=bucketac.8a0fdbb8.chunk.js.map