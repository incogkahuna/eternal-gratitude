"use strict";(self.webpackChunkfluidhost=self.webpackChunkfluidhost||[]).push([[45590],{590:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Y});var r=i(70579),a=i(65043),o=i(55316),s=i(31025),n=i(77205),u=i(95996),m=i(60202),l=i(94845),h=i(66857),c=i(13261),p=i(33633);const T=(0,l.n)({button:{minWidth:"unset",...h.Pt.padding(c.L.spacingHorizontalSNudge),...h.Pt.borderRadius(c.L.borderRadiusCircular),...h.Pt.border("0"),"&:hover, &:active, &:hover:active":{backgroundColor:c.L.colorNeutralBackground5Hover,"@media (forced-colors:active)":{"& > p":{color:"HighlightText"},[`& .${p.gn.initials}`]:{color:"CanvasText"},backgroundColor:"Highlight"}}},editedDescription:{color:c.L.colorNeutralForeground3,fontSize:c.L.fontSizeBase200,fontWeight:c.L.fontWeightRegular,lineHeight:c.L.fontSizeBase400,...h.Pt.padding("0"),...h.Pt.margin("0"),marginLeft:c.L.spacingHorizontalXS}});function g(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}function d(e){const t=g(new Date(Date.now()));return new Date(t.setDate(t.getDate()+e))}function v(e,t){const i=d(t),r=g(e);return a=r,i.getTime()===a.getTime();var a}function A(e){return new Date(Date.now()).getFullYear()===e.getFullYear()}const W={weekday:"short",day:"numeric",month:"short"},f={...W,year:"numeric"},y={hour:"numeric",minute:"numeric"},w={day:"numeric",month:"short"},b={...w,year:"numeric"},D={day:"numeric",month:"long"},L={...D,year:"numeric"},N={...L,...y,hour12:!0},M=new Map([[1,W],[2,f],[3,{weekday:"short"}],[4,{weekday:"long"}],[5,y],[6,w],[7,b],[8,{day:"numeric",month:"numeric",year:"numeric"}],[10,D],[9,L],[11,N]]),C=new Map;function P(e,t){const i=`${e}:${t}`;if(C.has(i))return C.get(i);const r=M.get(t),a=new Intl.DateTimeFormat(e,r);return C.set(i,a),a}function k(e,t){const i=new Date(Date.now()).getTime()-e,r=Math.floor(i/6e4),{locale:a,longFormat:o,stringTable:s,authorName:n}=t;if(r<=2)return n&&s.relativeTimestampJustNowWithAuthor?s.relativeTimestampJustNowWithAuthor({authorName:n}):s.relativeTimestampJustNow;if(r<60)return n&&s.relativeTimestampMinutesAgoWithAuthor?s.relativeTimestampMinutesAgoWithAuthor({minutes:r,authorName:n}):s.relativeTimestampMinutesAgo({minutes:r});const u=new Date(e);if(function(e){return v(e,0)}(u)){const e=Math.floor(i/36e5);return n&&s.relativeTimestampHoursAgoWithAuthor?s.relativeTimestampHoursAgoWithAuthor({hours:e,authorName:n}):s.relativeTimestampHoursAgo({hours:e})}const m=P(a,5).format(u);if(function(e){return v(e,-1)}(u))return n&&s.relativeTimestampYesterdayWithAuthor?s.relativeTimestampYesterdayWithAuthor({time:m,authorName:n}):s.relativeTimestampYesterday({time:m});if(function(e,t){const i=d(-t),r=g(e),a=d(0);return r.getTime()>=Math.min(i.getTime(),a.getTime())&&r.getTime()<=Math.max(i.getTime(),a.getTime())}(u,7)){const e=P(a,o?4:3).format(u);return n&&s.relativeTimestampWithinLastDaysWithAuthor?s.relativeTimestampWithinLastDaysWithAuthor({day:e,time:m,authorName:n}):s.relativeTimestampWithinLastDays({day:e,time:m})}let l;l=o?A(u)?10:9:A(u)?6:7;const h=P(a,l).format(u);return n&&s.relativeTimestampGenericWithAuthor?s.relativeTimestampGenericWithAuthor({date:h,authorName:n}):h}var x=i(84087),H=i(20897);const Y=e=>{const{lastEditDetails:t,presenceColorProvider:i,pageLogger:l,tokenProvider:h,localization:c,stringTable:p,stylingProvider:g,compact:d,settingsProvider:v}=e,[A,W]=a.useState(),f=a.useRef(t),y=T(),w=(0,x.a)(),b=a.useCallback(e=>{w.current&&W(e)},[w]),D=a.useMemo(()=>new m.nl(i,b,l,h,v),[i,b,l,h,v]);a.useEffect(()=>{l&&!h&&(0,u.Ot)(l,{eventName:"MissingTokenProvider"})},[l,h]),a.useEffect(()=>{D.setPresenceColorProvider(i)},[D,i]),a.useEffect(()=>{const e=setInterval(N.current,6e4);return()=>{clearInterval(e),D.dispose()}},[D]);const L=()=>{const e=k(f.current.timestamp,{stringTable:p,locale:c.locale});D.updateCoauthor({id:t.user.id,name:t.user.name||t.user.id,description:e,activeStatus:!0,isGuest:t.user.isGuest})},N=a.useRef(L);N.current=L,a.useEffect(()=>{f.current=t,N.current()},[t]);const M=()=>{D.resetPresenceColorCache(),N.current()};return(0,H._)(g,"themeNameChanged",M),(0,H._)(g,"themePropertiesChanged",M),A?(0,r.jsx)(o.m,{content:(C=A.name,k(f.current.timestamp,{stringTable:{...p,relativeTimestampJustNowWithAuthor:p.relativeTimestampJustNowWithAuthorTooltipText,relativeTimestampMinutesAgoWithAuthor:p.relativeTimestampMinutesAgoWithAuthorTooltipText,relativeTimestampHoursAgoWithAuthor:p.relativeTimestampHoursAgoWithAuthorTooltipText,relativeTimestampYesterdayWithAuthor:p.relativeTimestampYesterdayWithAuthorTooltipText,relativeTimestampWithinLastDaysWithAuthor:p.relativeTimestampWithinLastDaysWithAuthorTooltipText,relativeTimestampGenericWithAuthor:p.relativeTimestampGenericWithAuthorTooltipText},locale:c.locale,authorName:C})),relationship:"label",positioning:"below",showDelay:0,children:(0,r.jsxs)(s.$,{"data-testid":"lastEditedTestId","aria-label":(e=>k(f.current.timestamp,{stringTable:{...p,relativeTimestampJustNowWithAuthor:p.relativeTimestampJustNowWithAuthorAriaLabel,relativeTimestampMinutesAgoWithAuthor:p.relativeTimestampMinutesAgoWithAuthorAriaLabel,relativeTimestampHoursAgoWithAuthor:p.relativeTimestampHoursAgoWithAuthorAriaLabel,relativeTimestampYesterdayWithAuthor:p.relativeTimestampYesterdayWithAuthorAriaLabel,relativeTimestampWithinLastDaysWithAuthor:p.relativeTimestampWithinLastDayWithAuthorAriaLabel,relativeTimestampGenericWithAuthor:p.relativeTimestampGenericWithAuthorAriaLabel},locale:c.locale,authorName:e,longFormat:!0}))(A.name),role:"status",className:y.button,children:[(0,r.jsx)(n.e,{color:"colorful",image:{src:A.imageUrl},name:A.name,size:20}),d?null:(0,r.jsx)("p",{className:y.editedDescription,children:A.description})]})}):null;var C}}}]);
//# sourceMappingURL=LazyLastEdited.c26fd2d8.chunk.js.map