/*! For license information please see 81540.874b6538.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkfluidhost=self.webpackChunkfluidhost||[]).push([[81540],{1262:(e,t,i)=>{i.d(t,{$d:()=>mt,Az:()=>vt,CP:()=>m,GD:()=>O,K9:()=>w,S:()=>_t,U6:()=>Ce,_A:()=>ht,h7:()=>o,hC:()=>bt,iA:()=>_,mz:()=>ft});var s=i(20112);const o="data-tabster",n="data-tabster-dummy",r=["a[href]","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","*[tabindex]","*[contenteditable]","details > summary","audio[controls]","video[controls]"].join(", "),l=1,a=2,d=3,u=0,c=1,h=2,m={Source:0,Target:1},_={Both:0,Vertical:1,Horizontal:2,Grid:3,GridLinear:4},v=1,f=2,b=3,p=4,g=5,E=6,y=7,T=8,w={Unlimited:0,Limited:1,LimitedTrapFocus:2},F=1,C=2;function k(e,t){var i;return null===(i=e.storageEntry(t))||void 0===i?void 0:i.tabster}function I(e,t,i){var s,n;const r=i||e._noop?void 0:t.getAttribute(o);let l,a=e.storageEntry(t);if(r){if(r===(null===(s=null===a||void 0===a?void 0:a.attr)||void 0===s?void 0:s.string))return;try{const e=JSON.parse(r);if("object"!==typeof e)throw new Error(`Value is not a JSON object, got '${r}'.`);l={string:r,object:e}}catch(h){0}}else if(!a)return;a||(a=e.storageEntry(t,!0)),a.tabster||(a.tabster={});const d=a.tabster||{},u=(null===(n=a.attr)||void 0===n?void 0:n.object)||{},c=(null===l||void 0===l?void 0:l.object)||{};for(const o of Object.keys(u))if(!c[o]){if("root"===o){const t=d[o];t&&e.root.onRoot(t,!0)}switch(o){case"deloser":case"root":case"groupper":case"modalizer":case"restorer":case"mover":const i=d[o];i&&(i.dispose(),delete d[o]);break;case"observed":delete d[o],e.observedElement&&e.observedElement.onObservedElementUpdate(t);break;case"focusable":case"outline":case"uncontrolled":case"sys":delete d[o]}}for(const o of Object.keys(c)){const i=c.sys;switch(o){case"deloser":d.deloser?d.deloser.setProps(c.deloser):e.deloser&&(d.deloser=e.deloser.createDeloser(t,c.deloser));break;case"root":d.root?d.root.setProps(c.root):d.root=e.root.createRoot(t,c.root,i),e.root.onRoot(d.root);break;case"modalizer":d.modalizer?d.modalizer.setProps(c.modalizer):e.modalizer&&(d.modalizer=e.modalizer.createModalizer(t,c.modalizer,i));break;case"restorer":d.restorer?d.restorer.setProps(c.restorer):e.restorer&&c.restorer&&(d.restorer=e.restorer.createRestorer(t,c.restorer));break;case"focusable":d.focusable=c.focusable;break;case"groupper":d.groupper?d.groupper.setProps(c.groupper):e.groupper&&(d.groupper=e.groupper.createGroupper(t,c.groupper,i));break;case"mover":d.mover?d.mover.setProps(c.mover):e.mover&&(d.mover=e.mover.createMover(t,c.mover,i));break;case"observed":e.observedElement&&(d.observed=c.observed,e.observedElement.onObservedElementUpdate(t));break;case"uncontrolled":d.uncontrolled=c.uncontrolled;break;case"outline":e.outline&&(d.outline=c.outline);break;case"sys":d.sys=c.sys;break;default:console.error(`Unknown key '${o}' in data-tabster attribute value.`)}}l?a.attr=l:(0===Object.keys(d).length&&(delete a.tabster,delete a.attr),e.storageEntry(t,!1))}const O="tabster:movefocus",D="tabster:mover:movefocus",A="tabster:mover:memorized-element",M="tabster:groupper:movefocus",R="tabster:restorer:restore-focus",P="undefined"!==typeof CustomEvent?CustomEvent:function(){};class N extends P{constructor(e,t){super(e,{bubbles:!0,cancelable:!0,composed:!0,detail:t}),this.details=t}}class x extends N{constructor(e){super("tabster:focusin",e)}}class S extends N{constructor(e){super("tabster:focusout",e)}}class L extends N{constructor(e){super(O,e)}}class W extends N{constructor(e){super("tabster:mover:state",e)}}class z extends N{constructor(e){super("tabster:modalizer:active",e)}}class B extends N{constructor(e){super("tabster:modalizer:inactive",e)}}class U extends N{constructor(){super(R)}}class K extends N{constructor(e){super("tabster:root:focus",e)}}class V extends N{constructor(e){super("tabster:root:blur",e)}}const G={createMutationObserver:e=>new MutationObserver(e),createTreeWalker:(e,t,i,s)=>e.createTreeWalker(t,i,s),getParentNode:e=>e?e.parentNode:null,getParentElement:e=>e?e.parentElement:null,nodeContains:(e,t)=>!(!t||!(null===e||void 0===e?void 0:e.contains(t))),getActiveElement:e=>e.activeElement,querySelector:(e,t)=>e.querySelector(t),querySelectorAll:(e,t)=>Array.prototype.slice.call(e.querySelectorAll(t),0),getElementById:(e,t)=>e.getElementById(t),getFirstChild:e=>(null===e||void 0===e?void 0:e.firstChild)||null,getLastChild:e=>(null===e||void 0===e?void 0:e.lastChild)||null,getNextSibling:e=>(null===e||void 0===e?void 0:e.nextSibling)||null,getPreviousSibling:e=>(null===e||void 0===e?void 0:e.previousSibling)||null,getFirstElementChild:e=>(null===e||void 0===e?void 0:e.firstElementChild)||null,getLastElementChild:e=>(null===e||void 0===e?void 0:e.lastElementChild)||null,getNextElementSibling:e=>(null===e||void 0===e?void 0:e.nextElementSibling)||null,getPreviousElementSibling:e=>(null===e||void 0===e?void 0:e.previousElementSibling)||null,appendChild:(e,t)=>e.appendChild(t),insertBefore:(e,t,i)=>e.insertBefore(t,i),getSelection:e=>{var t;return(null===(t=e.ownerDocument)||void 0===t?void 0:t.getSelection())||null},getElementsByName:(e,t)=>e.ownerDocument.getElementsByName(t)};let j;const H="undefined"!==typeof DOMRect?DOMRect:class{constructor(e,t,i,s){this.left=e||0,this.top=t||0,this.right=(e||0)+(i||0),this.bottom=(t||0)+(s||0)}};let Q=0;try{document.createTreeWalker(document,NodeFilter.SHOW_ELEMENT),j=!1}catch(gt){j=!0}function J(e){const t=e();let i=t.__tabsterInstanceContext;return i||(i={elementByUId:{},basics:{Promise:t.Promise||void 0,WeakRef:t.WeakRef||void 0},containerBoundingRectCache:{},lastContainerBoundingRectCacheId:0,fakeWeakRefs:[],fakeWeakRefsStarted:!1},t.__tabsterInstanceContext=i),i}class q{constructor(e){this._target=e}deref(){return this._target}static cleanup(e,t){return!e._target||!(!t&&le(e._target.ownerDocument,e._target))&&(delete e._target,!0)}}class Y{constructor(e,t,i){const s=J(e);let o;s.WeakRef?o=new s.WeakRef(t):(o=new q(t),s.fakeWeakRefs.push(o)),this._ref=o,this._data=i}get(){const e=this._ref;let t;return e&&(t=e.deref(),t||delete this._ref),t}getData(){return this._data}}function $(e,t){const i=J(e);i.fakeWeakRefs=i.fakeWeakRefs.filter(e=>!q.cleanup(e,t))}function X(e){const t=J(e);t.fakeWeakRefsStarted||(t.fakeWeakRefsStarted=!0,t.WeakRef=function(e){return e.basics.WeakRef}(t)),t.fakeWeakRefsTimer||(t.fakeWeakRefsTimer=e().setTimeout(()=>{t.fakeWeakRefsTimer=void 0,$(e),X(e)},12e4))}function Z(e,t,i){if(t.nodeType!==Node.ELEMENT_NODE)return;const s=j?i:{acceptNode:i};return G.createTreeWalker(e,t,NodeFilter.SHOW_ELEMENT,s,!1)}function ee(e,t){let i=t.__tabsterCacheId;const s=J(e),o=i?s.containerBoundingRectCache[i]:void 0;if(o)return o.rect;const n=t.ownerDocument&&t.ownerDocument.documentElement;if(!n)return new H;let r=0,l=0,a=n.clientWidth,d=n.clientHeight;if(t!==n){const e=t.getBoundingClientRect();r=Math.max(r,e.left),l=Math.max(l,e.top),a=Math.min(a,e.right),d=Math.min(d,e.bottom)}const u=new H(r<a?r:-1,l<d?l:-1,r<a?a-r:0,l<d?d-l:0);return i||(i="r-"+ ++s.lastContainerBoundingRectCacheId,t.__tabsterCacheId=i),s.containerBoundingRectCache[i]={rect:u,element:t},s.containerBoundingRectCacheTimer||(s.containerBoundingRectCacheTimer=window.setTimeout(()=>{s.containerBoundingRectCacheTimer=void 0;for(const e of Object.keys(s.containerBoundingRectCache))delete s.containerBoundingRectCache[e].element.__tabsterCacheId;s.containerBoundingRectCache={}},50)),u}function te(e,t,i){const s=ie(t);if(!s)return!1;const o=ee(e,s),n=t.getBoundingClientRect(),r=n.height*(1-i),l=Math.max(0,o.top-n.top)+Math.max(0,n.bottom-o.bottom);return 0===l||l<=r}function ie(e){const t=e.ownerDocument;if(t){for(let t=G.getParentElement(e);t;t=G.getParentElement(t))if(t.scrollWidth>t.clientWidth||t.scrollHeight>t.clientHeight)return t;return t.documentElement}return null}function se(e){return!!e.__shouldIgnoreFocus}function oe(e){const t=new Uint32Array(4);if(e.crypto&&e.crypto.getRandomValues)e.crypto.getRandomValues(t);else if(e.msCrypto&&e.msCrypto.getRandomValues)e.msCrypto.getRandomValues(t);else for(let s=0;s<t.length;s++)t[s]=4294967295*Math.random();const i=[];for(let s=0;s<t.length;s++)i.push(t[s].toString(36));return i.push("|"),i.push((++Q).toString(36)),i.push("|"),i.push(Date.now().toString(36)),i.join("")}function ne(e,t){const i=J(e);let s=t.__tabsterElementUID;return s||(s=t.__tabsterElementUID=oe(e())),!i.elementByUId[s]&&le(t.ownerDocument,t)&&(i.elementByUId[s]=new Y(e,t)),s}function re(e,t){const i=J(e);for(const s of Object.keys(i.elementByUId)){const e=i.elementByUId[s],o=e&&e.get();o&&t&&!G.nodeContains(t,o)||delete i.elementByUId[s]}}function le(e,t){return G.nodeContains(null===e||void 0===e?void 0:e.body,t)}function ae(e,t){const i=e.matches||e.matchesSelector||e.msMatchesSelector||e.webkitMatchesSelector;return i&&i.call(e,t)}function de(e){const t=J(e);if(t.basics.Promise)return t.basics.Promise;throw new Error("No Promise defined.")}let ue=0;class ce{constructor(e,t,i){const s=e.getWindow;this._tabster=e,this._element=new Y(s,t),this._props={...i},this.id="i"+ ++ue}getElement(){return this._element.get()}getProps(){return this._props}setProps(e){this._props={...e}}}class he{constructor(e,t,i,o,r){var l;this._focusIn=e=>{if(this._fixedTarget){const e=this._fixedTarget.get();return void(e&&(0,s.kG)(e))}const t=this.input;if(this.onFocusIn&&t){const i=e.relatedTarget;this.onFocusIn(this,this._isBackward(!0,t,i),i)}},this._focusOut=e=>{if(this._fixedTarget)return;this.useDefaultAction=!1;const t=this.input;if(this.onFocusOut&&t){const i=e.relatedTarget;this.onFocusOut(this,this._isBackward(!1,t,i),i)}};const a=e(),d=a.document.createElement("i");d.tabIndex=0,d.setAttribute("role","none"),d.setAttribute(n,""),d.setAttribute("aria-hidden","true");const u=d.style;u.position="fixed",u.width=u.height="1px",u.opacity="0.001",u.zIndex="-1",u.setProperty("content-visibility","hidden"),function(e){e.__shouldIgnoreFocus=!0}(d),this.input=d,this.isFirst=i.isFirst,this.isOutside=t,this._isPhantom=null!==(l=i.isPhantom)&&void 0!==l&&l,this._fixedTarget=r,d.addEventListener("focusin",this._focusIn),d.addEventListener("focusout",this._focusOut),d.__tabsterDummyContainer=o,this._isPhantom&&(this._disposeTimer=a.setTimeout(()=>{delete this._disposeTimer,this.dispose()},0),this._clearDisposeTimeout=()=>{this._disposeTimer&&(a.clearTimeout(this._disposeTimer),delete this._disposeTimer),delete this._clearDisposeTimeout})}dispose(){var e;this._clearDisposeTimeout&&this._clearDisposeTimeout();const t=this.input;t&&(delete this._fixedTarget,delete this.onFocusIn,delete this.onFocusOut,delete this.input,t.removeEventListener("focusin",this._focusIn),t.removeEventListener("focusout",this._focusOut),delete t.__tabsterDummyContainer,null===(e=G.getParentNode(t))||void 0===e||e.removeChild(t))}setTopLeft(e,t){var i;const s=null===(i=this.input)||void 0===i?void 0:i.style;s&&(s.top=`${e}px`,s.left=`${t}px`)}_isBackward(e,t,i){return e&&!i?!this.isFirst:!!(i&&t.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_FOLLOWING)}}const me=1,_e=2,ve=3,fe=4;class be{constructor(e,t,i,s,o,n){this._element=t,this._instance=new ge(e,t,this,i,s,o,n)}_setHandlers(e,t){this._onFocusIn=e,this._onFocusOut=t}moveOut(e){var t;null===(t=this._instance)||void 0===t||t.moveOut(e)}moveOutWithDefaultAction(e,t){var i;null===(i=this._instance)||void 0===i||i.moveOutWithDefaultAction(e,t)}getHandler(e){return e?this._onFocusIn:this._onFocusOut}setTabbable(e){var t;null===(t=this._instance)||void 0===t||t.setTabbable(this,e)}dispose(){this._instance&&(this._instance.dispose(this),delete this._instance),delete this._onFocusIn,delete this._onFocusOut}static moveWithPhantomDummy(e,t,i,o,n){const r=new he(e.getWindow,!0,{isPhantom:!0,isFirst:!0}).input;if(r){let l,a;if("BODY"===t.tagName)l=t,a=i&&o||!i&&!o?G.getFirstElementChild(t):null;else{let s,n;i&&(!o||o&&!e.focusable.isFocusable(t,!1,!0,!0))?(l=t,a=o?t.firstElementChild:null):(l=G.getParentElement(t),a=i&&o||!i&&!o?t:G.getNextElementSibling(t));do{s=i&&o||!i&&!o?G.getPreviousElementSibling(a):a,n=Fe(s),n===t?a=i&&o||!i&&!o?s:G.getNextElementSibling(s):n=null}while(n)}(null===l||void 0===l?void 0:l.dispatchEvent(new L({by:"root",owner:l,next:null,relatedEvent:n})))&&(G.insertBefore(l,r,a),(0,s.kG)(r))}}static addPhantomDummyWithTarget(e,t,i,s){const o=new he(e.getWindow,!0,{isPhantom:!0,isFirst:!0},void 0,new Y(e.getWindow,s)).input;if(o){let e,s;t.querySelector(r)&&!i?(e=t,s=G.getFirstElementChild(t)):(e=G.getParentElement(t),s=i?t:G.getNextElementSibling(t)),e&&G.insertBefore(e,o,s)}}}class pe{constructor(e){this._updateQueue=new Set,this._lastUpdateQueueTime=0,this._changedParents=new WeakSet,this._dummyElements=[],this._dummyCallbacks=new WeakMap,this._domChanged=e=>{var t;this._changedParents.has(e)||(this._changedParents.add(e),this._updateDummyInputsTimer||(this._updateDummyInputsTimer=null===(t=this._win)||void 0===t?void 0:t.call(this).setTimeout(()=>{delete this._updateDummyInputsTimer;for(const e of this._dummyElements){const t=e.get();if(t){const e=this._dummyCallbacks.get(t);if(e){const i=G.getParentNode(t);i&&!this._changedParents.has(i)||e()}}}this._changedParents=new WeakSet},100)))},this._win=e}add(e,t){!this._dummyCallbacks.has(e)&&this._win&&(this._dummyElements.push(new Y(this._win,e)),this._dummyCallbacks.set(e,t),this.domChanged=this._domChanged)}remove(e){this._dummyElements=this._dummyElements.filter(t=>{const i=t.get();return i&&i!==e}),this._dummyCallbacks.delete(e),0===this._dummyElements.length&&delete this.domChanged}dispose(){var e;const t=null===(e=this._win)||void 0===e?void 0:e.call(this);this._updateTimer&&(null===t||void 0===t||t.clearTimeout(this._updateTimer),delete this._updateTimer),this._updateDummyInputsTimer&&(null===t||void 0===t||t.clearTimeout(this._updateDummyInputsTimer),delete this._updateDummyInputsTimer),this._changedParents=new WeakSet,this._dummyCallbacks=new WeakMap,this._dummyElements=[],this._updateQueue.clear(),delete this.domChanged,delete this._win}updatePositions(e){this._win&&(this._updateQueue.add(e),this._lastUpdateQueueTime=Date.now(),this._scheduledUpdatePositions())}_scheduledUpdatePositions(){var e;this._updateTimer||(this._updateTimer=null===(e=this._win)||void 0===e?void 0:e.call(this).setTimeout(()=>{if(delete this._updateTimer,this._lastUpdateQueueTime+100<=Date.now()){const e=new Map,t=[];for(const i of this._updateQueue)t.push(i(e));this._updateQueue.clear();for(const i of t)i();e.clear()}else this._scheduledUpdatePositions()},100))}}class ge{constructor(e,t,i,o,n,r,l){this._wrappers=[],this._isOutside=!1,this._transformElements=new Set,this._onFocusIn=(e,t,i)=>{this._onFocus(!0,e,t,i)},this._onFocusOut=(e,t,i)=>{this._onFocus(!1,e,t,i)},this.moveOut=e=>{var t;const i=this._firstDummy,o=this._lastDummy;if(i&&o){this._ensurePosition();const n=i.input,r=o.input,l=null===(t=this._element)||void 0===t?void 0:t.get();if(n&&r&&l){let t;e?(n.tabIndex=0,t=n):(r.tabIndex=0,t=r),t&&(0,s.kG)(t)}}},this.moveOutWithDefaultAction=(e,t)=>{var i;const o=this._firstDummy,n=this._lastDummy;if(o&&n){this._ensurePosition();const r=o.input,l=n.input,a=null===(i=this._element)||void 0===i?void 0:i.get();if(r&&l&&a){let i;e?!o.isOutside&&this._tabster.focusable.isFocusable(a,!0,!0,!0)?i=a:(o.useDefaultAction=!0,r.tabIndex=0,i=r):(n.useDefaultAction=!0,l.tabIndex=0,i=l),i&&a.dispatchEvent(new L({by:"root",owner:a,next:null,relatedEvent:t}))&&(0,s.kG)(i)}}},this.setTabbable=(e,t)=>{var i,s;for(const n of this._wrappers)if(n.manager===e){n.tabbable=t;break}const o=this._getCurrent();if(o){const e=o.tabbable?0:-1;let t=null===(i=this._firstDummy)||void 0===i?void 0:i.input;t&&(t.tabIndex=e),t=null===(s=this._lastDummy)||void 0===s?void 0:s.input,t&&(t.tabIndex=e)}},this._addDummyInputs=()=>{this._addTimer||(this._addTimer=this._getWindow().setTimeout(()=>{delete this._addTimer,this._ensurePosition(),this._addTransformOffsets()},0))},this._addTransformOffsets=()=>{this._tabster._dummyObserver.updatePositions(this._computeTransformOffsets)},this._computeTransformOffsets=e=>{var t,i;const s=(null===(t=this._firstDummy)||void 0===t?void 0:t.input)||(null===(i=this._lastDummy)||void 0===i?void 0:i.input),o=this._transformElements,n=new Set;let r=0,l=0;const a=this._getWindow();for(let d=s;d&&d.nodeType===Node.ELEMENT_NODE;d=G.getParentElement(d)){let t=e.get(d);if(void 0===t){const i=a.getComputedStyle(d).transform;i&&"none"!==i&&(t={scrollTop:d.scrollTop,scrollLeft:d.scrollLeft}),e.set(d,t||null)}t&&(n.add(d),o.has(d)||d.addEventListener("scroll",this._addTransformOffsets),r+=t.scrollTop,l+=t.scrollLeft)}for(const d of o)n.has(d)||d.removeEventListener("scroll",this._addTransformOffsets);return this._transformElements=n,()=>{var e,t;null===(e=this._firstDummy)||void 0===e||e.setTopLeft(r,l),null===(t=this._lastDummy)||void 0===t||t.setTopLeft(r,l)}};const a=t.get();if(!a)throw new Error("No element");this._tabster=e,this._getWindow=e.getWindow,this._callForDefaultAction=l;const d=a.__tabsterDummy;if((d||this)._wrappers.push({manager:i,priority:o,tabbable:!0}),d)return d;a.__tabsterDummy=this;const u=null===n||void 0===n?void 0:n.dummyInputsPosition,c=a.tagName;this._isOutside=u?u===C:(r||"UL"===c||"OL"===c||"TABLE"===c)&&!("LI"===c||"TD"===c||"TH"===c),this._firstDummy=new he(this._getWindow,this._isOutside,{isFirst:!0},t),this._lastDummy=new he(this._getWindow,this._isOutside,{isFirst:!1},t);const h=this._firstDummy.input;h&&e._dummyObserver.add(h,this._addDummyInputs),this._firstDummy.onFocusIn=this._onFocusIn,this._firstDummy.onFocusOut=this._onFocusOut,this._lastDummy.onFocusIn=this._onFocusIn,this._lastDummy.onFocusOut=this._onFocusOut,this._element=t,this._addDummyInputs()}dispose(e,t){var i,s,o,n;if(0===(this._wrappers=this._wrappers.filter(i=>i.manager!==e&&!t)).length){delete(null===(i=this._element)||void 0===i?void 0:i.get()).__tabsterDummy;for(const i of this._transformElements)i.removeEventListener("scroll",this._addTransformOffsets);this._transformElements.clear();const e=this._getWindow();this._addTimer&&(e.clearTimeout(this._addTimer),delete this._addTimer);const t=null===(s=this._firstDummy)||void 0===s?void 0:s.input;t&&this._tabster._dummyObserver.remove(t),null===(o=this._firstDummy)||void 0===o||o.dispose(),null===(n=this._lastDummy)||void 0===n||n.dispose()}}_onFocus(e,t,i,s){var o;const n=this._getCurrent();!n||t.useDefaultAction&&!this._callForDefaultAction||null===(o=n.manager.getHandler(e))||void 0===o||o(t,i,s)}_getCurrent(){return this._wrappers.sort((e,t)=>e.tabbable!==t.tabbable?e.tabbable?-1:1:e.priority-t.priority),this._wrappers[0]}_ensurePosition(){var e,t,i;const s=null===(e=this._element)||void 0===e?void 0:e.get(),o=null===(t=this._firstDummy)||void 0===t?void 0:t.input,n=null===(i=this._lastDummy)||void 0===i?void 0:i.input;if(s&&o&&n)if(this._isOutside){const e=G.getParentNode(s);if(e){const t=G.getNextSibling(s);t!==n&&G.insertBefore(e,n,t),G.getPreviousElementSibling(s)!==o&&G.insertBefore(e,o,s)}}else{G.getLastElementChild(s)!==n&&G.appendChild(s,n);const e=G.getFirstElementChild(s);e&&e!==o&&e.parentNode&&G.insertBefore(e.parentNode,o,e)}}}function Ee(e){let t=null;for(let i=G.getLastElementChild(e);i;i=G.getLastElementChild(i))t=i;return t||void 0}function ye(e,t,i,s){const o=e.storageEntry(t,!0);let n=!1;if(!o.aug){if(void 0===s)return n;o.aug={}}if(void 0===s){if(i in o.aug){const e=o.aug[i];delete o.aug[i],null===e?t.removeAttribute(i):t.setAttribute(i,e),n=!0}}else{let e;i in o.aug||(e=t.getAttribute(i)),void 0!==e&&e!==s&&(o.aug[i]=e,null===s?t.removeAttribute(i):t.setAttribute(i,s),n=!0)}return void 0===s&&0===Object.keys(o.aug).length&&(delete o.aug,e.storageEntry(t,!1)),n}function Te(e){var t,i;const s=e.ownerDocument,o=null===(t=s.defaultView)||void 0===t?void 0:t.getComputedStyle(e);if(null===e.offsetParent&&s.body!==e&&"fixed"!==(null===o||void 0===o?void 0:o.position))return!0;if("hidden"===(null===o||void 0===o?void 0:o.visibility))return!0;if("fixed"===(null===o||void 0===o?void 0:o.position)){if("none"===o.display)return!0;if(null===(null===(i=e.parentElement)||void 0===i?void 0:i.offsetParent)&&s.body!==e.parentElement)return!0}return!1}function we(e){return"INPUT"===e.tagName&&!!e.name&&"radio"===e.type}function Fe(e){var t;return(null===(t=null===e||void 0===e?void 0:e.__tabsterDummyContainer)||void 0===t?void 0:t.get())||null}function Ce(e,t){const i=JSON.stringify(e);return!0===t?i:{[o]:i}}function ke(e,t,i){let s;if(i){const t=e.getAttribute(o);if(t)try{s=JSON.parse(t)}catch(gt){0}}s||(s={}),function(e,t){for(const i of Object.keys(t)){const s=t[i];s?e[i]=s:delete e[i]}}(s,t),Object.keys(s).length>0?e.setAttribute(o,Ce(s,!0)):e.removeAttribute(o)}class Ie extends be{constructor(e,t,i,o){super(e,t,me,o,void 0,!0),this._onDummyInputFocus=e=>{var t;if(e.useDefaultAction)this._setFocused(!1);else{this._tabster.keyboardNavigation.setNavigatingWithKeyboard(!0);const i=this._element.get();if(i){this._setFocused(!0);const t=this._tabster.focusedElement.getFirstOrLastTabbable(e.isFirst,{container:i,ignoreAccessibility:!0});if(t)return void(0,s.kG)(t)}null===(t=e.input)||void 0===t||t.blur()}},this._setHandlers(this._onDummyInputFocus),this._tabster=e,this._setFocused=i}}class Oe extends ce{constructor(e,t,i,o,n){super(e,t,o),this._isFocused=!1,this._setFocused=e=>{var t;if(this._setFocusedTimer&&(this._tabster.getWindow().clearTimeout(this._setFocusedTimer),delete this._setFocusedTimer),this._isFocused===e)return;const i=this._element.get();i&&(e?(this._isFocused=!0,null===(t=this._dummyManager)||void 0===t||t.setTabbable(!1),i.dispatchEvent(new K({element:i}))):this._setFocusedTimer=this._tabster.getWindow().setTimeout(()=>{var e;delete this._setFocusedTimer,this._isFocused=!1,null===(e=this._dummyManager)||void 0===e||e.setTabbable(!0),i.dispatchEvent(new V({element:i}))},0))},this._onFocusIn=e=>{const t=this._tabster.getParent,i=this._element.get();let s=e.composedPath()[0];do{if(s===i)return void this._setFocused(!0);s=s&&t(s)}while(s)},this._onFocusOut=()=>{this._setFocused(!1)},this._onDispose=i;const r=e.getWindow;this.uid=ne(r,t),this._sys=n,(e.controlTab||e.rootDummyInputs)&&this.addDummyInputs();const l=r().document;l.addEventListener(s.Oy,this._onFocusIn),l.addEventListener(s.RY,this._onFocusOut),this._add()}addDummyInputs(){this._dummyManager||(this._dummyManager=new Ie(this._tabster,this._element,this._setFocused,this._sys))}dispose(){var e;this._onDispose(this);const t=this._tabster.getWindow(),i=t.document;i.removeEventListener(s.Oy,this._onFocusIn),i.removeEventListener(s.RY,this._onFocusOut),this._setFocusedTimer&&(t.clearTimeout(this._setFocusedTimer),delete this._setFocusedTimer),null===(e=this._dummyManager)||void 0===e||e.dispose(),this._remove()}moveOutWithDefaultAction(e,t){const i=this._dummyManager;if(i)i.moveOutWithDefaultAction(e,t);else{const i=this.getElement();i&&Ie.moveWithPhantomDummy(this._tabster,i,!0,e,t)}}_add(){0}_remove(){0}}class De{constructor(e,t){this._autoRootWaiting=!1,this._roots={},this._forceDummy=!1,this.rootById={},this._autoRootCreate=()=>{var e;const t=this._win().document,i=t.body;if(i){this._autoRootUnwait(t);const s=this._autoRoot;if(s)return ke(i,{root:s},!0),I(this._tabster,i),null===(e=k(this._tabster,i))||void 0===e?void 0:e.root}else this._autoRootWaiting||(this._autoRootWaiting=!0,t.addEventListener("readystatechange",this._autoRootCreate))},this._onRootDispose=e=>{delete this._roots[e.id]},this._tabster=e,this._win=e.getWindow,this._autoRoot=t,e.queueInit(()=>{this._autoRoot&&this._autoRootCreate()})}_autoRootUnwait(e){e.removeEventListener("readystatechange",this._autoRootCreate),this._autoRootWaiting=!1}dispose(){const e=this._win();this._autoRootUnwait(e.document),delete this._autoRoot,Object.keys(this._roots).forEach(e=>{this._roots[e]&&(this._roots[e].dispose(),delete this._roots[e])}),this.rootById={}}createRoot(e,t,i){const s=new Oe(this._tabster,e,this._onRootDispose,t,i);return this._roots[s.id]=s,this._forceDummy&&s.addDummyInputs(),s}addDummyInputs(){this._forceDummy=!0;const e=this._roots;for(const t of Object.keys(e))e[t].addDummyInputs()}static getRootByUId(e,t){const i=e().__tabsterInstance;return i&&i.root.rootById[t]}static getTabsterContext(e,t,i){var s,o,n,r;if(void 0===i&&(i={}),!t.ownerDocument)return;const{checkRtl:l,referenceElement:a}=i,d=e.getParent;let u,c,h,m;e.drainInitQueue();let _,v,f,b,p=!1,g=a||t;const E={};for(;g&&(!u||l);){const i=k(e,g);if(l&&void 0===f){const e=g.dir;e&&(f="rtl"===e.toLowerCase())}if(!i){g=d(g);continue}const r=g.tagName;(i.uncontrolled||"IFRAME"===r||"WEBVIEW"===r)&&e.focusable.isVisible(g)&&(b=g),m||!(null===(s=i.focusable)||void 0===s?void 0:s.excludeFromMover)||h||(p=!0);const a=i.modalizer,y=i.groupper,T=i.mover;!c&&a&&(c=a),h||!y||c&&!a||(c?(!y.isActive()&&y.getProps().tabbability&&c.userId!==(null===(o=e.modalizer)||void 0===o?void 0:o.activeId)&&(c=void 0,h=y),v=y):h=y),m||!T||c&&!a||y&&g===t||!g.contains(t)||(m=T,_=!!h&&h!==y),i.root&&(u=i.root),(null===(n=i.focusable)||void 0===n?void 0:n.ignoreKeydown)&&Object.assign(E,i.focusable.ignoreKeydown),g=d(g)}if(!u){const i=e.root;i._autoRoot&&(null===(r=t.ownerDocument)||void 0===r?void 0:r.body)&&(u=i._autoRootCreate())}h&&!m&&(_=!0);return u?{root:u,modalizer:c,groupper:h,mover:m,groupperBeforeMover:_,modalizerInGroupper:v,rtl:l?!!f:void 0,uncontrolled:b,excludedFromMover:p,ignoreKeydown:e=>!!E[e.key]}:void 0}static getRoot(e,t){var i;const s=e.getParent;for(let o=t;o;o=s(o)){const t=null===(i=k(e,o))||void 0===i?void 0:i.root;if(t)return t}}onRoot(e,t){t?delete this.rootById[e.uid]:this.rootById[e.uid]=e}}class Ae{constructor(){this._callbacks=[]}dispose(){this._callbacks=[],delete this._val}subscribe(e){const t=this._callbacks;t.indexOf(e)<0&&t.push(e)}subscribeFirst(e){const t=this._callbacks,i=t.indexOf(e);i>=0&&t.splice(i,1),t.unshift(e)}unsubscribe(e){const t=this._callbacks.indexOf(e);t>=0&&this._callbacks.splice(t,1)}setVal(e,t){this._val!==e&&(this._val=e,this._callCallbacks(e,t))}getVal(){return this._val}trigger(e,t){this._callCallbacks(e,t)}_callCallbacks(e,t){this._callbacks.forEach(i=>i(e,t))}}class Me{constructor(e){this._tabster=e}dispose(){}getProps(e){const t=k(this._tabster,e);return t&&t.focusable||{}}isFocusable(e,t,i,s){return!(!ae(e,r)||!t&&-1===e.tabIndex)&&((i||this.isVisible(e))&&(s||this.isAccessible(e)))}isVisible(e){if(!e.ownerDocument||e.nodeType!==Node.ELEMENT_NODE)return!1;if(Te(e))return!1;const t=e.ownerDocument.body.getBoundingClientRect();return 0!==t.width||0!==t.height}isAccessible(e){var t;for(let i=e;i;i=G.getParentElement(i)){const e=k(this._tabster,i);if(this._isHidden(i))return!1;if(!(null===(t=null===e||void 0===e?void 0:e.focusable)||void 0===t?void 0:t.ignoreAriaDisabled)&&this._isDisabled(i))return!1}return!0}_isDisabled(e){return e.hasAttribute("disabled")}_isHidden(e){var t;const i=e.getAttribute("aria-hidden");return!(!i||"true"!==i.toLowerCase()||(null===(t=this._tabster.modalizer)||void 0===t?void 0:t.isAugmented(e)))}findFirst(e,t){return this.findElement({...e},t)}findLast(e,t){return this.findElement({isBackward:!0,...e},t)}findNext(e,t){return this.findElement({...e},t)}findPrev(e,t){return this.findElement({...e,isBackward:!0},t)}findDefault(e,t){return this.findElement({...e,acceptCondition:t=>this.isFocusable(t,e.includeProgrammaticallyFocusable)&&!!this.getProps(t).isDefault},t)||null}findAll(e){return this._findElements(!0,e)||[]}findElement(e,t){const i=this._findElements(!1,e,t);return i?i[0]:i}_findElements(e,t,i){var s,o,n;const{container:r,currentElement:l=null,includeProgrammaticallyFocusable:a,useActiveModalizer:d,ignoreAccessibility:u,modalizerId:c,isBackward:h,onElement:m}=t;i||(i={});const _=[];let{acceptCondition:v}=t;const f=!!v;if(!r)return null;v||(v=e=>this.isFocusable(e,a,!1,u));const b={container:r,modalizerUserId:void 0===c&&d?null===(s=this._tabster.modalizer)||void 0===s?void 0:s.activeId:c||(null===(n=null===(o=De.getTabsterContext(this._tabster,r))||void 0===o?void 0:o.modalizer)||void 0===n?void 0:n.userId),from:l||r,isBackward:h,isFindAll:e,acceptCondition:v,hasCustomCondition:f,includeProgrammaticallyFocusable:a,ignoreAccessibility:u,cachedGrouppers:{},cachedRadioGroups:{}},p=Z(r.ownerDocument,r,e=>this._acceptElement(e,b));if(!p)return null;const g=t=>{var s,o;const n=null!==(s=b.foundElement)&&void 0!==s?s:b.foundBackward;return n&&_.push(n),e?!(n&&(b.found=!1,delete b.foundElement,delete b.foundBackward,delete b.fromCtx,b.from=n,m&&!m(n)))&&!(!n&&!t):(n&&i&&(i.uncontrolled=null===(o=De.getTabsterContext(this._tabster,n))||void 0===o?void 0:o.uncontrolled),!(!t||n))};if(l||(i.outOfDOMOrder=!0),l&&G.nodeContains(r,l))p.currentNode=l;else if(h){const e=Ee(r);if(!e)return null;if(this._acceptElement(e,b)===NodeFilter.FILTER_ACCEPT&&!g(!0))return b.skippedFocusable&&(i.outOfDOMOrder=!0),_;p.currentNode=e}do{h?p.previousNode():p.nextNode()}while(g());return b.skippedFocusable&&(i.outOfDOMOrder=!0),_.length?_:null}_acceptElement(e,t){var i,s,o;if(t.found)return NodeFilter.FILTER_ACCEPT;const n=t.foundBackward;if(n&&(e===n||!G.nodeContains(n,e)))return t.found=!0,t.foundElement=n,NodeFilter.FILTER_ACCEPT;const r=t.container;if(e===r)return NodeFilter.FILTER_SKIP;if(!G.nodeContains(r,e))return NodeFilter.FILTER_REJECT;if(Fe(e))return NodeFilter.FILTER_REJECT;if(G.nodeContains(t.rejectElementsFrom,e))return NodeFilter.FILTER_REJECT;const l=t.currentCtx=De.getTabsterContext(this._tabster,e);if(!l)return NodeFilter.FILTER_SKIP;if(se(e))return this.isFocusable(e,void 0,!0,!0)&&(t.skippedFocusable=!0),NodeFilter.FILTER_SKIP;if(!t.hasCustomCondition&&("IFRAME"===e.tagName||"WEBVIEW"===e.tagName))return this.isVisible(e)&&(null===(i=l.modalizer)||void 0===i?void 0:i.userId)===(null===(s=this._tabster.modalizer)||void 0===s?void 0:s.activeId)?(t.found=!0,t.rejectElementsFrom=t.foundElement=e,NodeFilter.FILTER_ACCEPT):NodeFilter.FILTER_REJECT;if(!t.ignoreAccessibility&&!this.isAccessible(e))return this.isFocusable(e,!1,!0,!0)&&(t.skippedFocusable=!0),NodeFilter.FILTER_REJECT;let a,d=t.fromCtx;d||(d=t.fromCtx=De.getTabsterContext(this._tabster,t.from));const u=null===d||void 0===d?void 0:d.mover;let c=l.groupper,h=l.mover;if(a=null===(o=this._tabster.modalizer)||void 0===o?void 0:o.acceptElement(e,t),void 0!==a&&(t.skippedFocusable=!0),void 0===a&&(c||h||u)){const i=null===c||void 0===c?void 0:c.getElement(),s=null===u||void 0===u?void 0:u.getElement();let o=null===h||void 0===h?void 0:h.getElement();if(o&&G.nodeContains(s,o)&&G.nodeContains(r,s)&&(!i||!h||G.nodeContains(s,i))&&(h=u,o=s),i)if(i!==r&&G.nodeContains(r,i)){if(!G.nodeContains(i,e))return NodeFilter.FILTER_REJECT}else c=void 0;if(o)if(G.nodeContains(r,o)){if(!G.nodeContains(o,e))return NodeFilter.FILTER_REJECT}else h=void 0;c&&h&&(o&&i&&!G.nodeContains(i,o)?h=void 0:c=void 0),c&&(a=c.acceptElement(e,t)),h&&(a=h.acceptElement(e,t))}if(void 0===a&&(a=t.acceptCondition(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP,a===NodeFilter.FILTER_SKIP&&this.isFocusable(e,!1,!0,!0)&&(t.skippedFocusable=!0)),a===NodeFilter.FILTER_ACCEPT&&!t.found){if(!t.isFindAll&&we(e)&&!e.checked){const i=e.name;let s=t.cachedRadioGroups[i];if(s||(s=function(e){if(!we(e))return;const t=e.name;let i,s=Array.from(G.getElementsByName(e,t));return s=s.filter(e=>!!we(e)&&(e.checked&&(i=e),!0)),{name:t,buttons:new Set(s),checked:i}}(e),s&&(t.cachedRadioGroups[i]=s)),(null===s||void 0===s?void 0:s.checked)&&s.checked!==e)return NodeFilter.FILTER_SKIP}t.isBackward?(t.foundBackward=e,a=NodeFilter.FILTER_SKIP):(t.found=!0,t.foundElement=e)}return a}}const Re="Tab",Pe="Enter",Ne="Escape",xe="PageUp",Se="PageDown",Le="End",We="Home",ze="ArrowLeft",Be="ArrowUp",Ue="ArrowRight",Ke="ArrowDown";const Ve={[a]:0,[d]:1,[l]:2};class Ge extends Ae{constructor(e,t){super(),this._init=()=>{const e=this._win(),t=e.document;t.addEventListener(s.Oy,this._onFocusIn,!0),t.addEventListener(s.RY,this._onFocusOut,!0),e.addEventListener("keydown",this._onKeyDown,!0);const i=G.getActiveElement(t);i&&i!==t.body&&this._setFocusedElement(i),this.subscribe(this._onChanged)},this._onFocusIn=e=>{const t=e.composedPath()[0];t&&this._setFocusedElement(t,e.detail.relatedTarget,e.detail.isFocusedProgrammatically)},this._onFocusOut=e=>{var t;this._setFocusedElement(void 0,null===(t=e.detail)||void 0===t?void 0:t.originalEvent.relatedTarget)},this._validateFocusedElement=e=>{},this._onKeyDown=e=>{if(e.key!==Re||e.ctrlKey)return;const t=this.getVal();if(!t||!t.ownerDocument||"true"===t.contentEditable)return;const i=this._tabster,o=i.controlTab,n=De.getTabsterContext(i,t);if(!n||n.ignoreKeydown(e))return;const r=e.shiftKey,l=Ge.findNextTabbable(i,n,void 0,t,void 0,r,!0),a=n.root.getElement();if(!a)return;const d=null===l||void 0===l?void 0:l.element,u=function(e,t){var i;const s=e.getParent;let o=t;do{const t=null===(i=k(e,o))||void 0===i?void 0:i.uncontrolled;if(t&&e.uncontrolled.isUncontrolledCompletely(o,!!t.completely))return o;o=s(o)}while(o)}(i,t);if(d){const c=l.uncontrolled;if(n.uncontrolled||G.nodeContains(c,t)){if(!l.outOfDOMOrder&&c===n.uncontrolled||u&&!G.nodeContains(u,d))return;return void be.addPhantomDummyWithTarget(i,t,r,d)}if(c&&i.focusable.isVisible(c)||"IFRAME"===d.tagName&&i.focusable.isVisible(d))return void(a.dispatchEvent(new L({by:"root",owner:a,next:d,relatedEvent:e}))&&be.moveWithPhantomDummy(i,null!==c&&void 0!==c?c:d,!1,r,e));(o||(null===l||void 0===l?void 0:l.outOfDOMOrder))&&a.dispatchEvent(new L({by:"root",owner:a,next:d,relatedEvent:e}))&&(e.preventDefault(),e.stopImmediatePropagation(),(0,s.kG)(d))}else!u&&a.dispatchEvent(new L({by:"root",owner:a,next:null,relatedEvent:e}))&&n.root.moveOutWithDefaultAction(r,e)},this._onChanged=(e,t)=>{var i,s;if(e)e.dispatchEvent(new x(t));else{const e=null===(i=this._lastVal)||void 0===i?void 0:i.get();if(e){const i={...t},o=De.getTabsterContext(this._tabster,e),n=null===(s=null===o||void 0===o?void 0:o.modalizer)||void 0===s?void 0:s.userId;n&&(i.modalizerId=n),e.dispatchEvent(new S(i))}}},this._tabster=e,this._win=t,e.queueInit(this._init)}dispose(){super.dispose();const e=this._win(),t=e.document;t.removeEventListener(s.Oy,this._onFocusIn,!0),t.removeEventListener(s.RY,this._onFocusOut,!0),e.removeEventListener("keydown",this._onKeyDown,!0),this.unsubscribe(this._onChanged);const i=this._asyncFocus;i&&(e.clearTimeout(i.timeout),delete this._asyncFocus),delete Ge._lastResetElement,delete this._nextVal,delete this._lastVal}static forgetMemorized(e,t){var i,s;let o=Ge._lastResetElement,n=o&&o.get();n&&G.nodeContains(t,n)&&delete Ge._lastResetElement,n=null===(s=null===(i=e._nextVal)||void 0===i?void 0:i.element)||void 0===s?void 0:s.get(),n&&G.nodeContains(t,n)&&delete e._nextVal,o=e._lastVal,n=o&&o.get(),n&&G.nodeContains(t,n)&&delete e._lastVal}getFocusedElement(){return this.getVal()}getLastFocusedElement(){var e;let t=null===(e=this._lastVal)||void 0===e?void 0:e.get();return(!t||t&&!le(t.ownerDocument,t))&&(this._lastVal=t=void 0),t}focus(e,t,i,s){return!!this._tabster.focusable.isFocusable(e,t,!1,i)&&(e.focus({preventScroll:s}),!0)}focusDefault(e){const t=this._tabster.focusable.findDefault({container:e});return!!t&&(this._tabster.focusedElement.focus(t),!0)}getFirstOrLastTabbable(e,t){var i;const{container:s,ignoreAccessibility:o}=t;let n;if(s){const t=De.getTabsterContext(this._tabster,s);t&&(n=null===(i=Ge.findNextTabbable(this._tabster,t,s,void 0,void 0,!e,o))||void 0===i?void 0:i.element)}return n&&!G.nodeContains(s,n)&&(n=void 0),n||void 0}_focusFirstOrLast(e,t){const i=this.getFirstOrLastTabbable(e,t);return!!i&&(this.focus(i,!1,!0),!0)}focusFirst(e){return this._focusFirstOrLast(!0,e)}focusLast(e){return this._focusFirstOrLast(!1,e)}resetFocus(e){if(!this._tabster.focusable.isVisible(e))return!1;if(this._tabster.focusable.isFocusable(e,!0,!0,!0))this.focus(e);else{const t=e.getAttribute("tabindex"),i=e.getAttribute("aria-hidden");e.tabIndex=-1,e.setAttribute("aria-hidden","true"),Ge._lastResetElement=new Y(this._win,e),this.focus(e,!0,!0),this._setOrRemoveAttribute(e,"tabindex",t),this._setOrRemoveAttribute(e,"aria-hidden",i)}return!0}requestAsyncFocus(e,t,i){const s=this._tabster.getWindow(),o=this._asyncFocus;if(o){if(Ve[e]>Ve[o.source])return;s.clearTimeout(o.timeout)}this._asyncFocus={source:e,callback:t,timeout:s.setTimeout(()=>{this._asyncFocus=void 0,t()},i)}}cancelAsyncFocus(e){const t=this._asyncFocus;(null===t||void 0===t?void 0:t.source)===e&&(this._tabster.getWindow().clearTimeout(t.timeout),this._asyncFocus=void 0)}_setOrRemoveAttribute(e,t,i){null===i?e.removeAttribute(t):e.setAttribute(t,i)}_setFocusedElement(e,t,i){var s,o;if(this._tabster._noop)return;const n={relatedTarget:t};if(e){const t=null===(s=Ge._lastResetElement)||void 0===s?void 0:s.get();if(Ge._lastResetElement=void 0,t===e||se(e))return;n.isFocusedProgrammatically=i;const r=De.getTabsterContext(this._tabster,e),l=null===(o=null===r||void 0===r?void 0:r.modalizer)||void 0===o?void 0:o.userId;l&&(n.modalizerId=l)}const r=this._nextVal={element:e?new Y(this._win,e):void 0,detail:n};e&&e!==this._val&&this._validateFocusedElement(e),this._nextVal===r&&this.setVal(e,n),this._nextVal=void 0}setVal(e,t){super.setVal(e,t),e&&(this._lastVal=new Y(this._win,e))}static findNextTabbable(e,t,i,s,o,n,r){const l=i||t.root.getElement();if(!l)return null;let a=null;const d=Ge._isTabbingTimer,u=e.getWindow();d&&u.clearTimeout(d),Ge.isTabbing=!0,Ge._isTabbingTimer=u.setTimeout(()=>{delete Ge._isTabbingTimer,Ge.isTabbing=!1},0);const c=t.modalizer,h=t.groupper,m=t.mover,_=t=>{if(a=t.findNextTabbable(s,o,n,r),s&&!(null===a||void 0===a?void 0:a.element)){const o=t!==c&&G.getParentElement(t.getElement());if(o){const l=De.getTabsterContext(e,s,{referenceElement:o});if(l){const s=t.getElement(),d=n?s:s&&Ee(s)||s;d&&(a=Ge.findNextTabbable(e,l,i,d,o,n,r),a&&(a.outOfDOMOrder=!0))}}}};if(h&&m)_(t.groupperBeforeMover?h:m);else if(h)_(h);else if(m)_(m);else if(c)_(c);else{const t={container:l,currentElement:s,referenceElement:o,ignoreAccessibility:r,useActiveModalizer:!0},i={},d=e.focusable[n?"findPrev":"findNext"](t,i);a={element:d,outOfDOMOrder:i.outOfDOMOrder,uncontrolled:i.uncontrolled}}return a}}Ge.isTabbing=!1;class je extends be{constructor(e,t,i,o){super(i,e,fe,o,!0),this._setHandlers((o,n,r)=>{var l,a;const d=e.get(),u=o.input;if(d&&u){const e=De.getTabsterContext(i,u);if(e){let c;c=null===(l=t.findNextTabbable(r||void 0,void 0,n,!0))||void 0===l?void 0:l.element,c||(c=null===(a=Ge.findNextTabbable(i,e,void 0,o.isOutside?u:function(e,t){let i=e,s=null;for(;i&&!s;)s=t?G.getPreviousElementSibling(i):G.getNextElementSibling(i),i=G.getParentElement(i);return s||void 0}(d,!n),void 0,n,!0))||void 0===a?void 0:a.element),c&&(0,s.kG)(c)}}})}}class He extends ce{constructor(e,t,i,s,o){super(e,t,s),this._shouldTabInside=!1,this.makeTabbable(!1),this._onDispose=i,e.controlTab||(this.dummyManager=new je(this._element,this,e,o))}dispose(){var e;this._onDispose(this);this._element.get();null===(e=this.dummyManager)||void 0===e||e.dispose(),delete this.dummyManager,delete this._first}findNextTabbable(e,t,i,s){const o=this.getElement();if(!o)return null;const n=Fe(e)===o;if(!this._shouldTabInside&&e&&G.nodeContains(o,e)&&!n)return{element:void 0,outOfDOMOrder:!0};const r=this.getFirst(!0);if(!e||!G.nodeContains(o,e)||n)return{element:r,outOfDOMOrder:!0};const l=this._tabster;let a,d=null,u=!1;if(this._shouldTabInside&&r){const n={container:o,currentElement:e,referenceElement:t,ignoreAccessibility:s,useActiveModalizer:!0},r={};d=l.focusable[i?"findPrev":"findNext"](n,r),u=!!r.outOfDOMOrder,d||this._props.tabbability!==w.LimitedTrapFocus||(d=l.focusable[i?"findLast":"findFirst"]({container:o,ignoreAccessibility:s,useActiveModalizer:!0},r),u=!0),a=r.uncontrolled}return{element:d,uncontrolled:a,outOfDOMOrder:u}}makeTabbable(e){this._shouldTabInside=e||!this._props.tabbability}isActive(e){var t;const i=this.getElement()||null;let s=!0;for(let n=G.getParentElement(i);n;n=G.getParentElement(n)){const e=null===(t=k(this._tabster,n))||void 0===t?void 0:t.groupper;e&&(e._shouldTabInside||(s=!1))}let o=s?!!this._props.tabbability&&this._shouldTabInside:void 0;if(o&&e){const e=this._tabster.focusedElement.getFocusedElement();e&&(o=e!==this.getFirst(!0))}return o}getFirst(e){var t;const i=this.getElement();let s;if(i){if(e&&this._tabster.focusable.isFocusable(i))return i;s=null===(t=this._first)||void 0===t?void 0:t.get(),s||(s=this._tabster.focusable.findFirst({container:i,useActiveModalizer:!0})||void 0,s&&this.setFirst(s))}return s}setFirst(e){e?this._first=new Y(this._tabster.getWindow,e):delete this._first}acceptElement(e,t){const i=t.cachedGrouppers,s=G.getParentElement(this.getElement()),o=s&&De.getTabsterContext(this._tabster,s),n=null===o||void 0===o?void 0:o.groupper,r=(null===o||void 0===o?void 0:o.groupperBeforeMover)?n:void 0;let l;const a=e=>{let t,s=i[e.id];return s?t=s.isActive:(t=this.isActive(!0),s=i[e.id]={isActive:t}),t};if(r&&(l=r.getElement(),!a(r)&&l&&t.container!==l&&G.nodeContains(t.container,l)))return t.skippedFocusable=!0,NodeFilter.FILTER_REJECT;const d=a(this),u=this.getElement();if(u&&!0!==d){if(u===e&&n&&(l||(l=n.getElement()),l&&!a(n)&&G.nodeContains(t.container,l)&&l!==t.container))return t.skippedFocusable=!0,NodeFilter.FILTER_REJECT;if(u!==e&&G.nodeContains(u,e))return t.skippedFocusable=!0,NodeFilter.FILTER_REJECT;const s=i[this.id];let o;if(o="first"in s?s.first:s.first=this.getFirst(!0),o&&t.acceptCondition(o))return t.rejectElementsFrom=u,t.skippedFocusable=!0,o!==t.from?(t.found=!0,t.foundElement=o,NodeFilter.FILTER_ACCEPT):NodeFilter.FILTER_REJECT}}}class Qe{constructor(e,t){this._current={},this._grouppers={},this._init=()=>{const e=this._win();this._tabster.focusedElement.subscribeFirst(this._onFocus);const t=e.document,i=G.getActiveElement(t);i&&this._onFocus(i),t.addEventListener("mousedown",this._onMouseDown,!0),e.addEventListener("keydown",this._onKeyDown,!0),e.addEventListener(M,this._onMoveFocus)},this._onGroupperDispose=e=>{delete this._grouppers[e.id]},this._onFocus=e=>{e&&this._updateCurrent(e)},this._onMouseDown=e=>{let t=e.target;for(;t&&!this._tabster.focusable.isFocusable(t);)t=this._tabster.getParent(t);t&&this._updateCurrent(t)},this._onKeyDown=e=>{if(e.key!==Pe&&e.key!==Ne)return;if(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)return;const t=this._tabster.focusedElement.getFocusedElement();t&&this.handleKeyPress(t,e)},this._onMoveFocus=e=>{var t;const i=e.composedPath()[0],s=null===(t=e.detail)||void 0===t?void 0:t.action;i&&void 0!==s&&!e.defaultPrevented&&(s===F?this._enterGroupper(i):this._escapeGroupper(i),e.stopImmediatePropagation())},this._tabster=e,this._win=t,e.queueInit(this._init)}dispose(){const e=this._win();this._tabster.focusedElement.cancelAsyncFocus(l),this._current={},this._updateTimer&&(e.clearTimeout(this._updateTimer),delete this._updateTimer),this._tabster.focusedElement.unsubscribe(this._onFocus),e.document.removeEventListener("mousedown",this._onMouseDown,!0),e.removeEventListener("keydown",this._onKeyDown,!0),e.removeEventListener(M,this._onMoveFocus),Object.keys(this._grouppers).forEach(e=>{this._grouppers[e]&&(this._grouppers[e].dispose(),delete this._grouppers[e])})}createGroupper(e,t,i){const s=this._tabster,o=new He(s,e,this._onGroupperDispose,t,i);this._grouppers[o.id]=o;const n=s.focusedElement.getFocusedElement();return n&&G.nodeContains(e,n)&&!this._updateTimer&&(this._updateTimer=this._win().setTimeout(()=>{delete this._updateTimer,n===s.focusedElement.getFocusedElement()&&this._updateCurrent(n)},0)),o}forgetCurrentGrouppers(){this._current={}}_updateCurrent(e){var t;this._updateTimer&&(this._win().clearTimeout(this._updateTimer),delete this._updateTimer);const i=this._tabster,s={};for(let o=i.getParent(e);o;o=i.getParent(o)){const n=null===(t=k(i,o))||void 0===t?void 0:t.groupper;if(n){s[n.id]=!0,this._current[n.id]=n;const t=n.isActive()||e!==o&&(!n.getProps().delegated||n.getFirst(!1)!==e);n.makeTabbable(t)}}for(const o of Object.keys(this._current)){const e=this._current[o];e.id in s||(e.makeTabbable(!1),e.setFirst(void 0),delete this._current[o])}}_enterGroupper(e,t){const i=this._tabster,s=De.getTabsterContext(i,e),o=(null===s||void 0===s?void 0:s.groupper)||(null===s||void 0===s?void 0:s.modalizerInGroupper),n=null===o||void 0===o?void 0:o.getElement();if(o&&n&&(e===n||o.getProps().delegated&&e===o.getFirst(!1))){const s=i.focusable.findNext({container:n,currentElement:e,useActiveModalizer:!0});if(s&&(!t||t&&n.dispatchEvent(new L({by:"groupper",owner:n,next:s,relatedEvent:t}))))return t&&(t.preventDefault(),t.stopImmediatePropagation()),s.focus(),s}return null}_escapeGroupper(e,t,i){const s=this._tabster,o=De.getTabsterContext(s,e);let n=(null===o||void 0===o?void 0:o.groupper)||(null===o||void 0===o?void 0:o.modalizerInGroupper);const r=null===n||void 0===n?void 0:n.getElement();if(n&&r&&G.nodeContains(r,e)){let o;if(e!==r||i)o=n.getFirst(!0);else{const e=G.getParentElement(r),t=e?De.getTabsterContext(s,e):void 0;n=null===t||void 0===t?void 0:t.groupper,o=null===n||void 0===n?void 0:n.getFirst(!0)}if(o&&(!t||t&&r.dispatchEvent(new L({by:"groupper",owner:r,next:o,relatedEvent:t}))))return n&&n.makeTabbable(!1),o.focus(),o}return null}moveFocus(e,t){return t===F?this._enterGroupper(e):this._escapeGroupper(e)}handleKeyPress(e,t,i){const s=this._tabster,o=De.getTabsterContext(s,e);if(o&&((null===o||void 0===o?void 0:o.groupper)||(null===o||void 0===o?void 0:o.modalizerInGroupper))){if(s.focusedElement.cancelAsyncFocus(l),o.ignoreKeydown(t))return;if(t.key===Pe)this._enterGroupper(e,t);else if(t.key===Ne){const o=s.focusedElement.getFocusedElement();s.focusedElement.requestAsyncFocus(l,()=>{(o===s.focusedElement.getFocusedElement()||(!i||o)&&i)&&this._escapeGroupper(e,t,i)},0)}}}}class Je extends Ae{constructor(e){super(),this._onChange=e=>{this.setVal(e,void 0)},this._keyborg=(0,s.SQ)(e()),this._keyborg.subscribe(this._onChange)}dispose(){super.dispose(),this._keyborg&&(this._keyborg.unsubscribe(this._onChange),(0,s.bd)(this._keyborg),delete this._keyborg)}setNavigatingWithKeyboard(e){var t;null===(t=this._keyborg)||void 0===t||t.setVal(e)}isNavigatingWithKeyboard(){var e;return!!(null===(e=this._keyborg)||void 0===e?void 0:e.isNavigatingWithKeyboard())}}let qe=0;const Ye="aria-hidden";class $e extends be{constructor(e,t,i){super(t,e,_e,i),this._setHandlers((i,o)=>{var n,r;const l=e.get(),a=l&&(null===(n=De.getRoot(t,l))||void 0===n?void 0:n.getElement()),d=i.input;let u;if(a&&d){const e=Fe(d),i=De.getTabsterContext(t,e||d);i&&(u=null===(r=Ge.findNextTabbable(t,i,a,d,void 0,o,!0))||void 0===r?void 0:r.element),u&&(0,s.kG)(u)}})}}class Xe extends ce{constructor(e,t,i,s,o,n){super(e,t,s),this._wasFocused=0,this.userId=s.id,this._onDispose=i,this._activeElements=n,e.controlTab||(this.dummyManager=new $e(this._element,e,o))}makeActive(e){if(this._isActive!==e){this._isActive=e;const t=this.getElement();if(t){const i=this._activeElements,s=i.map(e=>e.get()).indexOf(t);e?s<0&&i.push(new Y(this._tabster.getWindow,t)):s>=0&&i.splice(s,1)}0,this._dispatchEvent(e)}}focused(e){return e||(this._wasFocused=++qe),this._wasFocused}setProps(e){e.id&&(this.userId=e.id),this._props={...e}}dispose(){var e;this.makeActive(!1),this._onDispose(this),null===(e=this.dummyManager)||void 0===e||e.dispose(),delete this.dummyManager,this._activeElements=[],this._remove()}isActive(){return!!this._isActive}contains(e){return G.nodeContains(this.getElement(),e)}findNextTabbable(e,t,i,s){var o,n;if(!this.getElement())return null;const r=this._tabster;let l,a=null,d=!1;const u=e&&(null===(o=De.getRoot(r,e))||void 0===o?void 0:o.getElement());if(u){const o={container:u,currentElement:e,referenceElement:t,ignoreAccessibility:s,useActiveModalizer:!0},c={};a=r.focusable[i?"findPrev":"findNext"](o,c),!a&&this._props.isTrapped&&(null===(n=r.modalizer)||void 0===n?void 0:n.activeId)?(a=r.focusable[i?"findLast":"findFirst"]({container:u,ignoreAccessibility:s,useActiveModalizer:!0},c),null===a&&(a=e),d=!0):d=!!c.outOfDOMOrder,l=c.uncontrolled}return{element:a,uncontrolled:l,outOfDOMOrder:d}}_dispatchEvent(e,t){const i=this.getElement();let s=!1;if(i){const o=t?this._activeElements.map(e=>e.get()):[i];for(const t of o)if(t){const o={id:this.userId,element:i},n=e?new z(o):new B(o);t.dispatchEvent(n),n.defaultPrevented&&(s=!0)}}return s}_remove(){0}}class Ze{constructor(e,t,i){this._onModalizerDispose=e=>{const t=e.id,i=e.userId,s=this._parts[i];if(delete this._modalizers[t],s&&(delete s[t],0===Object.keys(s).length)){delete this._parts[i];const e=this._activationHistory,t=[];let s;for(let o=e.length;o--;){const n=e[o];n!==i&&(n!==s&&(s=n,(n||t.length>0)&&t.unshift(n)))}if(this._activationHistory=t,this.activeId===i){const e=t[0],i=e?Object.values(this._parts[e])[0]:void 0;this.setActive(i)}}},this._onKeyDown=e=>{var t;if(e.key!==Ne)return;const i=this._tabster,s=i.focusedElement.getFocusedElement();if(s){const o=De.getTabsterContext(i,s),n=null===o||void 0===o?void 0:o.modalizer;if(o&&!o.groupper&&(null===n||void 0===n?void 0:n.isActive())&&!o.ignoreKeydown(e)){const s=n.userId;if(s){const o=this._parts[s];if(o){const s=Object.keys(o).map(e=>{var t;const s=o[e],n=s.getElement();let r;return n&&(r=null===(t=k(i,n))||void 0===t?void 0:t.groupper),s&&n&&r?{el:n,focusedSince:s.focused(!0)}:{focusedSince:0}}).filter(e=>e.focusedSince>0).sort((e,t)=>e.focusedSince>t.focusedSince?-1:e.focusedSince<t.focusedSince?1:0);if(s.length){const o=s[0].el;o&&(null===(t=i.groupper)||void 0===t||t.handleKeyPress(o,e,!0))}}}}}},this._onFocus=(e,t)=>{var i;const s=this._tabster,o=e&&De.getTabsterContext(s,e);if(!o||!e)return;const n=this._augMap;for(let d=e;d;d=G.getParentElement(d))n.has(d)&&(n.delete(d),ye(s,d,Ye));let r=o.modalizer;const l=k(s,e),a=null===l||void 0===l?void 0:l.modalizer;if(a&&(a.focused(),a.userId===this.activeId&&l.groupper)){const t=s.getParent(e),o=t&&(null===(i=De.getTabsterContext(s,t))||void 0===i?void 0:i.modalizer);if(!o)return void this.setActive(void 0);r=o}if(null===r||void 0===r||r.focused(),(null===r||void 0===r?void 0:r.userId)!==this.activeId)if(t.isFocusedProgrammatically||this.currentIsOthersAccessible||(null===r||void 0===r?void 0:r.getProps().isAlwaysAccessible))this.setActive(r);else{const t=this._win();t.clearTimeout(this._restoreModalizerFocusTimer),this._restoreModalizerFocusTimer=t.setTimeout(()=>this._restoreModalizerFocus(e),100)}else this.currentIsOthersAccessible=null===r||void 0===r?void 0:r.getProps().isOthersAccessible},this._tabster=e,this._win=e.getWindow,this._modalizers={},this._parts={},this._augMap=new WeakMap,this._aug=[],this._alwaysAccessibleSelector=t,this._accessibleCheck=i,this._activationHistory=[],this.activeElements=[],e.controlTab||e.root.addDummyInputs();this._win().addEventListener("keydown",this._onKeyDown,!0),e.queueInit(()=>{this._tabster.focusedElement.subscribe(this._onFocus)})}dispose(){const e=this._win();e.removeEventListener("keydown",this._onKeyDown,!0),Object.keys(this._modalizers).forEach(e=>{this._modalizers[e]&&(this._modalizers[e].dispose(),delete this._modalizers[e])}),e.clearTimeout(this._restoreModalizerFocusTimer),e.clearTimeout(this._hiddenUpdateTimer),this._parts={},delete this.activeId,this.activeElements=[],this._augMap=new WeakMap,this._aug=[],this._tabster.focusedElement.unsubscribe(this._onFocus)}createModalizer(e,t,i){var s;const o=new Xe(this._tabster,e,this._onModalizerDispose,t,i,this.activeElements),n=o.id,r=t.id;this._modalizers[n]=o;let l=this._parts[r];l||(l=this._parts[r]={}),l[n]=o;const a=null!==(s=this._tabster.focusedElement.getFocusedElement())&&void 0!==s?s:null;return e!==a&&G.nodeContains(e,a)&&(r!==this.activeId?this.setActive(o):o.makeActive(!0)),o}isAugmented(e){return this._augMap.has(e)}hiddenUpdate(){this._hiddenUpdateTimer||(this._hiddenUpdateTimer=this._win().setTimeout(()=>{delete this._hiddenUpdateTimer,this._hiddenUpdate()},250))}setActive(e){const t=null===e||void 0===e?void 0:e.userId,i=this.activeId;if(i===t)return;if(this.activeId=t,i){const e=this._parts[i];if(e)for(const t of Object.keys(e))e[t].makeActive(!1)}if(t){const e=this._parts[t];if(e)for(const t of Object.keys(e))e[t].makeActive(!0)}this.currentIsOthersAccessible=null===e||void 0===e?void 0:e.getProps().isOthersAccessible,this.hiddenUpdate();const s=this._activationHistory;s[0]!==t&&(void 0!==t||s.length>0)&&s.unshift(t)}focus(e,t,i){const s=this._tabster,o=De.getTabsterContext(s,e),n=null===o||void 0===o?void 0:o.modalizer;if(n){this.setActive(n);const e=n.getProps(),o=n.getElement();if(o){if(void 0===t&&(t=e.isNoFocusFirst),!t&&s.keyboardNavigation.isNavigatingWithKeyboard()&&s.focusedElement.focusFirst({container:o}))return!0;if(void 0===i&&(i=e.isNoFocusDefault),!i&&s.focusedElement.focusDefault(o))return!0;s.focusedElement.resetFocus(o)}}else 0;return!1}activate(e){var t;const i=e?null===(t=De.getTabsterContext(this._tabster,e))||void 0===t?void 0:t.modalizer:void 0;return!(e&&!i)&&(this.setActive(i),!0)}acceptElement(e,t){var i;const s=t.modalizerUserId,o=null===(i=t.currentCtx)||void 0===i?void 0:i.modalizer;if(s)for(const r of this.activeElements){const t=r.get();if(t&&(G.nodeContains(e,t)||t===e))return NodeFilter.FILTER_SKIP}const n=s===(null===o||void 0===o?void 0:o.userId)||!s&&(null===o||void 0===o?void 0:o.getProps().isAlwaysAccessible)?void 0:NodeFilter.FILTER_SKIP;return void 0!==n&&(t.skippedFocusable=!0),n}_hiddenUpdate(){var e;const t=this._tabster,i=t.getWindow().document.body,s=this.activeId,o=this._parts,n=[],r=[],l=this._alwaysAccessibleSelector,a=l?Array.from(G.querySelectorAll(i,l)):[],d=[];for(const f of Object.keys(o)){const e=o[f];for(const t of Object.keys(e)){const i=e[t],o=i.getElement(),l=i.getProps().isAlwaysAccessible;o&&(f===s?(d.push(o),this.currentIsOthersAccessible||n.push(o)):l?a.push(o):r.push(o))}}const u=this._augMap,c=n.length>0?[...n,...a]:void 0,h=[],m=new WeakMap,_=(e,i)=>{var s;const o=e.tagName;if("SCRIPT"===o||"STYLE"===o)return;let n=!1;u.has(e)?i?n=!0:(u.delete(e),ye(t,e,Ye)):i&&!(null===(s=this._accessibleCheck)||void 0===s?void 0:s.call(this,e,d))&&ye(t,e,Ye,"true")&&(u.set(e,!0),n=!0),n&&(h.push(new Y(t.getWindow,e)),m.set(e,!0))},v=e=>{var i;for(let s=G.getFirstElementChild(e);s;s=G.getNextElementSibling(s)){let e=!1,o=!1,n=!1;if(c){const r=t.getParent(s);for(const t of c){if(s===t){e=!0;break}if(G.nodeContains(s,t)){o=!0;break}G.nodeContains(t,r)&&(n=!0)}o||(null===(i=s.__tabsterElementFlags)||void 0===i?void 0:i.noDirectAriaHidden)?v(s):e||n||_(s,!0)}else _(s,!1)}};c||a.forEach(e=>_(e,!1)),r.forEach(e=>_(e,!0)),i&&v(i),null===(e=this._aug)||void 0===e||e.map(e=>e.get()).forEach(e=>{e&&!m.get(e)&&_(e,!1)}),this._aug=h,this._augMap=m}_restoreModalizerFocus(e){var t;const i=null===e||void 0===e?void 0:e.ownerDocument;if(!e||!i)return;const s=this._tabster.focusedElement.getFocusedElement(),o=s&&(null===(t=De.getTabsterContext(this._tabster,s))||void 0===t?void 0:t.modalizer);if(!s||s&&(null===o||void 0===o?void 0:o.userId)===this.activeId)return;const n=this._tabster,r=De.getTabsterContext(n,e),l=null===r||void 0===r?void 0:r.modalizer,a=this.activeId;if(!l&&!a||l&&a===l.userId)return;const d=null===r||void 0===r?void 0:r.root.getElement();if(d){let t=n.focusable.findFirst({container:d,useActiveModalizer:!0});if(t){if(e.compareDocumentPosition(t)&document.DOCUMENT_POSITION_PRECEDING&&(t=n.focusable.findLast({container:d,useActiveModalizer:!0}),!t))throw new Error("Something went wrong.");return void n.focusedElement.focus(t)}}e.blur()}}const et=["input","textarea","*[contenteditable]"].join(", ");class tt extends be{constructor(e,t,i,o){super(t,e,ve,o),this._onFocusDummyInput=e=>{var t,i;const o=this._element.get(),n=e.input;if(o&&n){const r=De.getTabsterContext(this._tabster,o);let l;r&&(l=null===(t=Ge.findNextTabbable(this._tabster,r,void 0,n,void 0,!e.isFirst,!0))||void 0===t?void 0:t.element);const a=null===(i=this._getMemorized())||void 0===i?void 0:i.get();a&&this._tabster.focusable.isFocusable(a)&&(l=a),l&&(0,s.kG)(l)}},this._tabster=t,this._getMemorized=i,this._setHandlers(this._onFocusDummyInput)}}class it extends ce{constructor(e,t,i,s,o){var n;super(e,t,s),this._visible={},this._onIntersection=e=>{for(const t of e){const e=t.target,i=ne(this._win,e);let s,o=this._fullyVisible;if(t.intersectionRatio>=.25?(s=t.intersectionRatio>=.75?h:c,s===h&&(o=i)):s=u,this._visible[i]!==s){void 0===s?(delete this._visible[i],o===i&&delete this._fullyVisible):(this._visible[i]=s,this._fullyVisible=o);const t=this.getState(e);t&&e.dispatchEvent(new W(t))}}},this._win=e.getWindow,this.visibilityTolerance=null!==(n=s.visibilityTolerance)&&void 0!==n?n:.8,(this._props.trackState||this._props.visibilityAware)&&(this._intersectionObserver=new IntersectionObserver(this._onIntersection,{threshold:[0,.25,.5,.75,1]}),this._observeState()),this._onDispose=i;const r=()=>s.memorizeCurrent?this._current:void 0;e.controlTab||(this.dummyManager=new tt(this._element,e,r,o))}dispose(){var e;this._onDispose(this),this._intersectionObserver&&(this._intersectionObserver.disconnect(),delete this._intersectionObserver),delete this._current,delete this._fullyVisible,delete this._allElements,delete this._updateQueue,this._unobserve&&(this._unobserve(),delete this._unobserve);const t=this._win();this._setCurrentTimer&&(t.clearTimeout(this._setCurrentTimer),delete this._setCurrentTimer),this._updateTimer&&(t.clearTimeout(this._updateTimer),delete this._updateTimer),null===(e=this.dummyManager)||void 0===e||e.dispose(),delete this.dummyManager}setCurrent(e){this._current=e?new Y(this._win,e):void 0,!this._props.trackState&&!this._props.visibilityAware||this._setCurrentTimer||(this._setCurrentTimer=this._win().setTimeout(()=>{var e;delete this._setCurrentTimer;const t=[];this._current!==this._prevCurrent&&(t.push(this._current),t.push(this._prevCurrent),this._prevCurrent=this._current);for(const i of t){const t=null===i||void 0===i?void 0:i.get();if(t&&(null===(e=this._allElements)||void 0===e?void 0:e.get(t))===this){const e=this._props;if(t&&(void 0!==e.visibilityAware||e.trackState)){const e=this.getState(t);e&&t.dispatchEvent(new W(e))}}}}))}getCurrent(){var e;return(null===(e=this._current)||void 0===e?void 0:e.get())||null}findNextTabbable(e,t,i,s){const o=this.getElement(),n=o&&Fe(e)===o;if(!o)return null;let r,l=null,a=!1;if(this._props.tabbable||n||e&&!G.nodeContains(o,e)){const n={currentElement:e,referenceElement:t,container:o,ignoreAccessibility:s,useActiveModalizer:!0},d={};l=this._tabster.focusable[i?"findPrev":"findNext"](n,d),a=!!d.outOfDOMOrder,r=d.uncontrolled}return{element:l,uncontrolled:r,outOfDOMOrder:a}}acceptElement(e,t){var i,s;if(!Ge.isTabbing)return(null===(i=t.currentCtx)||void 0===i?void 0:i.excludedFromMover)?NodeFilter.FILTER_REJECT:void 0;const{memorizeCurrent:o,visibilityAware:n,hasDefault:r=!0}=this._props,l=this.getElement();if(l&&(o||n||r)&&(!G.nodeContains(l,t.from)||Fe(t.from)===l)){let e;if(o){const i=null===(s=this._current)||void 0===s?void 0:s.get();i&&t.acceptCondition(i)&&(e=i)}if(!e&&r&&(e=this._tabster.focusable.findDefault({container:l,useActiveModalizer:!0})),!e&&n&&(e=this._tabster.focusable.findElement({container:l,useActiveModalizer:!0,isBackward:t.isBackward,acceptCondition:e=>{var i;const s=ne(this._win,e),o=this._visible[s];return l!==e&&!!(null===(i=this._allElements)||void 0===i?void 0:i.get(e))&&t.acceptCondition(e)&&(o===h||o===c&&(n===c||!this._fullyVisible))}})),e)return t.found=!0,t.foundElement=e,t.rejectElementsFrom=l,t.skippedFocusable=!0,NodeFilter.FILTER_ACCEPT}}_observeState(){const e=this.getElement();if(this._unobserve||!e||"undefined"===typeof MutationObserver)return;const t=this._win(),i=this._allElements=new WeakMap,s=this._tabster.focusable;let o=this._updateQueue=[];const n=G.createMutationObserver(e=>{for(const t of e){const e=t.target,i=t.removedNodes,s=t.addedNodes;if("attributes"===t.type)"tabindex"===t.attributeName&&o.push({element:e,type:2});else{for(let e=0;e<i.length;e++)o.push({element:i[e],type:3});for(let e=0;e<s.length;e++)o.push({element:s[e],type:1})}}u()}),r=(e,t)=>{var s,o;const n=i.get(e);n&&t&&(null===(s=this._intersectionObserver)||void 0===s||s.unobserve(e),i.delete(e)),n||t||(i.set(e,this),null===(o=this._intersectionObserver)||void 0===o||o.observe(e))},l=e=>{const t=s.isFocusable(e);i.get(e)?t||r(e,!0):t&&r(e)},a=e=>{const{mover:i}=c(e);if(i&&i!==this){if(i.getElement()!==e||!s.isFocusable(e))return;r(e)}const o=Z(t.document,e,e=>{const{mover:t,groupper:i}=c(e);if(t&&t!==this)return NodeFilter.FILTER_REJECT;const o=null===i||void 0===i?void 0:i.getFirst(!0);return i&&i.getElement()!==e&&o&&o!==e?NodeFilter.FILTER_REJECT:(s.isFocusable(e)&&r(e),NodeFilter.FILTER_SKIP)});if(o)for(o.currentNode=e;o.nextNode(););},d=e=>{i.get(e)&&r(e,!0);for(let t=G.getFirstElementChild(e);t;t=G.getNextElementSibling(t))d(t)},u=()=>{!this._updateTimer&&o.length&&(this._updateTimer=t.setTimeout(()=>{delete this._updateTimer;for(const{element:e,type:t}of o)switch(t){case 2:l(e);break;case 1:a(e);break;case 3:d(e)}o=this._updateQueue=[]},0))},c=e=>{const t={};for(let i=e;i;i=G.getParentElement(i)){const e=k(this._tabster,i);if(e&&(e.groupper&&!t.groupper&&(t.groupper=e.groupper),e.mover)){t.mover=e.mover;break}}return t};o.push({element:e,type:1}),u(),n.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["tabindex"]}),this._unobserve=()=>{n.disconnect()}}getState(e){const t=ne(this._win,e);if(t in this._visible){const i=this._visible[t]||u;return{isCurrent:this._current?this._current.get()===e:void 0,visibility:i}}}}class st{constructor(e,t){this._init=()=>{const e=this._win();e.addEventListener("keydown",this._onKeyDown,!0),e.addEventListener(D,this._onMoveFocus),e.addEventListener(A,this._onMemorizedElement),this._tabster.focusedElement.subscribe(this._onFocus)},this._onMoverDispose=e=>{delete this._movers[e.id]},this._onFocus=e=>{var t;let i=e,s=e;for(let o=G.getParentElement(e);o;o=G.getParentElement(o)){const e=null===(t=k(this._tabster,o))||void 0===t?void 0:t.mover;e&&(e.setCurrent(s),i=void 0),!i&&this._tabster.focusable.isFocusable(o)&&(i=s=o)}},this._onKeyDown=async e=>{var t;if(this._ignoredInputTimer&&(this._win().clearTimeout(this._ignoredInputTimer),delete this._ignoredInputTimer),null===(t=this._ignoredInputResolve)||void 0===t||t.call(this,!1),e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)return;const i=e.key;let s;if(i===Ke?s=f:i===Ue?s=p:i===Be?s=v:i===ze?s=b:i===Se?s=E:i===xe?s=g:i===We?s=y:i===Le&&(s=T),!s)return;const o=this._tabster.focusedElement.getFocusedElement();o&&!await this._isIgnoredInput(o,i)&&this._moveFocus(o,s,e)},this._onMoveFocus=e=>{var t;const i=e.composedPath()[0],s=null===(t=e.detail)||void 0===t?void 0:t.key;i&&void 0!==s&&!e.defaultPrevented&&(this._moveFocus(i,s),e.stopImmediatePropagation())},this._onMemorizedElement=e=>{var t;const i=e.composedPath()[0];let s=null===(t=e.detail)||void 0===t?void 0:t.memorizedElement;if(i){const t=De.getTabsterContext(this._tabster,i),o=null===t||void 0===t?void 0:t.mover;o&&(s&&!G.nodeContains(o.getElement(),s)&&(s=void 0),o.setCurrent(s),e.stopImmediatePropagation())}},this._tabster=e,this._win=t,this._movers={},e.queueInit(this._init)}dispose(){var e;const t=this._win();this._tabster.focusedElement.unsubscribe(this._onFocus),null===(e=this._ignoredInputResolve)||void 0===e||e.call(this,!1),this._ignoredInputTimer&&(t.clearTimeout(this._ignoredInputTimer),delete this._ignoredInputTimer),t.removeEventListener("keydown",this._onKeyDown,!0),t.removeEventListener(D,this._onMoveFocus),t.removeEventListener(A,this._onMemorizedElement),Object.keys(this._movers).forEach(e=>{this._movers[e]&&(this._movers[e].dispose(),delete this._movers[e])})}createMover(e,t,i){const s=new it(this._tabster,e,this._onMoverDispose,t,i);return this._movers[s.id]=s,s}moveFocus(e,t){return this._moveFocus(e,t)}_moveFocus(e,t,i){var o,n;const r=this._tabster,l=De.getTabsterContext(r,e,{checkRtl:!0});if(!l||!l.mover||l.excludedFromMover||i&&l.ignoreKeydown(i))return null;const a=l.mover,d=a.getElement();if(l.groupperBeforeMover){const e=l.groupper;if(!e||e.isActive(!0))return null;for(let t=G.getParentElement(e.getElement());t&&t!==d;t=G.getParentElement(t))if(null===(n=null===(o=k(r,t))||void 0===o?void 0:o.groupper)||void 0===n?void 0:n.isActive(!0))return null}if(!d)return null;const u=r.focusable,c=a.getProps(),h=c.direction||_.Both,m=h===_.Both,w=m||h===_.Vertical,F=m||h===_.Horizontal,C=h===_.GridLinear,I=C||h===_.Grid,O=c.cyclic;let D,A,M,R=0,P=0;if(I&&(M=e.getBoundingClientRect(),R=Math.ceil(M.left),P=Math.floor(M.right)),l.rtl&&(t===p?t=b:t===b&&(t=p)),t===f&&w||t===p&&(F||I))if(D=u.findNext({currentElement:e,container:d,useActiveModalizer:!0}),D&&I){const e=Math.ceil(D.getBoundingClientRect().left);!C&&P>e&&(D=void 0)}else!D&&O&&(D=u.findFirst({container:d,useActiveModalizer:!0}));else if(t===v&&w||t===b&&(F||I))if(D=u.findPrev({currentElement:e,container:d,useActiveModalizer:!0}),D&&I){const e=Math.floor(D.getBoundingClientRect().right);!C&&e>R&&(D=void 0)}else!D&&O&&(D=u.findLast({container:d,useActiveModalizer:!0}));else if(t===y)I?u.findElement({container:d,currentElement:e,useActiveModalizer:!0,isBackward:!0,acceptCondition:t=>{var i;if(!u.isFocusable(t))return!1;const s=Math.ceil(null!==(i=t.getBoundingClientRect().left)&&void 0!==i?i:0);return t!==e&&R<=s||(D=t,!1)}}):D=u.findFirst({container:d,useActiveModalizer:!0});else if(t===T)I?u.findElement({container:d,currentElement:e,useActiveModalizer:!0,acceptCondition:t=>{var i;if(!u.isFocusable(t))return!1;const s=Math.ceil(null!==(i=t.getBoundingClientRect().left)&&void 0!==i?i:0);return t!==e&&R>=s||(D=t,!1)}}):D=u.findLast({container:d,useActiveModalizer:!0});else if(t===g){if(u.findElement({currentElement:e,container:d,useActiveModalizer:!0,isBackward:!0,acceptCondition:e=>!!u.isFocusable(e)&&(!te(this._win,e,a.visibilityTolerance)||(D=e,!1))}),I&&D){const e=Math.ceil(D.getBoundingClientRect().left);u.findElement({currentElement:D,container:d,useActiveModalizer:!0,acceptCondition:t=>{if(!u.isFocusable(t))return!1;const i=Math.ceil(t.getBoundingClientRect().left);return R<i||e>=i||(D=t,!1)}})}A=!1}else if(t===E){if(u.findElement({currentElement:e,container:d,useActiveModalizer:!0,acceptCondition:e=>!!u.isFocusable(e)&&(!te(this._win,e,a.visibilityTolerance)||(D=e,!1))}),I&&D){const e=Math.ceil(D.getBoundingClientRect().left);u.findElement({currentElement:D,container:d,useActiveModalizer:!0,isBackward:!0,acceptCondition:t=>{if(!u.isFocusable(t))return!1;const i=Math.ceil(t.getBoundingClientRect().left);return R>i||e<=i||(D=t,!1)}})}A=!0}else if(I){const i=t===v,s=R,o=Math.ceil(M.top),n=P,r=Math.floor(M.bottom);let l,a,c=0;u.findAll({container:d,currentElement:e,isBackward:i,onElement:e=>{const t=e.getBoundingClientRect(),d=Math.ceil(t.left),u=Math.ceil(t.top),h=Math.floor(t.right),m=Math.floor(t.bottom);if(i&&o<m||!i&&r>u)return!0;const _=Math.ceil(Math.min(n,h))-Math.floor(Math.max(s,d)),v=Math.ceil(Math.min(n-s,h-d));if(_>0&&v>=_){const t=_/v;t>c&&(l=e,c=t)}else if(0===c){const t=function(e,t,i,s,o,n,r,l){const a=i<o?o-i:r<e?e-r:0,d=s<n?n-s:l<t?t-l:0;return 0===a?d:0===d?a:Math.sqrt(a*a+d*d)}(s,o,n,r,d,u,h,m);(void 0===a||t<a)&&(a=t,l=e)}else if(c>0)return!1;return!0}}),D=l}return D&&(!i||i&&d.dispatchEvent(new L({by:"mover",owner:d,next:D,relatedEvent:i})))?(void 0!==A&&function(e,t,i){const s=ie(t);if(s){const o=ee(e,s),n=t.getBoundingClientRect();s.scrollTop+=i?n.top-o.top:n.bottom-o.bottom}}(this._win,D,A),i&&(i.preventDefault(),i.stopImmediatePropagation()),(0,s.kG)(D),D):null}async _isIgnoredInput(e,t){if("true"===e.getAttribute("aria-expanded")&&e.hasAttribute("aria-activedescendant"))return!0;if(ae(e,et)){let i,s=0,o=0,n=0;if("INPUT"===e.tagName||"TEXTAREA"===e.tagName){const i=e.type,r=e.value;if(n=(r||"").length,"email"===i||"number"===i){if(n){const i=G.getSelection(e);if(i){const e=i.toString().length,s=t===ze||t===Be;if(i.modify("extend",s?"backward":"forward","character"),e!==i.toString().length)return i.modify("extend",s?"forward":"backward","character"),!0;n=0}}}else{const t=e.selectionStart;if(null===t)return"hidden"===i;s=t||0,o=e.selectionEnd||0}}else"true"===e.contentEditable&&(i=new(de(this._win))(t=>{this._ignoredInputResolve=e=>{delete this._ignoredInputResolve,t(e)};const i=this._win();this._ignoredInputTimer&&i.clearTimeout(this._ignoredInputTimer);const{anchorNode:r,focusNode:l,anchorOffset:a,focusOffset:d}=G.getSelection(e)||{};this._ignoredInputTimer=i.setTimeout(()=>{var t,i,u;delete this._ignoredInputTimer;const{anchorNode:c,focusNode:h,anchorOffset:m,focusOffset:_}=G.getSelection(e)||{};if(c===r&&h===l&&m===a&&_===d){if(s=m||0,o=_||0,n=(null===(i=e.textContent)||void 0===i?void 0:i.length)||0,c&&h&&G.nodeContains(e,c)&&G.nodeContains(e,h)&&c!==e){let t=!1;const i=e=>{if(e===c)t=!0;else if(e===h)return!0;const n=e.textContent;if(n&&!G.getFirstChild(e)){const e=n.length;t?h!==c&&(o+=e):(s+=e,o+=e)}let r=!1;for(let t=G.getFirstChild(e);t&&!r;t=t.nextSibling)r=i(t);return r};i(e)}null===(u=this._ignoredInputResolve)||void 0===u||u.call(this,!0)}else null===(t=this._ignoredInputResolve)||void 0===t||t.call(this,!1)},0)}));if(i&&!await i)return!0;if(s!==o)return!0;if(s>0&&(t===ze||t===Be||t===We))return!0;if(s<n&&(t===Ue||t===Ke||t===Le))return!0}return!1}}class ot{constructor(e){this._isUncontrolledCompletely=e}isUncontrolledCompletely(e,t){var i;const s=null===(i=this._isUncontrolledCompletely)||void 0===i?void 0:i.call(this,e,t);return void 0===s?t:s}}class nt extends ce{constructor(e,t,i){var s;if(super(e,t,i),this._hasFocus=!1,this._onFocusOut=e=>{var t;const i=null===(t=this._element)||void 0===t?void 0:t.get();i&&null===e.relatedTarget&&i.dispatchEvent(new U),i&&!G.nodeContains(i,e.relatedTarget)&&(this._hasFocus=!1)},this._onFocusIn=()=>{this._hasFocus=!0},this._props.type===m.Source){const e=null===(s=this._element)||void 0===s?void 0:s.get();null===e||void 0===e||e.addEventListener("focusout",this._onFocusOut),null===e||void 0===e||e.addEventListener("focusin",this._onFocusIn),this._hasFocus=G.nodeContains(e,e&&G.getActiveElement(e.ownerDocument))}}dispose(){var e;if(this._props.type===m.Source){const t=null===(e=this._element)||void 0===e?void 0:e.get();if(null===t||void 0===t||t.removeEventListener("focusout",this._onFocusOut),null===t||void 0===t||t.removeEventListener("focusin",this._onFocusIn),this._hasFocus){this._tabster.getWindow().document.body.dispatchEvent(new U)}}}}class rt{constructor(e){this._stack=[],this._getWindow=e}push(e){var t;(null===(t=this._stack[this._stack.length-1])||void 0===t?void 0:t.get())!==e&&(this._stack.length>rt.DEPTH&&this._stack.shift(),this._stack.push(new Y(this._getWindow,e)))}pop(e){var t;void 0===e&&(e=()=>!0);const i=this._getWindow().document;for(let s=this._stack.length-1;s>=0;s--){const s=null===(t=this._stack.pop())||void 0===t?void 0:t.get();if(s&&G.nodeContains(i.body,G.getParentElement(s))&&e(s))return s}}}rt.DEPTH=10;class lt{constructor(e){this._onRestoreFocus=e=>{var t,i;this._focusedElementState.cancelAsyncFocus(a);const s=e.composedPath()[0];if(s){const e=null===(i=null===(t=k(this._tabster,s))||void 0===t?void 0:t.restorer)||void 0===i?void 0:i.getProps().id;this._focusedElementState.requestAsyncFocus(a,()=>this._restoreFocus(s,e),0)}},this._onFocusIn=e=>{var t;if(!e)return;const i=k(this._tabster,e);(null===(t=null===i||void 0===i?void 0:i.restorer)||void 0===t?void 0:t.getProps().type)===m.Target&&this._history.push(e)},this._restoreFocus=(e,t)=>{var i;const s=this._getWindow().document;if(G.getActiveElement(s)!==s.body)return;if(!this._keyboardNavState.isNavigatingWithKeyboard()&&G.nodeContains(s.body,e))return;const o=e=>{var t,i;const s=null===(i=null===(t=k(this._tabster,e))||void 0===t?void 0:t.restorer)||void 0===i?void 0:i.getProps();return s?s.id:null};null===(i=this._history.pop(e=>t===o(e)))||void 0===i||i.focus()},this._tabster=e,this._getWindow=e.getWindow,this._getWindow().addEventListener(R,this._onRestoreFocus),this._history=new rt(this._getWindow),this._keyboardNavState=e.keyboardNavigation,this._focusedElementState=e.focusedElement,this._focusedElementState.subscribe(this._onFocusIn)}dispose(){const e=this._getWindow();this._focusedElementState.unsubscribe(this._onFocusIn),this._focusedElementState.cancelAsyncFocus(a),e.removeEventListener(R,this._onRestoreFocus)}createRestorer(e,t){const i=new nt(this._tabster,e,t);return t.type===m.Target&&G.getActiveElement(e.ownerDocument)===e&&this._history.push(e),i}}function at(e,t){var i,s;if(!e||!t)return!1;let o=t;for(;o;){if(o===e)return!0;o="function"!==typeof o.assignedElements&&(null===(i=o.assignedSlot)||void 0===i?void 0:i.parentNode)?null===(s=o.assignedSlot)||void 0===s?void 0:s.parentNode:o.nodeType===document.DOCUMENT_FRAGMENT_NODE?o.host:o.parentNode}return!1}class dt{static _overrideAttachShadow(e){const t=e.Element.prototype.attachShadow;t.__origAttachShadow||(Element.prototype.attachShadow=function(e){const i=t.call(this,e);for(const t of dt._shadowObservers)t._addSubObserver(i);return i},Element.prototype.attachShadow.__origAttachShadow=t)}constructor(e){this._isObserving=!1,this._callbackWrapper=(e,t)=>{for(const i of e)if("childList"===i.type){const e=i.removedNodes,t=i.addedNodes;for(let i=0;i<e.length;i++)this._walkShadows(e[i],!0);for(let i=0;i<t.length;i++)this._walkShadows(t[i])}this._callback(e,t)},this._callback=e,this._observer=new MutationObserver(this._callbackWrapper),this._subObservers=new Map}_addSubObserver(e){if(this._options&&this._callback&&!this._subObservers.has(e)&&this._options.subtree&&at(this._root,e)){const t=new MutationObserver(this._callbackWrapper);this._subObservers.set(e,t),this._isObserving&&t.observe(e,this._options),this._walkShadows(e)}}disconnect(){this._isObserving=!1,delete this._options,dt._shadowObservers.delete(this);for(const e of this._subObservers.values())e.disconnect();this._subObservers.clear(),this._observer.disconnect()}observe(e,t){const i=e.nodeType===Node.DOCUMENT_NODE?e:e.ownerDocument,s=null===i||void 0===i?void 0:i.defaultView;i&&s&&(dt._overrideAttachShadow(s),dt._shadowObservers.add(this),this._root=e,this._options=t,this._isObserving=!0,this._observer.observe(e,t),this._walkShadows(e))}_walkShadows(e,t){const i=e.nodeType===Node.DOCUMENT_NODE?e:e.ownerDocument;if(!i)return;if(e===i)e=i.body;else{const t=e.shadowRoot;if(t)return void this._addSubObserver(t)}i.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{if(e.nodeType===Node.ELEMENT_NODE)if(t){const t=this._subObservers.get(e);t&&(t.disconnect(),this._subObservers.delete(e))}else{const t=e.shadowRoot;t&&this._addSubObserver(t)}return NodeFilter.FILTER_SKIP}}).nextNode()}takeRecords(){const e=this._observer.takeRecords();for(const t of this._subObservers.values())e.push(...t.takeRecords());return e}}dt._shadowObservers=new Set;class ut{constructor(e){this.keyboardNavigation=e.keyboardNavigation,this.focusedElement=e.focusedElement,this.focusable=e.focusable,this.root=e.root,this.uncontrolled=e.uncontrolled,this.core=e}}class ct{constructor(e,t){var i,s;this._forgetMemorizedElements=[],this._wrappers=new Set,this._initQueue=[],this._version="8.5.6",this._noop=!1,this.getWindow=()=>{if(!this._win)throw new Error("Using disposed Tabster.");return this._win},this._storage=function(e){const t=e.__tabsterInstanceContext;return new((null===t||void 0===t?void 0:t.basics.WeakMap)||WeakMap)}(e),this._win=e;const n=this.getWindow;(null===t||void 0===t?void 0:t.DOMAPI)&&function(e){for(const t of Object.keys(e))G[t]=e[t]}({...t.DOMAPI}),this.keyboardNavigation=new Je(n),this.focusedElement=new Ge(this,n),this.focusable=new Me(this),this.root=new De(this,null===t||void 0===t?void 0:t.autoRoot),this.uncontrolled=new ot((null===t||void 0===t?void 0:t.checkUncontrolledCompletely)||(null===t||void 0===t?void 0:t.checkUncontrolledTrappingFocus)),this.controlTab=null===(i=null===t||void 0===t?void 0:t.controlTab)||void 0===i||i,this.rootDummyInputs=!!(null===t||void 0===t?void 0:t.rootDummyInputs),this._dummyObserver=new pe(n),this.getParent=null!==(s=null===t||void 0===t?void 0:t.getParent)&&void 0!==s?s:G.getParentNode,this.internal={stopObserver:()=>{this._unobserve&&(this._unobserve(),delete this._unobserve)},resumeObserver:e=>{if(!this._unobserve){const t=n().document;this._unobserve=function(e,t,i,s){if("undefined"===typeof MutationObserver)return()=>{};const n=t.getWindow;let r;function l(t,i){r||(r=J(n).elementByUId),a(t,i);const s=Z(e,t,e=>a(e,i));if(s)for(;s.nextNode(););}function a(e,s){var l;if(!e.getAttribute)return NodeFilter.FILTER_SKIP;const a=e.__tabsterElementUID;return a&&r&&(s?delete r[a]:null!==(l=r[a])&&void 0!==l||(r[a]=new Y(n,e))),(k(t,e)||e.hasAttribute(o))&&i(t,e,s),NodeFilter.FILTER_SKIP}const d=G.createMutationObserver(e=>{var s,n,r,a,d;const u=new Set;for(const c of e){const e=c.target,d=c.removedNodes,h=c.addedNodes;if("attributes"===c.type)c.attributeName===o&&(u.has(e)||i(t,e));else{for(let i=0;i<d.length;i++){const o=d[i];u.add(o),l(o,!0),null===(n=(s=t._dummyObserver).domChanged)||void 0===n||n.call(s,e)}for(let i=0;i<h.length;i++)l(h[i]),null===(a=(r=t._dummyObserver).domChanged)||void 0===a||a.call(r,e)}}u.clear(),null===(d=t.modalizer)||void 0===d||d.hiddenUpdate()});return s&&l(n().document.body),d.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:[o]}),()=>{d.disconnect()}}(t,this,I,e)}}},X(n),this.queueInit(()=>{this.internal.resumeObserver(!0)})}_mergeProps(e){var t;e&&(this.getParent=null!==(t=e.getParent)&&void 0!==t?t:this.getParent)}createTabster(e,t){const i=new ut(this);return e||this._wrappers.add(i),this._mergeProps(t),i}disposeTabster(e,t){t?this._wrappers.clear():this._wrappers.delete(e),0===this._wrappers.size&&this.dispose()}dispose(){var e,t,i,s,o,n,r,l;this.internal.stopObserver();const a=this._win;null===a||void 0===a||a.clearTimeout(this._initTimer),delete this._initTimer,this._initQueue=[],this._forgetMemorizedElements=[],a&&this._forgetMemorizedTimer&&(a.clearTimeout(this._forgetMemorizedTimer),delete this._forgetMemorizedTimer),null===(e=this.outline)||void 0===e||e.dispose(),null===(t=this.crossOrigin)||void 0===t||t.dispose(),null===(i=this.deloser)||void 0===i||i.dispose(),null===(s=this.groupper)||void 0===s||s.dispose(),null===(o=this.mover)||void 0===o||o.dispose(),null===(n=this.modalizer)||void 0===n||n.dispose(),null===(r=this.observedElement)||void 0===r||r.dispose(),null===(l=this.restorer)||void 0===l||l.dispose(),this.keyboardNavigation.dispose(),this.focusable.dispose(),this.focusedElement.dispose(),this.root.dispose(),this._dummyObserver.dispose(),function(e){const t=J(e);t.fakeWeakRefsStarted=!1,t.fakeWeakRefsTimer&&(e().clearTimeout(t.fakeWeakRefsTimer),t.fakeWeakRefsTimer=void 0,t.fakeWeakRefs=[])}(this.getWindow),re(this.getWindow),this._storage=new WeakMap,this._wrappers.clear(),a&&(!function(e){const t=e.__tabsterInstanceContext;t&&(t.elementByUId={},delete t.WeakRef,t.containerBoundingRectCache={},t.containerBoundingRectCacheTimer&&e.clearTimeout(t.containerBoundingRectCacheTimer),t.fakeWeakRefsTimer&&e.clearTimeout(t.fakeWeakRefsTimer),t.fakeWeakRefs=[],delete e.__tabsterInstanceContext)}(a),delete a.__tabsterInstance,delete this._win)}storageEntry(e,t){const i=this._storage;let s=i.get(e);return s?!1===t&&0===Object.keys(s).length&&i.delete(e):!0===t&&(s={},i.set(e,s)),s}forceCleanup(){this._win&&(this._forgetMemorizedElements.push(this._win.document.body),this._forgetMemorizedTimer||(this._forgetMemorizedTimer=this._win.setTimeout(()=>{delete this._forgetMemorizedTimer;for(let e=this._forgetMemorizedElements.shift();e;e=this._forgetMemorizedElements.shift())re(this.getWindow,e),Ge.forgetMemorized(this.focusedElement,e)},0),$(this.getWindow,!0)))}queueInit(e){var t;this._win&&(this._initQueue.push(e),this._initTimer||(this._initTimer=null===(t=this._win)||void 0===t?void 0:t.setTimeout(()=>{delete this._initTimer,this.drainInitQueue()},0)))}drainInitQueue(){if(!this._win)return;const e=this._initQueue;this._initQueue=[],e.forEach(e=>e())}}function ht(e,t){let i=pt(e);return i?i.createTabster(!1,t):(i=new ct(e,t),e.__tabsterInstance=i,i.createTabster())}function mt(e){const t=e.core;return t.groupper||(t.groupper=new Qe(t,t.getWindow)),t.groupper}function _t(e){const t=e.core;return t.mover||(t.mover=new st(t,t.getWindow)),t.mover}function vt(e,t,i){const s=e.core;return s.modalizer||(s.modalizer=new Ze(s,t,i)),s.modalizer}function ft(e){const t=e.core;return t.restorer||(t.restorer=new lt(t)),t.restorer}function bt(e,t){e.core.disposeTabster(e,t)}function pt(e){return e.__tabsterInstance}},16059:(e,t,i)=>{i.d(t,{p:()=>d});var s=i(65043),o=i(1262),n=i(52390),r=i(67146),l=i(24915);const a=e=>e;function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;const{targetDocument:t}=(0,n.Y)(),i=s.useRef(null);return(0,l.E)(()=>{const s=function(e){const t=(null===e||void 0===e?void 0:e.defaultView)||void 0,i=null===t||void 0===t?void 0:t.__tabsterShadowDOMAPI;if(t)return(0,o._A)(t,{autoRoot:{},controlTab:!1,getParent:r.P,checkUncontrolledTrappingFocus:e=>{var t;return!!(null===(t=e.firstElementChild)||void 0===t?void 0:t.hasAttribute("data-is-focus-trap-zone-bumper"))},DOMAPI:i})}(t);if(s)return i.current=e(s),()=>{(0,o.hC)(s),i.current=null}},[t,e]),i}},25486:(e,t,i)=>{i.d(t,{g:()=>r});var s=i(1262),o=i(16059),n=i(65043);const r=e=>{(0,o.p)();const t=(0,s.U6)(e,!0);return n.useMemo(()=>({[s.h7]:t}),[t])}},67146:(e,t,i)=>{function s(e){if(!e)return null;if(!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).skipVirtual){const t=function(e){return(t=e)&&t._virtual&&e._virtual.parent||null;var t}(e);if(t)return t}const t=e.parentNode;return t&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE?t.host:t}i.d(t,{P:()=>s})},81540:(e,t,i)=>{i.d(t,{y:()=>u});var s=i(31360),o=i(25486),n=i(1262),r=i(16059);const l="data-tabster-never-hide";const a=e=>e.hasAttribute(l);function d(e){(0,n.Az)(e,void 0,a),(0,n.mz)(e)}const u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{trapFocus:t,alwaysFocusable:i,legacyTrapFocus:l}=e;(0,r.p)(d);const a=(0,s.Bi)("modal-",e.id);return{modalAttributes:(0,o.g)({restorer:{type:n.CP.Source},...t&&{modalizer:{id:a,isOthersAccessible:!t,isAlwaysAccessible:i,isTrapped:l&&t}}}),triggerAttributes:(0,o.g)({restorer:{type:n.CP.Target}})}}}}]);
//# sourceMappingURL=81540.874b6538.chunk.js.map